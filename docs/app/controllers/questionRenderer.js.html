<!DOCTYPE html><html><head><title>questionRenderer.js</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../index.html" class="source"><span class="file_name">README</span></a><a href="../../app/controllers/questionRenderer.js.html" class="source selected"><span class="base_path">app / controllers / </span><span class="file_name">questionRenderer.js</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>questionRenderer.js</h1><div class="filepath">app/controllers/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><p><code>Alloy.Globals.currentlyFocusedTF</code> stores the currently focused textfield</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">currentlyFocusedTF</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> </pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><p><code>hiddenQuestions</code> is a list of all questions that are not currently visible</p>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">hiddenQuestions</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><p><code>allSections</code> is a list of all possible (Titanium.UI.ListSection) in a assessment</p>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">allSections</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><p><code>currentAssessmentObject</code> defines the assessmentObject the the question renderer is displaying</p>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">currentAssessmentObject</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><p><code>questionSelected</code> is used for the move to lastQuestion
when a question is selected this value is updated</p>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">questionSelected</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><p><code>ALL_SECTIONS</code> and <code>SINGLE_SECTIONS</code> are just names for set values</p>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">ALL_SECTIONS</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">SINGLE_SECTIONS</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span></pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><p><code>listViewDisplayType</code> defines what mode the question renderer is in and can be set to <code>ALL_SECTIONS</code> or <code>SINGLE_SECTIONS</code></p>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">listViewDisplayType</span> <span class="o">=</span> <span class="nx">ALL_SECTIONS</span><span class="p">;</span></pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><p><code>currentSingleSectionIndex</code> is the index of the section curently selected section,
when <code>listViewDisplayType</code> is set to <code>SINGLE_SECTIONS</code></p>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">currentSingleSectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>findQuestionsRef</code> searches sectionList for a question that <br />matches the questionName and groupType and returns references to the found question.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionName </span><span class="dox_type">string</span><span>- Name to search against</span></div><div class="dox_tag_detail"><span>groupType </span><span class="dox_type">string</span><span>- groupType to search against</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Object</span><span>(success) {(int)questionIndex, (JSON_Object) questionObject, (Titanium.UI.ListSection) sectionObject}</span></div><div class="dox_tag_detail"><span class="dox_type">null</span><span>(fail) :</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre> 
<span class="kd">var</span> <span class="nx">findQuestionsRef</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">sectionList</span><span class="p">,</span> <span class="nx">questionName</span><span class="p">,</span> <span class="nx">groupType</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    
    <span class="k">if</span><span class="p">(</span><span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">groupType</span> <span class="o">==</span> <span class="nx">groupType</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">itemsList</span> <span class="o">=</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">();</span>
          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">itemIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">itemIndex</span> <span class="o">&lt;</span> <span class="nx">itemsList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">itemIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">itemsList</span><span class="p">[</span><span class="nx">itemIndex</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">questionName</span><span class="p">)</span> <span class="p">{</span>
                  <span class="k">return</span> <span class="p">{</span>
                      <span class="nx">questionIndex</span><span class="o">:</span> <span class="nx">itemIndex</span><span class="p">,</span>
                      <span class="nx">question</span><span class="o">:</span> <span class="nx">itemsList</span><span class="p">[</span><span class="nx">itemIndex</span><span class="p">],</span>
                      <span class="nx">section</span><span class="o">:</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">]</span>
                  <span class="p">};</span>
              <span class="p">}</span>
          <span class="p">}</span>
       <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>newTestIfMandatory</code> the questionObject passed in will be tested if it is mandatory.<br />A question can be strictly  mandatory or can be mandatory depending on the<br />value of anther question.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionObject </span><span class="dox_type">questionObject</span><span>- to test</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">boolean</span><span>true or false</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">newTestIfMandatory</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">mandatory</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">conditionalMandatory</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">conditionalMandatory</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">conditionalMandatory</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">conditionalIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">conditionalIndex</span> <span class="o">&lt;</span> <span class="nx">conditionalMandatory</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">conditionalIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">parentQuestion</span> <span class="o">=</span> <span class="nx">newFindQuestionObject</span><span class="p">(</span><span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">conditionalIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">conditionalIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">groupType</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">parentQuestion</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">conditionalIndex</span><span class="p">].</span><span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">valueIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">valueIndex</span> <span class="o">&lt;</span> <span class="nx">parentQuestion</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">valueIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">conditionalIndex</span><span class="p">].</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">parentQuestion</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="nx">valueIndex</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-12"><td class="docs"><div class="pilwrap"><a href="#section-12" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>setQuestionToMandatory</code> the question passed in will have its title changed to<br />have a '*' at its end if it is mandatory or removed if it is not</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionObject </span><span class="dox_type">questionObject</span><span>- to be changed </span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_obejct</span><span>questionObject</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">setQuestionToMandatory</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">mandatory</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-13"><td class="docs"><div class="pilwrap"><a href="#section-13" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>newTestIfVisable</code> questionObject passed in will be tested if it should be Visible<br />to the user or hidden</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionObject </span><span class="dox_type">JSON_obejct</span><span>- to test</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">boolean</span><span>true or false</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">newTestIfVisable</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">renderValueIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">renderValueIndex</span> <span class="o">&lt;</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">renderValueIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">parentQuestion</span> <span class="o">=</span> <span class="nx">newFindQuestionObject</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">[</span><span class="nx">renderValueIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">[</span><span class="nx">renderValueIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">groupType</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">parentQuestion</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">[</span><span class="nx">renderValueIndex</span><span class="p">].</span><span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">valueIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">valueIndex</span> <span class="o">&lt;</span> <span class="nx">parentQuestion</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">valueIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">[</span><span class="nx">renderValueIndex</span><span class="p">].</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">parentQuestion</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="nx">valueIndex</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-14"><td class="docs"><div class="pilwrap"><a href="#section-14" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>newFindQuestionObject</code> this function searches all sections for a question that <br />matches the questionName and groupType and return the question Object or null <br />if not found</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionName </span><span class="dox_type">String</span><span>- Name to search against</span></div><div class="dox_tag_detail"><span>groupType </span><span class="dox_type">String</span><span>- to search against</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_obejct</span><span>(success) : questionObject</span></div><div class="dox_tag_detail"><span class="dox_type">null</span><span>(fail)</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">newFindQuestionObject</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">questionName</span><span class="p">,</span> <span class="nx">groupType</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">groupType</span> <span class="o">==</span> <span class="nx">groupType</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">questionList</span> <span class="o">=</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">();</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">questionName</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">];</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-15"><td class="docs"><div class="pilwrap"><a href="#section-15" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>newTestDependentQuestions</code> tests all questions that are dependent on the passed<br />questionObject if they are visable or mandatory. question are hiden or made Visible<br />depending on the results of the tests</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionObject </span><span class="dox_type">JSON_obejct</span><span>- question to test</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">newTestDependentQuestions</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">)</span> <span class="p">{</span>
  
  </pre></div></td></tr><tr id="section-16"><td class="docs"><div class="pilwrap"><a href="#section-16" class="pilcrow">&#182;</a></div><p><code>addToSectionMap</code>is a map of section using groupType as a key to a list of questions to add to that section</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">addToSectionMap</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">hiddenQuestions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">childQuestionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">childQuestionIndex</span> <span class="o">&lt;</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderDependencyList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">childQuestionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">hiddenQuestions</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span>
      <span class="p">{</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">hiddenQuestions</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderDependencyList</span><span class="p">[</span><span class="nx">childQuestionIndex</span><span class="p">].</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
              
                <span class="k">if</span> <span class="p">(</span><span class="nx">newTestIfVisable</span><span class="p">(</span><span class="nx">hiddenQuestions</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">])</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
                  
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">hiddenQuestions</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">groupType</span> <span class="k">in</span> <span class="nx">addToSectionMap</span><span class="p">))</span> <span class="p">{</span>
                      
                        <span class="nx">addToSectionMap</span><span class="p">[</span><span class="nx">hiddenQuestions</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">groupType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
                    <span class="p">}</span>
                    <span class="nx">addToSectionMap</span><span class="p">[</span><span class="nx">hiddenQuestions</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">groupType</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">hiddenQuestions</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
                    <span class="nx">hiddenQuestions</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                    <span class="nx">questionIndex</span><span class="o">--</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-17"><td class="docs"><div class="pilwrap"><a href="#section-17" class="pilcrow">&#182;</a></div><p><code>removeFromSectionMap</code> is a map of section with groupType being the key. each element in the map is a second map of question names.
using this <code>if(questionName in removeFromSectionMap[groupType]</code> will tell you if the question needs to be removed</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">removeFromSectionMap</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderDependencyList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">childQuestion</span> <span class="o">=</span> <span class="nx">newFindQuestionObject</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderDependencyList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">name</span><span class="p">,</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderDependencyList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">groupType</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">childQuestion</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">newTestIfVisable</span><span class="p">(</span><span class="nx">childQuestion</span><span class="p">)</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">childQuestion</span><span class="p">.</span><span class="nx">groupType</span> <span class="k">in</span> <span class="nx">removeFromSectionMap</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">removeFromSectionMap</span><span class="p">[</span><span class="nx">childQuestion</span><span class="p">.</span><span class="nx">groupType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="p">}</span>
            <span class="nx">removeFromSectionMap</span><span class="p">[</span><span class="nx">childQuestion</span><span class="p">.</span><span class="nx">groupType</span><span class="p">][</span><span class="nx">childQuestion</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">questionList</span> <span class="o">=</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">sectionGroupType</span> <span class="o">=</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">groupType</span><span class="p">;</span></pre></div></td></tr><tr id="section-18"><td class="docs"><div class="pilwrap"><a href="#section-18" class="pilcrow">&#182;</a></div><p><code>if (sectionGroupType in removeFromSectionMap)</code> tests if there are any question that need to be removed </p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">sectionGroupType</span> <span class="k">in</span> <span class="nx">removeFromSectionMap</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;remove from section : &quot;</span> <span class="o">+</span> <span class="nx">sectionGroupType</span><span class="p">,</span><span class="s2">&quot;info&quot;</span><span class="p">);</span>

            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">name</span> <span class="k">in</span> <span class="nx">removeFromSectionMap</span><span class="p">[</span><span class="nx">sectionGroupType</span><span class="p">])</span> <span class="p">{</span>
                    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;remove : &quot;</span> <span class="o">+</span> <span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="s2">&quot;info&quot;</span><span class="p">);</span>
                    <span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">visable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

                    <span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">mandatory</span> <span class="o">=</span> <span class="nx">newTestIfMandatory</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
                    <span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">setQuestionToMandatory</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>

                    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localDataHandler</span><span class="p">.</span><span class="nx">updateQuestion</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
                    <span class="nx">hiddenQuestions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
                    <span class="nx">questionList</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

                    <span class="nx">questionIndex</span><span class="o">--</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-19"><td class="docs"><div class="pilwrap"><a href="#section-19" class="pilcrow">&#182;</a></div><p><code>if (sectionGroupType in addToSectionMap)</code> tests if there are any question that need to be added </p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">sectionGroupType</span> <span class="k">in</span> <span class="nx">addToSectionMap</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;add from section : &quot;</span> <span class="o">+</span> <span class="nx">sectionGroupType</span><span class="p">,</span><span class="s2">&quot;info&quot;</span><span class="p">);</span>

            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">addQuestionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">addQuestionIndex</span> <span class="o">&lt;</span> <span class="nx">addToSectionMap</span><span class="p">[</span><span class="nx">sectionGroupType</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">addQuestionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-20"><td class="docs"><div class="pilwrap"><a href="#section-20" class="pilcrow">&#182;</a></div><p>will now add the question in the section depending on there order</p>
</td><td class="code"><div class="highlight"><pre>                <span class="kd">var</span> <span class="nx">questionObjectToAdd</span> <span class="o">=</span> <span class="nx">addToSectionMap</span><span class="p">[</span><span class="nx">sectionGroupType</span><span class="p">][</span><span class="nx">addQuestionIndex</span><span class="p">];</span>
                <span class="kd">var</span> <span class="nx">questionAdded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">questionAdded</span> <span class="o">!=</span> <span class="kc">true</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

                    <span class="k">if</span> <span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">questionObjectToAdd</span><span class="p">.</span><span class="nx">order</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">order</span><span class="p">))</span> <span class="p">{</span>

                        <span class="nx">questionObjectToAdd</span><span class="p">.</span><span class="nx">visable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

                        <span class="nx">questionObjectToAdd</span><span class="p">.</span><span class="nx">mandatory</span> <span class="o">=</span> <span class="nx">newTestIfMandatory</span><span class="p">(</span><span class="nx">questionObjectToAdd</span><span class="p">);</span>
                        <span class="nx">questionObjectToAdd</span> <span class="o">=</span> <span class="nx">setQuestionToMandatory</span><span class="p">(</span><span class="nx">questionObjectToAdd</span><span class="p">);</span>
     

                        <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localDataHandler</span><span class="p">.</span><span class="nx">updateQuestion</span><span class="p">(</span><span class="nx">questionObjectToAdd</span><span class="p">);</span>


                        <span class="nx">questionList</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">questionObjectToAdd</span><span class="p">);</span>
                        <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;added splice : &quot;</span> <span class="o">+</span> <span class="nx">questionObjectToAdd</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="s2">&quot;info&quot;</span><span class="p">);</span>
                        <span class="nx">questionAdded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">questionAdded</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">questionObjectToAdd</span><span class="p">.</span><span class="nx">visable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

                    <span class="nx">questionObjectToAdd</span><span class="p">.</span><span class="nx">mandatory</span> <span class="o">=</span> <span class="nx">newTestIfMandatory</span><span class="p">(</span><span class="nx">questionObjectToAdd</span><span class="p">);</span>
                    <span class="nx">questionObjectToAdd</span> <span class="o">=</span> <span class="nx">setQuestionToMandatory</span><span class="p">(</span><span class="nx">questionObjectToAdd</span><span class="p">);</span>

                    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localDataHandler</span><span class="p">.</span><span class="nx">updateQuestion</span><span class="p">(</span><span class="nx">questionObjectToAdd</span><span class="p">);</span>
                    <span class="nx">questionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">questionObjectToAdd</span><span class="p">);</span>
                    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;added push : &quot;</span> <span class="o">+</span> <span class="nx">questionObjectToAdd</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="s2">&quot;info&quot;</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">sectionGroupType</span> <span class="k">in</span> <span class="nx">addToSectionMap</span> <span class="o">||</span> <span class="nx">sectionGroupType</span> <span class="k">in</span> <span class="nx">removeFromSectionMap</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">setItems</span><span class="p">(</span><span class="nx">questionList</span><span class="p">);</span>
            
            <span class="k">if</span><span class="p">(</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
            <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">headerView</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
            <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">headerView</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">Ti</span><span class="p">.</span><span class="nx">UI</span><span class="p">.</span><span class="nx">SIZE</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span><span class="p">{</span>
            <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">headerView</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">headerView</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>


    <span class="kd">var</span> <span class="nx">testMandatorySectionMap</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">mandatoryDependenciesList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">childQuestion</span> <span class="o">=</span> <span class="nx">newFindQuestionObject</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">mandatoryDependenciesList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">name</span><span class="p">,</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">mandatoryDependenciesList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">groupType</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">childQuestion</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">childQuestion</span><span class="p">.</span><span class="nx">groupType</span> <span class="k">in</span> <span class="nx">testMandatorySectionMap</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">testMandatorySectionMap</span><span class="p">[</span><span class="nx">childQuestion</span><span class="p">.</span><span class="nx">groupType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="p">}</span>
        <span class="nx">testMandatorySectionMap</span><span class="p">[</span><span class="nx">childQuestion</span><span class="p">.</span><span class="nx">groupType</span><span class="p">][</span><span class="nx">childQuestion</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">questionList</span> <span class="o">=</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">sectionGroupType</span> <span class="o">=</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">groupType</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">sectionGroupType</span> <span class="k">in</span> <span class="nx">testMandatorySectionMap</span><span class="p">)</span> <span class="p">{</span>
   

            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">name</span> <span class="k">in</span> <span class="nx">testMandatorySectionMap</span><span class="p">[</span><span class="nx">sectionGroupType</span><span class="p">])</span> <span class="p">{</span>
                    <span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">mandatory</span> <span class="o">=</span> <span class="nx">newTestIfMandatory</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
                    <span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">setQuestionToMandatory</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
                    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localDataHandler</span><span class="p">.</span><span class="nx">updateQuestion</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">setItems</span><span class="p">(</span><span class="nx">questionList</span><span class="p">);</span>

        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-21"><td class="docs"><div class="pilwrap"><a href="#section-21" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>findQuestionsValue</code> searches for the question that matches the <br />passed questionName, then the question value array is returned. if no question is<br />found it returns an array with a empty String in</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionName </span><span class="dox_type">String</span><span>- Name to search against</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_List</span><span>(success) value List eg [&quot;value1&quot;, &quot;value2&quot;]</span></div><div class="dox_tag_detail"><span class="dox_type">JSON_List</span><span>(fail) list with one item [&quot;&quot;]</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">findQuestionsValue</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">questionName</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">().</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">questionList</span> <span class="o">=</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">questionName</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">value</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-22"><td class="docs"><div class="pilwrap"><a href="#section-22" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>findSectionByAssociatedFileName</code> searches for the question that matches the <br />passed alcrmQuestionID that also is found is the file that matches associatedFileName.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>alcrmQuestionID </span><span class="dox_type">String</span><span>- alcrmQuestionID to search for</span></div><div class="dox_tag_detail"><span>associatedFileName </span><span class="dox_type">String</span><span>- associatedFileName to search for</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_Object</span><span>(success) {questionIndex, questionObject, sectionObject}</span></div><div class="dox_tag_detail"><span class="dox_type">null</span><span>(fail)</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">findQuestionByAssociatedFileName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">alcrmQuestionID</span><span class="p">,</span> <span class="nx">associatedFileName</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      
        <span class="k">if</span> <span class="p">(</span><span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">associatedFileName</span> <span class="o">==</span> <span class="nx">associatedFileName</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">questionList</span> <span class="o">=</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">();</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">alcrmQuestionID</span> <span class="o">==</span> <span class="nx">alcrmQuestionID</span><span class="p">)</span> <span class="p">{</span>

                    <span class="k">return</span> <span class="p">{</span>
                      <span class="nx">questionIndex</span><span class="o">:</span> <span class="nx">questionIndex</span><span class="p">,</span>
                        <span class="nx">question</span><span class="o">:</span> <span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">],</span>
                        <span class="nx">section</span><span class="o">:</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">]</span>
                    <span class="p">};</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;findQuestionByAssociatedFileName question not found, alcrmQuestionID = &quot;</span><span class="o">+</span><span class="nx">alcrmQuestionID</span><span class="o">+</span><span class="s2">&quot;, associatedFileName = &quot;</span><span class="o">+</span><span class="nx">associatedFileName</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-23"><td class="docs"><div class="pilwrap"><a href="#section-23" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>findSectionByAssociatedFileName</code> searches for the section that matches the <br />passed alcrmGroupType that also is found is the file that matches associatedFileName.<br />the fuction will return the section object or null if not found</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>alcrmGroupType </span><span class="dox_type">String</span><span>- alcrmGroupType to search for</span></div><div class="dox_tag_detail"><span>associatedFileName </span><span class="dox_type">String</span><span>- associatedFileName to search for</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Titanium.UI.ListSection</span><span>(success) sectionObject</span></div><div class="dox_tag_detail"><span class="dox_type">null</span><span>(fail)</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">findSectionByAssociatedFileName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">alcrmGroupType</span><span class="p">,</span> <span class="nx">associatedFileName</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">associatedFileName</span> <span class="o">==</span> <span class="nx">associatedFileName</span> <span class="o">&amp;&amp;</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">alcrmGroupType</span> <span class="o">==</span> <span class="nx">alcrmGroupType</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-24"><td class="docs"><div class="pilwrap"><a href="#section-24" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>exports.clear</code> clears all sections and questions from the listView</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">exports</span><span class="p">.</span><span class="nx">clear</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">allSections</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">setSections</span><span class="p">(</span><span class="nx">allSections</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-25"><td class="docs"><div class="pilwrap"><a href="#section-25" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>buildQuestionSections</code> takes the JSON_sectionList and builds titanium<br />ListSection for each section and return the new list of titanium ListSections</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>JSON_sectionList </span><span class="dox_type">JSON_List</span><span>- simple JSON List of Sections and Question</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Titanium.UI.ListSection</span><span>listSections</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">buildQuestionSections</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">newSectionList</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">JSON_sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">newQuestionsSection</span> <span class="o">=</span> <span class="nx">Titanium</span><span class="p">.</span><span class="nx">UI</span><span class="p">.</span><span class="nx">createListSection</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">pageType</span> <span class="o">==</span> <span class="s2">&quot;riskAssessment&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">newQuestionsSection</span><span class="p">.</span><span class="nx">headerView</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">createController</span><span class="p">(</span><span class="s2">&quot;questionSectionHeader&quot;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">title</span><span class="o">:</span> <span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">title</span>
            <span class="p">}).</span><span class="nx">getView</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">newQuestionsSection</span><span class="p">.</span><span class="nx">headerView</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">createController</span><span class="p">(</span><span class="s2">&quot;questionSectionHeader&quot;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">title</span><span class="o">:</span> <span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">pageName</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">title</span>
            <span class="p">}).</span><span class="nx">getView</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="nx">newQuestionsSection</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">title</span><span class="p">;</span>
        <span class="nx">newQuestionsSection</span><span class="p">.</span><span class="nx">groupType</span> <span class="o">=</span> <span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">groupType</span><span class="p">;</span>
        <span class="nx">newQuestionsSection</span><span class="p">.</span><span class="nx">alcrmGroupType</span> <span class="o">=</span> <span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">alcrmGroupType</span><span class="p">;</span>
        <span class="nx">newQuestionsSection</span><span class="p">.</span><span class="nx">associatedFileName</span> <span class="o">=</span> <span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">associatedFileName</span><span class="p">;</span>
        <span class="nx">newQuestionsSection</span><span class="p">.</span><span class="nx">pageName</span> <span class="o">=</span> <span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">pageName</span><span class="p">;</span>
        <span class="nx">newQuestionsSection</span><span class="p">.</span><span class="nx">pageType</span> <span class="o">=</span> <span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">pageType</span><span class="p">;</span>
        <span class="nx">newQuestionsSection</span><span class="p">.</span><span class="nx">pageID</span><span class="o">=</span> <span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">pageID</span><span class="p">;</span>
        <span class="nx">newQuestionsSection</span><span class="p">.</span><span class="nx">setItems</span><span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">questionList</span><span class="p">);</span>
        <span class="nx">newSectionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newQuestionsSection</span><span class="p">);</span>
        
        <span class="k">if</span><span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
          <span class="nx">newQuestionsSection</span><span class="p">.</span><span class="nx">headerView</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="nx">newQuestionsSection</span><span class="p">.</span><span class="nx">headerView</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">newSectionList</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-26"><td class="docs"><div class="pilwrap"><a href="#section-26" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>removeHiddenQuestions</code> takes the JSON_sectionList removes all hidden questions<br />before the function buildQuestionSections is called. all hidden questions are added to<br />hiddenQuestions list</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>JSON_sectionList </span><span class="dox_type">JSON_LIST</span><span>- simple JSON List of Sections and Question</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_LIST</span><span>JSON_sectionList section list with hidden questions removed</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">removeHiddenQuestions</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span><span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">JSON_sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

          <span class="kd">var</span> <span class="nx">questionList</span> <span class="o">=</span> <span class="nx">JSON_sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">;</span>
          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            
        <span class="k">if</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">){</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">visable</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;removeHiddenQuestion at start, question name = &quot;</span><span class="o">+</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">name</span><span class="p">,</span><span class="s2">&quot;info&quot;</span><span class="p">);</span>
                    <span class="nx">hiddenQuestions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
                    <span class="nx">questionList</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                    <span class="nx">questionIndex</span> <span class="o">=</span> <span class="nx">questionIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
                
           <span class="p">}</span>
          <span class="p">}</span>
          <span class="nx">JSON_sectionList</span><span class="p">.</span><span class="nx">questionList</span> <span class="o">=</span> <span class="nx">questionList</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">JSON_sectionList</span><span class="p">;</span>
  <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception in removeHiddenQuestions. Error Details: &quot;</span><span class="o">+</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;error&quot;</span><span class="p">);</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">aIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-27"><td class="docs"><div class="pilwrap"><a href="#section-27" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>setupSelectedQuestion</code> called within the function setAssessment. it searches for the<br />a question that has been previously selected or if non found the first non read-only question</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">setupSelectedQuestion</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
 <span class="k">try</span><span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">allSections</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">questionList</span> <span class="o">=</span> <span class="nx">allSections</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">();</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">){</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">selected</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">selectQuestion</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
                  <span class="k">return</span><span class="p">;</span>
              <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>


    <span class="k">if</span> <span class="p">(</span><span class="nx">allSections</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">questionList</span> <span class="o">=</span> <span class="nx">allSections</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">getItems</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">questionList</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">selectQuestion</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
 <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
  <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception in setupSelectedQuestion. Error Details: &quot;</span><span class="o">+</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;error&quot;</span><span class="p">);</span>
  <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">aIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
 <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-28"><td class="docs"><div class="pilwrap"><a href="#section-28" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>setAssessment</code> the JSON_sectionList is the interpreted question set and assessmentObject<br />is the saved assessment object created in localDataHandler. this function is used to setup <br />questionRenderer to veiw an assessment</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>JSON_sectionList </span><span class="dox_type">JSON_List</span><span>- simple JSON List of Sections and Question</span></div><div class="dox_tag_detail"><span>assessmentObject </span><span class="dox_type">JSON_Object</span><span>- object defining an assessment and names of attched saved files</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">exports</span><span class="p">.</span><span class="nx">setAssessment</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">,</span> <span class="nx">assessmentObject</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span><span class="p">{</span>
    <span class="nx">Ti</span><span class="p">.</span><span class="nx">API</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;setAssessment = &quot;</span><span class="o">+</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">));</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">setSections</span><span class="p">([]);</span>
      <span class="nx">currentAssessmentObject</span> <span class="o">=</span> <span class="nx">assessmentObject</span><span class="p">;</span>
  
      <span class="nx">hiddenQuestions</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">allSections</span> <span class="o">=</span> <span class="p">[];</span>
  
      <span class="nx">JSON_sectionList</span> <span class="o">=</span> <span class="nx">removeHiddenQuestions</span><span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">);</span>
  
    
  
      <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">buildQuestionSections</span><span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">);</span>
  
      <span class="nx">allSections</span> <span class="o">=</span> <span class="nx">sectionList</span><span class="p">;</span>
  
      <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">setSections</span><span class="p">(</span><span class="nx">sectionList</span><span class="p">);</span>
      
      <span class="kd">var</span> <span class="nx">userPreferences</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">getPreferences</span><span class="p">();</span>
      <span class="nx">setListViewDisplayTypeToSingleSections</span><span class="p">(</span><span class="nx">userPreferences</span><span class="p">.</span><span class="nx">singleView</span><span class="p">);</span>
    <span class="nx">userPreferences</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    
      <span class="nx">setupSelectedQuestion</span><span class="p">();</span>
  
      <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">scrollToItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception in setAssessment. Error Details: &quot;</span><span class="o">+</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;error&quot;</span><span class="p">);</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">aIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-29"><td class="docs"><div class="pilwrap"><a href="#section-29" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>appendSectionsToAssessment</code> the JSON_sectionList is the interpreted question.<br />used to add extra sectons to the listView after setAssessment has been called</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>JSON_sectionList </span><span class="dox_type">JSON_List</span><span>- simple JSON List of Sections and Question</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">exports</span><span class="p">.</span><span class="nx">appendSectionsToAssessment</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Ti</span><span class="p">.</span><span class="nx">API</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;appendSectionsToAssessment = &quot;</span><span class="o">+</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">));</span>
    <span class="nx">JSON_sectionList</span> <span class="o">=</span> <span class="nx">removeHiddenQuestions</span><span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">);</span>

    <span class="nx">appendSectionList</span> <span class="o">=</span> <span class="nx">buildQuestionSections</span><span class="p">(</span><span class="nx">JSON_sectionList</span><span class="p">);</span>

    <span class="nx">allSections</span> <span class="o">=</span> <span class="nx">allSections</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">appendSectionList</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">setSections</span><span class="p">(</span><span class="nx">allSections</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-30"><td class="docs"><div class="pilwrap"><a href="#section-30" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>exports.moveToQuestion</code> searches for a section that matched the groupType<br />and moves the listView to make visble the question at questionIndex at the top of the screen</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>groupType </span><span class="dox_type">string</span><span>- groupType to search for</span></div><div class="dox_tag_detail"><span>questionIndex </span><span class="dox_type">int</span><span>- questionIndex to search for</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">exports</span><span class="p">.</span><span class="nx">moveToQuestion</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">groupType</span><span class="p">,</span> <span class="nx">questionIndex</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;** questionRender moveToQuestion, groupType = &quot;</span><span class="o">+</span><span class="nx">groupType</span><span class="o">+</span><span class="s2">&quot;, questionIndex = &quot;</span><span class="o">+</span><span class="nx">questionIndex</span><span class="p">,</span><span class="s2">&quot;info&quot;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">groupType</span> <span class="o">==</span> <span class="nx">groupType</span><span class="p">)</span> <span class="p">{</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">listViewDisplayType</span> <span class="o">==</span> <span class="nx">ALL_SECTIONS</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">scrollToItem</span><span class="p">(</span><span class="nx">sectionIndex</span><span class="p">,</span> <span class="nx">questionIndex</span><span class="p">,</span> <span class="p">{</span>
                    <span class="nx">animated</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">position</span><span class="o">:</span> <span class="nx">Titanium</span><span class="p">.</span><span class="nx">UI</span><span class="p">.</span><span class="nx">iPhone</span><span class="p">.</span><span class="nx">ListViewScrollPosition</span><span class="p">.</span><span class="nx">TOP</span>
                <span class="p">});</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">listViewDisplayType</span> <span class="o">==</span> <span class="nx">SINGLE_SECTIONS</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">setSelectedSectionForSingleSections</span><span class="p">(</span><span class="nx">sectionIndex</span><span class="p">);</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">scrollToItem</span><span class="p">(</span><span class="nx">sectionIndex</span><span class="p">,</span> <span class="nx">questionIndex</span><span class="p">,</span> <span class="p">{</span>
                    <span class="nx">animated</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">position</span><span class="o">:</span> <span class="nx">Titanium</span><span class="p">.</span><span class="nx">UI</span><span class="p">.</span><span class="nx">iPhone</span><span class="p">.</span><span class="nx">ListViewScrollPosition</span><span class="p">.</span><span class="nx">TOP</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="nx">selectQuestion</span><span class="p">(</span><span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItemAt</span><span class="p">(</span><span class="nx">questionIndex</span><span class="p">));</span>

            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-31"><td class="docs"><div class="pilwrap"><a href="#section-31" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>getQuestionIndexFromSection</code> returns the index of the question that matches the questionName<br />in the section that is passed. if no question is found null is returned</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionName </span><span class="dox_type">String</span><span>- questionName to search for</span></div><div class="dox_tag_detail"><span>section </span><span class="dox_type">Titanium.UI.ListSection</span><span>- section to search in</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">int</span><span>(success) question index</span></div><div class="dox_tag_detail"><span class="dox_type">null</span><span>fail</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">getQuestionIndexFromSection</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">questionName</span><span class="p">,</span> <span class="nx">section</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">questionList</span> <span class="o">=</span> <span class="nx">section</span><span class="p">.</span><span class="nx">getItems</span><span class="p">();</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">questionName</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">questionIndex</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-32"><td class="docs"><div class="pilwrap"><a href="#section-32" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>moveToQuestionByName</code> move the list view to place the question found that matches questionName<br />and groupType at the top of the screen</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionName </span><span class="dox_type">String</span><span>- questionName to search for</span></div><div class="dox_tag_detail"><span>groupType </span><span class="dox_type">String</span><span>- groupType to search for</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">moveToQuestionByName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">questionName</span><span class="p">,</span> <span class="nx">groupType</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">groupType</span> <span class="o">==</span> <span class="nx">groupType</span><span class="p">)</span> <span class="p">{</span>

            <span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="nx">getQuestionIndexFromSection</span><span class="p">(</span><span class="nx">questionName</span><span class="p">,</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">]);</span>
            
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionIndex</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">listViewDisplayType</span> <span class="o">==</span> <span class="nx">ALL_SECTIONS</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">scrollToItem</span><span class="p">(</span><span class="nx">sectionIndex</span><span class="p">,</span> <span class="nx">questionIndex</span><span class="p">,</span> <span class="p">{</span>
                    <span class="nx">animated</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">position</span><span class="o">:</span> <span class="nx">Titanium</span><span class="p">.</span><span class="nx">UI</span><span class="p">.</span><span class="nx">iPhone</span><span class="p">.</span><span class="nx">ListViewScrollPosition</span><span class="p">.</span><span class="nx">TOP</span>
                <span class="p">});</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">listViewDisplayType</span> <span class="o">==</span> <span class="nx">SINGLE_SECTIONS</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">setSelectedSectionForSingleSections</span><span class="p">(</span><span class="nx">sectionIndex</span><span class="p">);</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">scrollToItem</span><span class="p">(</span><span class="nx">sectionIndex</span><span class="p">,</span> <span class="nx">questionIndex</span><span class="p">,</span> <span class="p">{</span>
                    <span class="nx">animated</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">position</span><span class="o">:</span> <span class="nx">Titanium</span><span class="p">.</span><span class="nx">UI</span><span class="p">.</span><span class="nx">iPhone</span><span class="p">.</span><span class="nx">ListViewScrollPosition</span><span class="p">.</span><span class="nx">TOP</span>
                <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">selectQuestion</span><span class="p">(</span><span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItemAt</span><span class="p">(</span><span class="nx">questionIndex</span><span class="p">));</span>

            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-33"><td class="docs"><div class="pilwrap"><a href="#section-33" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>exports.goToFirstUnanswered</code> searches for the first question that has not been answered and<br />moves the listView so the question is at the top of the sceeen</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">exports</span><span class="p">.</span><span class="nx">goToFirstUnanswered</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="k">if</span><span class="p">(</span><span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">pageType</span> <span class="o">==</span> <span class="s2">&quot;coreQuestion&quot;</span><span class="p">)</span><span class="k">continue</span><span class="p">;</span>
      
        <span class="kd">var</span> <span class="nx">questionList</span> <span class="o">=</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">();</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
              
                <span class="nx">selectQuestion</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">listViewDisplayType</span> <span class="o">==</span> <span class="nx">ALL_SECTIONS</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">scrollToItem</span><span class="p">(</span><span class="nx">sectionIndex</span><span class="p">,</span> <span class="nx">questionIndex</span><span class="p">,</span> <span class="p">{</span>
                    <span class="nx">animated</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">position</span><span class="o">:</span> <span class="nx">Titanium</span><span class="p">.</span><span class="nx">UI</span><span class="p">.</span><span class="nx">iPhone</span><span class="p">.</span><span class="nx">ListViewScrollPosition</span><span class="p">.</span><span class="nx">TOP</span>
                <span class="p">});</span>
                
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">listViewDisplayType</span> <span class="o">==</span> <span class="nx">SINGLE_SECTIONS</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setSelectedSectionForSingleSections</span><span class="p">(</span><span class="nx">sectionIndex</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">scrollToItem</span><span class="p">(</span><span class="nx">sectionIndex</span><span class="p">,</span> <span class="nx">questionIndex</span><span class="p">,</span> <span class="p">{</span>
                      <span class="nx">animated</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                      <span class="nx">position</span><span class="o">:</span> <span class="nx">Titanium</span><span class="p">.</span><span class="nx">UI</span><span class="p">.</span><span class="nx">iPhone</span><span class="p">.</span><span class="nx">ListViewScrollPosition</span><span class="p">.</span><span class="nx">TOP</span>
                  <span class="p">});</span>
                <span class="p">}</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-34"><td class="docs"><div class="pilwrap"><a href="#section-34" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>exports.goToLastPositiond</code> searches for the first question that has not been a</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">exports</span><span class="p">.</span><span class="nx">goToLastPositiond</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">moveToQuestionByName</span><span class="p">(</span><span class="nx">questionSelected</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">questionSelected</span><span class="p">.</span><span class="nx">groupType</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-35"><td class="docs"><div class="pilwrap"><a href="#section-35" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>exports.getGoToContentsDetails</code> builds a list of all sections and questions to be used in the goTo window</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_List</span><span>list of new section objects which contain list of new question objects</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">exports</span><span class="p">.</span><span class="nx">getGoToContentsDetails</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sectionContentsDetailsList</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="kd">var</span> <span class="nx">mandatoryQuestion</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
 
        <span class="kd">var</span> <span class="nx">newSectionContents</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">questionList</span><span class="o">:</span> <span class="p">[],</span>
            <span class="nx">title</span><span class="o">:</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">title</span><span class="p">,</span>
            <span class="nx">associatedFileName</span><span class="o">:</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">associatedFileName</span><span class="p">,</span>
            <span class="nx">pageName</span><span class="o">:</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">pageName</span><span class="p">,</span>
            <span class="nx">pageType</span><span class="o">:</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">pageType</span><span class="p">,</span>
            <span class="nx">pageID</span> <span class="o">:</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">pageID</span><span class="p">,</span>
            
            <span class="nx">mandatoryQuestions</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nx">allMandatoryQuestionsAnswered</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">allQuestionsAnswered</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            
            <span class="nx">sectionIndex</span><span class="o">:</span> <span class="nx">sectionIndex</span><span class="p">,</span>
            <span class="nx">groupType</span><span class="o">:</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">groupType</span>
        <span class="p">};</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">().</span><span class="nx">length</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">sectionContentsDetailsList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newSectionContents</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">questionsList</span> <span class="o">=</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">();</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionsList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionsList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">isAQuestion</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            
            <span class="k">if</span><span class="p">(</span><span class="nx">questionsList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">mandatory</span> <span class="o">==</span> <span class="kc">true</span><span class="p">){</span>
              <span class="nx">newSectionContents</span><span class="p">.</span><span class="nx">mandatoryQuestions</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">questionsList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">){</span>
                <span class="nx">newSectionContents</span><span class="p">.</span><span class="nx">allMandatoryQuestionsAnswered</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="nx">newSectionContents</span><span class="p">.</span><span class="nx">allQuestionsAnswered</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">questionsList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">){</span>
                <span class="nx">newSectionContents</span><span class="p">.</span><span class="nx">allQuestionsAnswered</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">var</span> <span class="nx">newQuestionDetails</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">title</span><span class="o">:</span> <span class="nx">questionsList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span>
                <span class="nx">questionIndex</span><span class="o">:</span> <span class="nx">questionIndex</span><span class="p">,</span>
                <span class="nx">mandatory</span><span class="o">:</span> <span class="nx">questionsList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">mandatory</span><span class="p">,</span>
                <span class="nx">firstValue</span><span class="o">:</span> <span class="nx">questionsList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">};</span>

            <span class="nx">newSectionContents</span><span class="p">.</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newQuestionDetails</span><span class="p">);</span>
        <span class="p">}</span>

    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">sectionContentsDetailsList</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-36"><td class="docs"><div class="pilwrap"><a href="#section-36" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>getAllQuestionSections</code> returns a list of all sections in the assessment</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Titanium.UI.ListSection</span><span>list of sections</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">getAllQuestionSections</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">allSections</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-37"><td class="docs"><div class="pilwrap"><a href="#section-37" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>setSelectedSectionForSingleSections</code> takes a section from the allSections list and sets it to be the single visable section</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>sectionsIndex </span><span class="dox_type">int</span><span>- the index of the section in the sectionList</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">setSelectedSectionForSingleSections</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">sectionsIndex</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">currentSingleSectionIndex</span> <span class="o">=</span> <span class="nx">sectionsIndex</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">newSectionList</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">newSectionList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">allSections</span><span class="p">[</span><span class="nx">sectionsIndex</span><span class="p">];</span>
   
    <span class="nx">$</span><span class="p">.</span><span class="nx">backButton</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="p">(</span><span class="nx">sectionsIndex</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">nextButton</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="p">(</span><span class="nx">sectionsIndex</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nx">allSections</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>

    <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">setSections</span><span class="p">(</span><span class="nx">newSectionList</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-38"><td class="docs"><div class="pilwrap"><a href="#section-38" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>setListViewDisplayTypeToSingleSections</code> toogles the listViewDisplayType to be SINGLE_SECTIONS or ALL_SECTIONS</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>onSingleSection </span><span class="dox_type">boolean</span><span>- if the SingleSection is on</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">setListViewDisplayTypeToSingleSections</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">onSingleSection</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">onSingleSection</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">listViewDisplayType</span> <span class="o">=</span> <span class="nx">SINGLE_SECTIONS</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">allSections</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

        <span class="nx">currentSingleSectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">setSelectedSectionForSingleSections</span><span class="p">(</span><span class="nx">currentSingleSectionIndex</span><span class="p">);</span>

        <span class="nx">$</span><span class="p">.</span><span class="nx">singleSectionsNavView</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="s2">&quot;80dp&quot;</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">allSectionsNavView</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">allSectionsNavView</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">listViewDisplayType</span> <span class="o">=</span> <span class="nx">ALL_SECTIONS</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">setSections</span><span class="p">(</span><span class="nx">allSections</span><span class="p">);</span>

        <span class="nx">$</span><span class="p">.</span><span class="nx">singleSectionsNavView</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">allSectionsNavView</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="s2">&quot;80dp&quot;</span><span class="p">;</span>

    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-39"><td class="docs"><div class="pilwrap"><a href="#section-39" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>getQuestionSection</code> searches of a section that has groupType and returns the SectionObject</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>groupType </span><span class="dox_type">String</span><span>- groupType to search for</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_Object</span><span>(success) sectionObject</span></div><div class="dox_tag_detail"><span class="dox_type">null</span><span>(fail)</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">getQuestionSection</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">groupType</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">groupType</span> <span class="o">==</span> <span class="nx">groupType</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-40"><td class="docs"><div class="pilwrap"><a href="#section-40" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>validateSingleQuestionValue</code> to be called by validateEntireQuestion </p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>value </span><span class="dox_type">String</span><span>- value to be tested </span></div><div class="dox_tag_detail"><span>questionObject </span><span class="dox_type">JSON_Object</span><span>- questionObject to be validated</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_Object</span><span>updated questionObject</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">validateSingleQuestionValue</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">questionObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">returnObject</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">isValid</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">outPutMessage</span><span class="o">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">};</span>
    
    <span class="kd">var</span> <span class="nx">dataType</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
    
        <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">mandatory</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">outPutMessage</span> <span class="o">=</span> <span class="nx">L</span><span class="p">(</span><span class="s2">&quot;mandatory_error_text&quot;</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">returnObject</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

            <span class="kd">var</span> <span class="nx">conditionalMandatory</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">conditionalMandatory</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">conditionalMandatory</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">conditionalMandatory</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

                    <span class="kd">var</span> <span class="nx">testValue</span> <span class="o">=</span> <span class="nx">findQuestionsValue</span><span class="p">(</span><span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span><span class="p">);</span>

                    <span class="k">if</span> <span class="p">(</span><span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">continue</span><span class="p">;</span>
                    <span class="p">}</span>

                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">testValueIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">testValueIndex</span> <span class="o">&lt;</span> <span class="nx">testValue</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">testValueIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">testValue</span><span class="p">[</span><span class="nx">testValueIndex</span><span class="p">])</span> <span class="p">{</span>
                            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">outPutMessage</span> <span class="o">=</span> <span class="nx">L</span><span class="p">(</span><span class="s2">&quot;mandatory_error_text&quot;</span><span class="p">);;</span>
                            <span class="k">return</span> <span class="nx">returnObject</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">returnObject</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">dataType</span> <span class="o">==</span> <span class="s2">&quot;numeric&quot;</span> <span class="o">||</span> <span class="nx">dataType</span> <span class="o">==</span> <span class="s2">&quot;numericRange&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">test</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Validator</span><span class="p">.</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">test</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">outPutMessage</span> <span class="o">=</span> <span class="nx">L</span><span class="p">(</span><span class="s2">&quot;numeric_error_text&quot;</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">returnObject</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">dataType</span> <span class="o">==</span> <span class="s2">&quot;decimal&quot;</span> <span class="o">||</span> <span class="nx">dataType</span> <span class="o">==</span> <span class="s2">&quot;decimalRange&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">test</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Validator</span><span class="p">.</span><span class="nx">isDecimal</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">test</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">outPutMessage</span> <span class="o">=</span> <span class="nx">L</span><span class="p">(</span><span class="s2">&quot;decimal_error_text&quot;</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">returnObject</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">validationTest</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">returnObject</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">returnObject</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">min</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">min</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">outPutMessage</span> <span class="o">=</span> <span class="nx">L</span><span class="p">(</span><span class="s2">&quot;min_error_text&quot;</span><span class="p">)</span> <span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span>  <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">min</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">returnObject</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">max</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">max</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">outPutMessage</span> <span class="o">=</span> <span class="nx">L</span><span class="p">(</span><span class="s2">&quot;max_error_text&quot;</span><span class="p">)</span> <span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">max</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">returnObject</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">minLength</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">minLength</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">outPutMessage</span> <span class="o">=</span> <span class="nx">L</span><span class="p">(</span><span class="s2">&quot;minLength_error_text&quot;</span><span class="p">)</span> <span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span>  <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">minLength</span> <span class="o">+</span> <span class="s2">&quot; characters&quot;</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">returnObject</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>


    <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">maxLength</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">maxLength</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">outPutMessage</span> <span class="o">=</span> <span class="nx">L</span><span class="p">(</span><span class="s2">&quot;maxLength_error_text&quot;</span><span class="p">)</span> <span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span>  <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">maxLength</span> <span class="o">+</span> <span class="s2">&quot; characters&quot;</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">returnObject</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>


    <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">format</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Validator</span><span class="p">.</span><span class="nx">isValidFormat</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">returnObject</span><span class="p">.</span><span class="nx">outPutMessage</span> <span class="o">=</span> <span class="nx">L</span><span class="p">(</span><span class="s2">&quot;format_error_text&quot;</span><span class="p">)</span> <span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">format</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">returnObject</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">returnObject</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">returnObject</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-41"><td class="docs"><div class="pilwrap"><a href="#section-41" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>setQuestionError</code> sets the error message for a questionObject</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>isValid </span><span class="dox_type">boolean</span><span>- if the question is valid</span></div><div class="dox_tag_detail"><span>message </span><span class="dox_type">String</span><span>- error message to display</span></div><div class="dox_tag_detail"><span>questionObject </span><span class="dox_type">JSON_Object</span><span>- questionObject to update</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_Object</span><span>questionObject</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">setQuestionError</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">isValid</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">questionObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">isValid</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">questionObject</span><span class="p">.</span><span class="nx">errorMessageVisable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">questionObject</span><span class="p">.</span><span class="nx">questionErrorMessageView</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">height</span><span class="o">:</span> <span class="s2">&quot;30dp&quot;</span><span class="p">,</span>
            <span class="nx">top</span><span class="o">:</span> <span class="s2">&quot;5dp&quot;</span>
        <span class="p">};</span>
        <span class="nx">questionObject</span><span class="p">.</span><span class="nx">questionErrorMessage</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">text</span><span class="o">:</span> <span class="nx">message</span>
        <span class="p">};</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">questionObject</span><span class="p">.</span><span class="nx">errorMessageVisable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">questionObject</span><span class="p">.</span><span class="nx">questionErrorMessageView</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">height</span><span class="o">:</span> <span class="s2">&quot;0dp&quot;</span><span class="p">,</span>
            <span class="nx">top</span><span class="o">:</span> <span class="s2">&quot;0dp&quot;</span>
        <span class="p">};</span>
        <span class="nx">questionObject</span><span class="p">.</span><span class="nx">questionErrorMessage</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">text</span><span class="o">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">};</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-42"><td class="docs"><div class="pilwrap"><a href="#section-42" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>validateEntireQuestion</code> validate the values of a question</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionObject </span><span class="dox_type">JSON_Object</span><span>- question to update</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_Object</span><span>questionObject</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">validateEntireQuestion</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">)</span> <span class="p">{</span>
  
    <span class="kd">var</span> <span class="nx">valueList</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="nx">validateResponse</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">isValid</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">outPutMessage</span><span class="o">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">};</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">valueIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">valueIndex</span> <span class="o">&lt;</span> <span class="nx">valueList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">valueIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">validateResponse</span> <span class="o">=</span> <span class="nx">validateSingleQuestionValue</span><span class="p">(</span><span class="nx">valueList</span><span class="p">[</span><span class="nx">valueIndex</span><span class="p">],</span> <span class="nx">questionObject</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">validateResponse</span><span class="p">.</span><span class="nx">isValid</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

        <span class="nx">questionObject</span> <span class="o">=</span> <span class="nx">setQuestionError</span><span class="p">(</span><span class="nx">validateResponse</span><span class="p">.</span><span class="nx">isValid</span><span class="p">,</span> <span class="nx">validateResponse</span><span class="p">.</span><span class="nx">outPutMessage</span><span class="p">,</span> <span class="nx">questionObject</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="nx">questionObject</span> <span class="o">=</span> <span class="nx">setQuestionError</span><span class="p">(</span><span class="nx">validateResponse</span><span class="p">.</span><span class="nx">isValid</span><span class="p">,</span> <span class="nx">validateResponse</span><span class="p">.</span><span class="nx">outPutMessage</span><span class="p">,</span> <span class="nx">questionObject</span><span class="p">);</span>

    <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-43"><td class="docs"><div class="pilwrap"><a href="#section-43" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>//<code>Ti.App.addEventListener("singleViewChange)</code> listen for an event of the question renderer<br />//being changed from single to muiti section view<br />Ti.App.addEventListener("singleViewChange", function (data) {<br />    setListViewDisplayTypeToSingleSections(data.isSingleView);<br />});</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-44"><td class="docs"><div class="pilwrap"><a href="#section-44" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>moveSectionBackClick</code> the callback function for the button click to move the selected section<br />in the single section mode to the previous section</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>e </span><span class="dox_type">JSON_Object</span><span>- not used</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">moveSectionBackClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setSelectedSectionForSingleSections</span><span class="p">(</span><span class="nx">currentSingleSectionIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-45"><td class="docs"><div class="pilwrap"><a href="#section-45" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>moveSectionNextClick</code> the callback function for the button click to move the selected section<br />in the single section mode to the next section</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>e </span><span class="dox_type">JSON_Object</span><span>- not used</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">moveSectionNextClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setSelectedSectionForSingleSections</span><span class="p">(</span><span class="nx">currentSingleSectionIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-46"><td class="docs"><div class="pilwrap"><a href="#section-46" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>questionRealTimeValidation</code> called from a textFieldTemplate change event to<br />this function validates a question value and display updates the question error<br />message if thr question is not valid</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>e.questionObject </span><span class="dox_type">JSON_Object</span><span>- questionObject</span></div><div class="dox_tag_detail"><span>e.section </span><span class="dox_type">JSON_Object</span><span>- sectionObject</span></div><div class="dox_tag_detail"><span>e.questionIndex </span><span class="dox_type">int</span><span>- the index of the question in the section</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">questionRealTimeValidation</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
<span class="p">{</span>
   <span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span> <span class="o">=</span> <span class="nx">validateEntireQuestion</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">);</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">section</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">section</span><span class="p">.</span><span class="nx">updateItemAt</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">questionRealTimeValidation</span> <span class="o">=</span> <span class="nx">questionRealTimeValidation</span><span class="p">;</span></pre></div></td></tr><tr id="section-47"><td class="docs"><div class="pilwrap"><a href="#section-47" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>questionValueChange</code> called from a questionTemplate changes its value<br />the function updates the question error message if needed and removes or addes <br />questions if this question value change effets them</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>e.questionObject </span><span class="dox_type">JSON_Object</span><span>- questionObject</span></div><div class="dox_tag_detail"><span>e.section </span><span class="dox_type">Titanium.UI.ListSection</span><span>- sectionObject</span></div><div class="dox_tag_detail"><span>e.questionIndex </span><span class="dox_type">int</span><span>- the index of the question in the section</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">questionValueChange</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-48"><td class="docs"><div class="pilwrap"><a href="#section-48" class="pilcrow">&#182;</a></div><p>Blur the currently focused TF</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">try</span> <span class="p">{</span>
        <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">currentlyFocusedTF</span> <span class="o">&amp;&amp;</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">currentlyFocusedTF</span><span class="p">.</span><span class="nx">blur</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Cannot blur textfield&#39;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span><span class="s2">&quot;info&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">===</span> <span class="s2">&quot;I_ASSESSMENT_TITLE&quot;</span> <span class="o">||</span> <span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">===</span> <span class="s2">&quot;LAST_ASSESSMENT_DATE&quot;</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>

        <span class="kd">var</span> <span class="nx">questionTitleRef</span> <span class="o">=</span> <span class="nx">findQuestionsRef</span><span class="p">(</span><span class="nx">sectionList</span><span class="p">,</span> <span class="s2">&quot;0I_ASSESSMENT_TITLE&quot;</span><span class="p">,</span> <span class="s2">&quot;0Collector&quot;</span><span class="p">);</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">===</span> <span class="s2">&quot;I_ASSESSMENT_TITLE&quot;</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">questionTitleRef</span><span class="p">.</span><span class="nx">question</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">;</span>
    <span class="p">}</span>
    
        <span class="k">if</span> <span class="p">(</span><span class="nx">questionTitleRef</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      
            <span class="kd">var</span> <span class="nx">questionResponse</span> <span class="o">=</span>
                <span class="s2">&quot;&lt;ques:parameterName&gt;&quot;</span> <span class="o">+</span> <span class="nx">questionTitleRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">+</span> <span class="s2">&quot;&lt;/ques:parameterName&gt;&quot;</span> <span class="o">+</span>
                <span class="s2">&quot;&lt;ques:parameterValue&gt;&quot;</span> <span class="o">+</span> <span class="nx">questionTitleRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&lt;/ques:parameterValue&gt;&quot;</span><span class="p">;</span>

            <span class="nx">questionTitleRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">questionResponse</span> <span class="o">=</span> <span class="nx">questionResponse</span><span class="p">;</span>

            <span class="nx">questionTitleRef</span><span class="p">.</span><span class="nx">section</span><span class="p">.</span><span class="nx">updateItemAt</span><span class="p">(</span><span class="nx">questionTitleRef</span><span class="p">.</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="nx">questionTitleRef</span><span class="p">.</span><span class="nx">question</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">===</span> <span class="s2">&quot;I_ASSESSMENT_TITLE&quot;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span> <span class="o">=</span> <span class="nx">questionTitleRef</span><span class="p">.</span><span class="nx">question</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
    
    <span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">===</span> <span class="s2">&quot;I_CENSUS_TYPE&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;20&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">associatedFileName</span> <span class="o">===</span> <span class="nx">$</span><span class="p">.</span><span class="nx">censusFooterView</span><span class="p">.</span><span class="nx">getCensusAssociatedFileName</span><span class="p">()){</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">censusFooterView</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
    <span class="p">}</span>
  
    <span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span> <span class="o">=</span> <span class="nx">validateEntireQuestion</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">section</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">section</span><span class="p">.</span><span class="nx">updateItemAt</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localDataHandler</span><span class="p">.</span><span class="nx">updateQuestion</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">);</span>
    
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;questionRender questionValueChange name = &quot;</span><span class="o">+</span><span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;, question = &quot;</span><span class="o">+</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">),</span><span class="s2">&quot;info&quot;</span><span class="p">);</span>
    <span class="nx">newTestDependentQuestions</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">);</span>

    <span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">questionObject</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">questionValueChange</span> <span class="o">=</span> <span class="nx">questionValueChange</span><span class="p">;</span></pre></div></td></tr><tr id="section-49"><td class="docs"><div class="pilwrap"><a href="#section-49" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>toggleScrollLock</code> toggles if the list view is locked in place or not</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">toggleScrollLock</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">canScroll</span> <span class="o">===</span> <span class="kc">true</span><span class="p">){</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">setCanScroll</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">setCanScroll</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">toggleScrollLock</span> <span class="o">=</span> <span class="nx">toggleScrollLock</span><span class="p">;</span></pre></div></td></tr><tr id="section-50"><td class="docs"><div class="pilwrap"><a href="#section-50" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>footerTextButtonClick</code> the callback function for the button click text in the qustion renderer footer<br />opens the userNotesDialog and populates it with the saved Assessment Notes.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>e </span><span class="dox_type">JSON_Object</span><span>- not used</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">footerTextButtonClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">createController</span><span class="p">(</span><span class="s2">&quot;questionDialogs/userNotesDialog&quot;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">notes</span><span class="o">:</span> <span class="nx">currentAssessmentObject</span><span class="p">.</span><span class="nx">notes</span><span class="p">,</span>
        <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Assessment Notes&quot;</span><span class="p">,</span>
        <span class="nx">closeCallBack</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">notes</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">currentAssessmentObject</span><span class="p">.</span><span class="nx">notes</span> <span class="o">=</span> <span class="nx">notes</span><span class="p">;</span>
            <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localDataHandler</span><span class="p">.</span><span class="nx">updateSingleAssessmentIndexEntry</span><span class="p">(</span><span class="nx">currentAssessmentObject</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-51"><td class="docs"><div class="pilwrap"><a href="#section-51" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>footerNotesButtonClick</code> the callback function for the button click notes in the qustion renderer footer<br />triggers the slideNotify for the currently selected question to display the server notes</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>e </span><span class="dox_type">JSON_Object</span><span>- not used</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">footerNotesButtonClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">questionSelected</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">questionRef</span> <span class="o">=</span> <span class="nx">findQuestionsRef</span><span class="p">(</span><span class="nx">sectionList</span><span class="p">,</span> <span class="nx">questionSelected</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">questionSelected</span><span class="p">.</span><span class="nx">groupType</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">questionRef</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">slideNotify</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">alcrmNotes</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-52"><td class="docs"><div class="pilwrap"><a href="#section-52" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>footerHelpButtonClick</code> the callback function for the button click help in the qustion renderer footer<br />triggers the slideNotify for the currently selected question to display the server help message</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>e </span><span class="dox_type">JSON_Object</span><span>- not used</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">footerHelpButtonClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="nx">questionSelected</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">questionRef</span> <span class="o">=</span> <span class="nx">findQuestionsRef</span><span class="p">(</span><span class="nx">sectionList</span><span class="p">,</span> <span class="nx">questionSelected</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">questionSelected</span><span class="p">.</span><span class="nx">groupType</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">questionRef</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
          
          <span class="k">if</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">help</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">){</span>
            <span class="nx">alert</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">help</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-53"><td class="docs"><div class="pilwrap"><a href="#section-53" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>pageDeletedEvent</code> used to delete a census attached to an assessment</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>associatedFileName </span><span class="dox_type">String</span><span>- fileName to be deleted</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">pageDeletedEvent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">associatedFileName</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">associatedFileName</span> <span class="o">===</span> <span class="nx">$</span><span class="p">.</span><span class="nx">censusFooterView</span><span class="p">.</span><span class="nx">getCensusAssociatedFileName</span><span class="p">()){</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">censusFooterView</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">pageDeletedEvent</span> <span class="o">=</span> <span class="nx">pageDeletedEvent</span><span class="p">;</span></pre></div></td></tr><tr id="section-54"><td class="docs"><div class="pilwrap"><a href="#section-54" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>Ti.App.addEventListener("startCensesTimer")</code> fired when a used clicks start for the quick census<br />this will opem the census timer as a footer of the question renderer and count down based on the <br />timerDuration question value</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>e.question </span><span class="dox_type">JSON_Object</span><span>- questionObject that files the event</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span><span>true or false - depending if the timer opened or not</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">Ti</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;startCensesTimer&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">question</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">question</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">questionRef</span> <span class="o">=</span> <span class="nx">findQuestionByAssociatedFileName</span><span class="p">(</span><span class="s2">&quot;I_DURATION&quot;</span><span class="p">,</span> <span class="nx">question</span><span class="p">.</span><span class="nx">associatedFileName</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">questionRef</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span> <span class="o">=</span> <span class="nx">setQuestionError</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="nx">L</span><span class="p">(</span><span class="s2">&quot;duration_error_text&quot;</span><span class="p">),</span> <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">);</span>
            <span class="nx">questionRef</span><span class="p">.</span><span class="nx">section</span><span class="p">.</span><span class="nx">updateItemAt</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">);</span>
            <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localDataHandler</span><span class="p">.</span><span class="nx">updateQuestion</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">);</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

            <span class="kd">var</span> <span class="nx">timerDuration</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="mi">60</span><span class="p">;</span>
            <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;timerDuration = &quot;</span> <span class="o">+</span> <span class="nx">timerDuration</span> <span class="o">+</span> <span class="s2">&quot;, text = &quot;</span> <span class="o">+</span> <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s2">&quot;info&quot;</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">censusFooterView</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">timerDuration</span><span class="p">,</span> <span class="nx">question</span><span class="p">.</span><span class="nx">groupType</span><span class="p">,</span> <span class="nx">question</span><span class="p">.</span><span class="nx">associatedFileName</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span><span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="kd">var</span> <span class="nx">questionRef</span> <span class="o">=</span> <span class="nx">findQuestionByAssociatedFileName</span><span class="p">(</span><span class="s2">&quot;I_CENSUS_QUICK_START&quot;</span><span class="p">,</span> <span class="nx">question</span><span class="p">.</span><span class="nx">associatedFileName</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">questionRef</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">timeString</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">moment</span><span class="p">().</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;HH:mm&quot;</span><span class="p">);</span>
      <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">timeString</span><span class="p">;</span>
      <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">timeString</span><span class="p">;</span>
      
      <span class="kd">var</span> <span class="nx">questionResponse</span> <span class="o">=</span> 
       <span class="s2">&quot;&lt;ques:parameterName&gt;&quot;</span><span class="o">+</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterName&gt;&quot;</span><span class="o">+</span> 
       <span class="s2">&quot;&lt;ques:parameterValue&gt;&quot;</span><span class="o">+</span><span class="nx">timeString</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterValue&gt;&quot;</span><span class="o">+</span>
       <span class="s2">&quot;&lt;ques:notes&gt;&quot;</span><span class="o">+</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">notes</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:notes&gt;&quot;</span><span class="p">;</span>
    <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">questionResponse</span> <span class="o">=</span> <span class="nx">questionResponse</span><span class="p">;</span>
    
    <span class="nx">questionRef</span><span class="p">.</span><span class="nx">section</span><span class="p">.</span><span class="nx">updateItemAt</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">);</span>
        <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localDataHandler</span><span class="p">.</span><span class="nx">updateQuestion</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span><span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-55"><td class="docs"><div class="pilwrap"><a href="#section-55" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>$.censusFooterView.on("goToCensus")</code> fired when a used clicks go to census on the census timer footer<br />the list view will move to the census usage page and position the top question at the top of the screen</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>e.question </span><span class="dox_type">JSON_Object</span><span>- questionObject that files the event</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span><span>true or false - depending if the timer opened or not</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">censusFooterView</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;goToCensus&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">censusAssociatedFileName</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">section</span> <span class="o">=</span> <span class="nx">findSectionByAssociatedFileName</span><span class="p">(</span><span class="s2">&quot;CensusUsage&quot;</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">censusAssociatedFileName</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">section</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">section</span><span class="p">.</span><span class="nx">getItems</span><span class="p">().</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">moveToQuestionByName</span><span class="p">(</span><span class="nx">section</span><span class="p">.</span><span class="nx">getItems</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">name</span><span class="p">,</span> <span class="nx">section</span><span class="p">.</span><span class="nx">groupType</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">});</span></pre></div></td></tr><tr id="section-56"><td class="docs"><div class="pilwrap"><a href="#section-56" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>updateAndReturnQuestion</code> fired when a used clicks go to census on the census timer footer<br />//the list view will move to the census usage page and position the top question at the top of the screen</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>question </span><span class="dox_type">JSON_Object</span><span>- questionto be updated</span></div><div class="dox_tag_detail"><span>value </span><span class="dox_type">String</span><span>- value to be set</span></div><div class="dox_tag_detail"><span>displayValue </span><span class="dox_type">String</span><span>- value to populate the textField</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span><span>true or false - depending if the timer opened or not</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">updateAndReturnQuestion</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">question</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">displayValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">question</span><span class="p">.</span><span class="nx">template</span> <span class="o">==</span> <span class="s2">&quot;singleSelectTemplate&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">question</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">value</span><span class="o">:</span> <span class="nx">displayValue</span>
        <span class="p">};</span>
        <span class="nx">question</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">[</span><span class="nx">displayValue</span><span class="p">];</span>

        <span class="kd">var</span> <span class="nx">questionResponse</span> <span class="o">=</span>
            <span class="s2">&quot;&lt;ques:parameterName&gt;&quot;</span> <span class="o">+</span> <span class="nx">question</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">+</span> <span class="s2">&quot;&lt;/ques:parameterName&gt;&quot;</span> <span class="o">+</span>
            <span class="s2">&quot;&lt;ques:parameterValue&gt;&quot;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&lt;/ques:parameterValue&gt;&quot;</span><span class="p">;</span>

        <span class="nx">question</span><span class="p">.</span><span class="nx">questionResponse</span> <span class="o">=</span> <span class="nx">questionResponse</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">question</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-57"><td class="docs"><div class="pilwrap"><a href="#section-57" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>Ti.App.addEventListener("setEntireSectionTemplate")</code> fired when a used clicks go to census on the census timer footer<br />the list view will move to the census usage page and position the top question at the top of the screen</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>e.groupType </span><span class="dox_type">JSON_Object</span><span>- question groupType to match</span></div><div class="dox_tag_detail"><span>e.value </span><span class="dox_type">String</span><span>- value to be set</span></div><div class="dox_tag_detail"><span>e.questionToChangeTemplate </span><span class="dox_type">String</span><span>- template name to match</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">Ti</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;setEntireSectionTemplate&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">groupType</span> <span class="o">!=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">groupType</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">questionList</span> <span class="o">=</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">();</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">getItems</span><span class="p">().</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">template</span> <span class="o">==</span> <span class="nx">e</span><span class="p">.</span><span class="nx">questionToChangeTemplate</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">updatedQuestion</span> <span class="o">=</span> <span class="nx">updateAndReturnQuestion</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">],</span> <span class="nx">e</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">);</span>
                <span class="nx">sectionList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">updateItemAt</span><span class="p">(</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="nx">updatedQuestion</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">});</span></pre></div></td></tr><tr id="section-58"><td class="docs"><div class="pilwrap"><a href="#section-58" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>selectQuestion</code> updates the new question to be selected and removed the ui changes for the last selected question</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>newQuestionSelected </span><span class="dox_type">JSON_Object</span><span>- the new questionObject to select</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_Object</span><span>QuestionObject</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">selectQuestion</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">newQuestionSelected</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sectionList</span> <span class="o">=</span> <span class="nx">getAllQuestionSections</span><span class="p">();</span>


    <span class="k">if</span> <span class="p">(</span><span class="nx">questionSelected</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">questionRef</span> <span class="o">=</span> <span class="nx">findQuestionsRef</span><span class="p">(</span><span class="nx">sectionList</span><span class="p">,</span> <span class="nx">questionSelected</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">questionSelected</span><span class="p">.</span><span class="nx">groupType</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">questionRef</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">readOnly</span> <span class="o">==</span> <span class="kc">false</span><span class="p">){</span>
            
              <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">headerView</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Styles</span><span class="p">[</span><span class="s2">&quot;headerViewDefult&quot;</span><span class="p">];</span>         
              <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">selected</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
              <span class="nx">questionRef</span><span class="p">.</span><span class="nx">section</span><span class="p">.</span><span class="nx">updateItemAt</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">);</span>

              <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localDataHandler</span><span class="p">.</span><span class="nx">updateQuestion</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">);</span>
           <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="nx">questionSelected</span> <span class="o">=</span> <span class="nx">newQuestionSelected</span><span class="p">;</span>

    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;new questionSelected title = &quot;</span> <span class="o">+</span> <span class="nx">questionSelected</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="s2">&quot;info&quot;</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">questionRef</span> <span class="o">=</span> <span class="nx">findQuestionsRef</span><span class="p">(</span><span class="nx">sectionList</span><span class="p">,</span> <span class="nx">questionSelected</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">questionSelected</span><span class="p">.</span><span class="nx">groupType</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">questionRef</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">readOnly</span> <span class="o">==</span> <span class="kc">false</span><span class="p">){</span>
          <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">headerView</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Styles</span><span class="p">[</span><span class="s2">&quot;headerViewSelected&quot;</span><span class="p">];</span>
          
          <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">.</span><span class="nx">selected</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="nx">questionRef</span><span class="p">.</span><span class="nx">section</span><span class="p">.</span><span class="nx">updateItemAt</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">);</span>
          <span class="nx">newQuestionSelected</span> <span class="o">=</span> <span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">;</span>
          <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localDataHandler</span><span class="p">.</span><span class="nx">updateQuestion</span><span class="p">(</span><span class="nx">questionRef</span><span class="p">.</span><span class="nx">question</span><span class="p">);</span>
         <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">newQuestionSelected</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">selectQuestion</span> <span class="o">=</span> <span class="nx">selectQuestion</span><span class="p">;</span></pre></div></td></tr><tr id="section-59"><td class="docs"><div class="pilwrap"><a href="#section-59" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>footerPostlayout</code> callback when census timer footer has finshed it height change<br />resets the list view so there is not overlap</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>e </span><span class="dox_type">JSON_Object</span><span>- not used</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type"></span><span>n/a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">footerPostlayout</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">listView</span><span class="p">.</span><span class="nx">bottom</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">footer</span><span class="p">.</span><span class="nx">size</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
<span class="p">};</span>

</pre></div></td></tr></tbody></table><div id="generated">generated Fri Feb 14 2014 18:17:59 GMT+0000 (GMT)  </div></div></body></html>