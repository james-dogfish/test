<!DOCTYPE html><html><head><title>interpreterModule2.js</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../../index.html" class="source"><span class="file_name">README</span></a><a href="../../../app/alloy.js.html" class="source "><span class="base_path">app / </span><span class="file_name">alloy.js</span></a><a href="../../../app/assets/specs/interpreterModule/interpreterModule.js.html" class="source "><span class="base_path">app / assets / specs / interpreterModule / </span><span class="file_name">interpreterModule.js</span></a><a href="../../../app/assets/specs/LocalDataHandler/localDataHandler.js.html" class="source "><span class="base_path">app / assets / specs / LocalDataHandler / </span><span class="file_name">localDataHandler.js</span></a><a href="../../../app/assets/specs/Parser/parserSpec.js.html" class="source "><span class="base_path">app / assets / specs / Parser / </span><span class="file_name">parserSpec.js</span></a><a href="../../../app/assets/specs/ResponseGenerator/responseGenerator.js.html" class="source "><span class="base_path">app / assets / specs / ResponseGenerator / </span><span class="file_name">responseGenerator.js</span></a><a href="../../../app/assets/specs/Soap/soapSpec.js.html" class="source "><span class="base_path">app / assets / specs / Soap / </span><span class="file_name">soapSpec.js</span></a><a href="../../../app/assets/specs/User/userSpec.js.html" class="source "><span class="base_path">app / assets / specs / User / </span><span class="file_name">userSpec.js</span></a><a href="../../../app/assets/specs/Validator/validatorSpec.js.html" class="source "><span class="base_path">app / assets / specs / Validator / </span><span class="file_name">validatorSpec.js</span></a><a href="../../../app/controllers/appHelp.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">appHelp.js</span></a><a href="../../../app/controllers/censusFooterView.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">censusFooterView.js</span></a><a href="../../../app/controllers/customRiskAssessmentRows/setEntireSectionTemplate.js.html" class="source "><span class="base_path">app / controllers / customRiskAssessmentRows / </span><span class="file_name">setEntireSectionTemplate.js</span></a><a href="../../../app/controllers/customRiskAssessmentRows/subsectionHeaderTemplate.js.html" class="source "><span class="base_path">app / controllers / customRiskAssessmentRows / </span><span class="file_name">subsectionHeaderTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/censusSelect/addCensusView.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / censusSelect / </span><span class="file_name">addCensusView.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/censusSelect/selectCensusView.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / censusSelect / </span><span class="file_name">selectCensusView.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/detailRowHeaderTemplate.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">detailRowHeaderTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/detailRowQuestionTemplate.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">detailRowQuestionTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/detailRowSection.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">detailRowSection.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/goToQuestionDetailView.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">goToQuestionDetailView.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/goToQuestionMasterView.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">goToQuestionMasterView.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/goToQuestionRow.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">goToQuestionRow.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/gotoQuestionSectionWindow.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">gotoQuestionSectionWindow.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/goToSectionHeader.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">goToSectionHeader.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/masterCensusDesktopCompleteTemplate.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">masterCensusDesktopCompleteTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/masterCensusRowTemplate.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">masterCensusRowTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/masterRowTemplate.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">masterRowTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/riskAssessmentPageRowTemplate.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">riskAssessmentPageRowTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/sectionRow.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">sectionRow.js</span></a><a href="../../../app/controllers/index.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">index.js</span></a><a href="../../../app/controllers/main.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">main.js</span></a><a href="../../../app/controllers/questionDialogs/minuteHourTimePicker.js.html" class="source "><span class="base_path">app / controllers / questionDialogs / </span><span class="file_name">minuteHourTimePicker.js</span></a><a href="../../../app/controllers/questionDialogs/modalDatePicker.js.html" class="source "><span class="base_path">app / controllers / questionDialogs / </span><span class="file_name">modalDatePicker.js</span></a><a href="../../../app/controllers/questionDialogs/modalMultiPicker.js.html" class="source "><span class="base_path">app / controllers / questionDialogs / </span><span class="file_name">modalMultiPicker.js</span></a><a href="../../../app/controllers/questionDialogs/modalPicker.js.html" class="source "><span class="base_path">app / controllers / questionDialogs / </span><span class="file_name">modalPicker.js</span></a><a href="../../../app/controllers/questionDialogs/userNotesDialog.js.html" class="source "><span class="base_path">app / controllers / questionDialogs / </span><span class="file_name">userNotesDialog.js</span></a><a href="../../../app/controllers/questionRenderer.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">questionRenderer.js</span></a><a href="../../../app/controllers/questionRendererTab.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">questionRendererTab.js</span></a><a href="../../../app/controllers/questionSectionHeader.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">questionSectionHeader.js</span></a><a href="../../../app/controllers/questionSectionNavigation.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">questionSectionNavigation.js</span></a><a href="../../../app/controllers/questionTemplates/censusCounterTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">censusCounterTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/censusStartTimerTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">censusStartTimerTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/dateRangeTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">dateRangeTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/dateSelectTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">dateSelectTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/minuteHourTimeTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">minuteHourTimeTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/multiSelectTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">multiSelectTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/rangeFieldTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">rangeFieldTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/singleSelectTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">singleSelectTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/textFieldTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">textFieldTemplate.js</span></a><a href="../../../app/controllers/riskAssessments/commitMessageView.js.html" class="source "><span class="base_path">app / controllers / riskAssessments / </span><span class="file_name">commitMessageView.js</span></a><a href="../../../app/controllers/riskAssessments/riskAssessmentsWindow.js.html" class="source "><span class="base_path">app / controllers / riskAssessments / </span><span class="file_name">riskAssessmentsWindow.js</span></a><a href="../../../app/controllers/riskAssessments/riskAssessmentTableRow.js.html" class="source "><span class="base_path">app / controllers / riskAssessments / </span><span class="file_name">riskAssessmentTableRow.js</span></a><a href="../../../app/controllers/searchWindow/masterSearchTab.js.html" class="source "><span class="base_path">app / controllers / searchWindow / </span><span class="file_name">masterSearchTab.js</span></a><a href="../../../app/controllers/searchWindow/masterSearchTableRow.js.html" class="source "><span class="base_path">app / controllers / searchWindow / </span><span class="file_name">masterSearchTableRow.js</span></a><a href="../../../app/controllers/selectRouteWindow.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">selectRouteWindow.js</span></a><a href="../../../app/controllers/startup.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">startup.js</span></a><a href="../../../app/controllers/userNotificationWindows/activityIndicatorDialog.js.html" class="source "><span class="base_path">app / controllers / userNotificationWindows / </span><span class="file_name">activityIndicatorDialog.js</span></a><a href="../../../app/controllers/userSettings.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">userSettings.js</span></a><a href="../../../app/lib/core/Analytics.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">Analytics.js</span></a><a href="../../../app/lib/core/Logger.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">Logger.js</span></a><a href="../../../app/lib/core/Soap.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">Soap.js</span></a><a href="../../../app/lib/core/Soap_FAT.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">Soap_FAT.js</span></a><a href="../../../app/lib/core/Ui.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">Ui.js</span></a><a href="../../../app/lib/core/User.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">User.js</span></a><a href="../../../app/lib/core/Util.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">Util.js</span></a><a href="../../../app/lib/interpreter/interpreterModule2.js.html" class="source selected"><span class="base_path">app / lib / interpreter / </span><span class="file_name">interpreterModule2.js</span></a><a href="../../../app/lib/localDataHandler/localDataHandler.js.html" class="source "><span class="base_path">app / lib / localDataHandler / </span><span class="file_name">localDataHandler.js</span></a><a href="../../../app/lib/parser/localParser.js.html" class="source "><span class="base_path">app / lib / parser / </span><span class="file_name">localParser.js</span></a><a href="../../../app/lib/responseGenerator/responseGenerator.js.html" class="source "><span class="base_path">app / lib / responseGenerator / </span><span class="file_name">responseGenerator.js</span></a><a href="../../../app/lib/styles/styles.js.html" class="source "><span class="base_path">app / lib / styles / </span><span class="file_name">styles.js</span></a><a href="../../../app/lib/test-framework/jasmine.js.html" class="source "><span class="base_path">app / lib / test-framework / </span><span class="file_name">jasmine.js</span></a><a href="../../../app/lib/test-framework/tijasmine-console.js.html" class="source "><span class="base_path">app / lib / test-framework / </span><span class="file_name">tijasmine-console.js</span></a><a href="../../../app/lib/test-framework/tijasmine.js.html" class="source "><span class="base_path">app / lib / test-framework / </span><span class="file_name">tijasmine.js</span></a><a href="../../../app/lib/tests_runner.js.html" class="source "><span class="base_path">app / lib / </span><span class="file_name">tests_runner.js</span></a><a href="../../../app/lib/tools/fonts/FontAwesome.js.html" class="source "><span class="base_path">app / lib / tools / fonts / </span><span class="file_name">FontAwesome.js</span></a><a href="../../../app/lib/tools/fonts/IconicFont.js.html" class="source "><span class="base_path">app / lib / tools / fonts / </span><span class="file_name">IconicFont.js</span></a><a href="../../../app/lib/tools/randexp.js.html" class="source "><span class="base_path">app / lib / tools / </span><span class="file_name">randexp.js</span></a><a href="../../../app/lib/tools/ret/index.js.html" class="source "><span class="base_path">app / lib / tools / ret / </span><span class="file_name">index.js</span></a><a href="../../../app/lib/tools/ret/positions.js.html" class="source "><span class="base_path">app / lib / tools / ret / </span><span class="file_name">positions.js</span></a><a href="../../../app/lib/tools/ret/sets.js.html" class="source "><span class="base_path">app / lib / tools / ret / </span><span class="file_name">sets.js</span></a><a href="../../../app/lib/tools/ret/types.js.html" class="source "><span class="base_path">app / lib / tools / ret / </span><span class="file_name">types.js</span></a><a href="../../../app/lib/tools/ret/util.js.html" class="source "><span class="base_path">app / lib / tools / ret / </span><span class="file_name">util.js</span></a><a href="../../../app/lib/tools/Suds2_fat.js.html" class="source "><span class="base_path">app / lib / tools / </span><span class="file_name">Suds2_fat.js</span></a><a href="../../../app/lib/validator/Validator.js.html" class="source "><span class="base_path">app / lib / validator / </span><span class="file_name">Validator.js</span></a><a href="../../../app/widgets/sh.dogfi.login/controllers/widget.js.html" class="source "><span class="base_path">app / widgets / sh.dogfi.login / controllers / </span><span class="file_name">widget.js</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>interpreterModule2.js</h1><div class="filepath">app/lib/interpreter/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>interpreterModule2</code></p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">interpreterModule2</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span></pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><p><code>sectionHeaderList</code> is a list of all sections in the assessment</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><p><code>questionMap</code> used questionObject.name as a key and stores all questions.</p>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">questionMap</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><p><code>renderDependenciesMap</code> used questionObject.name as a key and stores all questions that have 
visibility dependency on the elemnent in the map.</p>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">renderDependenciesMap</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><p><code>mandatoryDependenciesMap</code> used questionObject.name as a key and stores all questions that have 
mandatory dependency on the elemnent in the map.    </p>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">mandatoryDependenciesMap</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><p><code>removedSectionsMap</code> uses the cms ConfigFile to remove sections from the dataSet. 
removedSectionsMap uses a groupType as the key, useing <code>if(groupType in removedSectionsMap)</code></p>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">removedSectionsMap</span> <span class="o">=</span> <span class="p">[];</span>
  </pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><p><code>removedQuestionsMap</code> uses the cms ConfigFile to remove questions from the dataSet. 
removedQuestionsMap uses a questionName as the key, useing <code>if(questionName in removedQuestionsMap)</code></p>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">removedQuestionsMap</span> <span class="o">=</span> <span class="p">[];</span>
  </pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><p><code>hiddenQuestionsMap</code> uses the cms ConfigFile to hide questions in question renderer. 
hiddenQuestionsMap uses a questionName as the key, useing <code>if(questionName in hiddenQuestionsMap)</code></p>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">hiddenQuestionsMap</span> <span class="o">=</span> <span class="p">[];</span>
  </pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><p><code>censusCounterQuestionMap</code> uses the cms ConfigFile to set question templates to censusCounterTemplate. 
censusCounterQuestionMap uses a questionObject.alcrmQuestionID as the key, useing <code>if(questionObject.alcrmQuestionID in censusCounterQuestionMap)</code></p>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">censusCounterQuestionMap</span> <span class="o">=</span> <span class="p">[];</span>
  </pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><p><code>timerPickerQuestionMap</code> uses the cms ConfigFile to set question templates to timerPickerTemplate. 
timerPickerQuestionMap uses a questionObject.alcrmQuestionID as the key, useing <code>if(questionObject.alcrmQuestionID in timerPickerQuestionMap)</code></p>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">timerPickerQuestionMap</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><p><code>ui_types_map</code> is used to map server question types to question templates</p>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">ui_types_map</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">ui_types_map</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;dateTemplate&quot;</span><span class="p">;</span>
  <span class="nx">ui_types_map</span><span class="p">[</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;textFieldTemplate&quot;</span><span class="p">;</span>
  <span class="nx">ui_types_map</span><span class="p">[</span><span class="s2">&quot;radio&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;singleSelectTemplate&quot;</span><span class="p">;</span>
  <span class="nx">ui_types_map</span><span class="p">[</span><span class="s2">&quot;select&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;singleSelectTemplate&quot;</span><span class="p">;</span>
  <span class="nx">ui_types_map</span><span class="p">[</span><span class="s2">&quot;alphanumeric&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;textFieldTemplate&quot;</span><span class="p">;</span>
  <span class="nx">ui_types_map</span><span class="p">[</span><span class="s2">&quot;numeric&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;textFieldTemplate&quot;</span><span class="p">;</span>
  <span class="nx">ui_types_map</span><span class="p">[</span><span class="s2">&quot;multiSelect&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;multiSelectTemplate&quot;</span><span class="p">;</span>
  <span class="nx">ui_types_map</span><span class="p">[</span><span class="s2">&quot;decimal&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;textFieldTemplate&quot;</span><span class="p">;</span>
  <span class="nx">ui_types_map</span><span class="p">[</span><span class="s2">&quot;dateRange&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;dateRangeTemplate&quot;</span><span class="p">;</span>
  <span class="nx">ui_types_map</span><span class="p">[</span><span class="s2">&quot;numericRange&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;rangeFieldTemplate&quot;</span><span class="p">;</span>
  <span class="nx">ui_types_map</span><span class="p">[</span><span class="s2">&quot;decimalRange&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;rangeFieldTemplate&quot;</span><span class="p">;</span>
  <span class="nx">ui_types_map</span><span class="p">[</span><span class="s2">&quot;alphaRange&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;rangeFieldTemplate&quot;</span><span class="p">;</span></pre></div></td></tr><tr id="section-12"><td class="docs"><div class="pilwrap"><a href="#section-12" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>getSectionDisplayName</code> depending on the page type of a section, the display name will be genrated<br />differently from the <code>firstTab</code> and <code>secondTab</code> nodes</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>question </span><span class="dox_type">JSON_obejct</span><span>- the question object from the server.</span></div><div class="dox_tag_detail"><span>passObject </span><span class="dox_type">JSON_obejct</span><span>- this is the settings object for this question set file.</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">string</span><span>question DisplayName</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">getSectionDisplayName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">question</span><span class="p">,</span> <span class="nx">passObject</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">displayName</span> <span class="o">=</span> <span class="s2">&quot;N/A&quot;</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">passObject</span><span class="p">.</span><span class="nx">pageType</span> <span class="o">==</span> <span class="s2">&quot;riskAssessment&quot;</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">question</span><span class="p">.</span><span class="nx">firstTab</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">displayName</span> <span class="o">=</span> <span class="nx">question</span><span class="p">.</span><span class="nx">firstTab</span><span class="p">;</span>

        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">question</span><span class="p">.</span><span class="nx">secondTab</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">displayName</span> <span class="o">=</span> <span class="nx">displayName</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">question</span><span class="p">.</span><span class="nx">secondTab</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">displayName</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">question</span><span class="p">.</span><span class="nx">firstTab</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">displayName</span> <span class="o">=</span> <span class="nx">question</span><span class="p">.</span><span class="nx">firstTab</span><span class="p">;</span>

      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">question</span><span class="p">.</span><span class="nx">secondTab</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">displayName</span> <span class="o">=</span> <span class="nx">question</span><span class="p">.</span><span class="nx">secondTab</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">displayName</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">logException</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception occured in getSectionDisplayName. Error Details: &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-13"><td class="docs"><div class="pilwrap"><a href="#section-13" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>createCensusDateQuestion</code> this is a new question added top the top of census general.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>passObject </span><span class="dox_type">JSON_obejct</span><span>- this is the settings object for this question set file.</span></div><div class="dox_tag_detail"><span>section </span><span class="dox_type">JSON_obejct</span><span>- secified what section to add thr question to.</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_obejct</span><span>(success) questionObject</span></div><div class="dox_tag_detail"><span class="dox_type">null</span><span>(fail) when the question fails</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">createCensusDateQuestion</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">passObject</span><span class="p">,</span> <span class="nx">section</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">questionObject</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">isAQuestion</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">template</span> <span class="o">:</span> <span class="s2">&quot;dateTemplate&quot;</span><span class="p">,</span> <span class="c1">// this is the template used to show the question in the list view</span>
        <span class="nx">type</span> <span class="o">:</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="c1">// this is the alcrem question type</span>
        <span class="nx">groupType</span> <span class="o">:</span> <span class="nx">section</span><span class="p">.</span><span class="nx">groupType</span><span class="p">,</span>
        <span class="nx">alcrmGroupType</span> <span class="o">:</span> <span class="nx">section</span><span class="p">.</span><span class="nx">alcrmGroupType</span><span class="p">,</span>
        <span class="nx">name</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="s2">&quot;I_CENSUS_DATE&quot;</span><span class="p">,</span> <span class="c1">// this is the id of the question</span>
        <span class="nx">alcrmQuestionID</span> <span class="o">:</span> <span class="s2">&quot;I_CENSUS_DATE&quot;</span><span class="p">,</span>
        <span class="nx">visable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">order</span> <span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="nx">associatedFileName</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">associatedFileName</span><span class="p">,</span> <span class="c1">// file the question is in</span>
        
        <span class="nx">btnSelect</span> <span class="o">:</span> <span class="p">{</span><span class="nx">touchTestId</span> <span class="o">:</span><span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="s2">&quot;I_CENSUS_DATE&quot;</span> <span class="o">+</span> <span class="s2">&quot;button1&quot;</span><span class="p">},</span>

        <span class="nx">assessmentId</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">assessmentId</span><span class="p">,</span>

        <span class="nx">backgroundView</span> <span class="o">:</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Styles</span><span class="p">[</span><span class="s2">&quot;normalQuestionBackground&quot;</span><span class="p">],</span>

        <span class="nx">notesBackground</span> <span class="o">:</span> <span class="p">{</span>
          <span class="nx">backgroundImage</span> <span class="o">:</span> <span class="s1">&#39;images/questionNote.png&#39;</span><span class="p">,</span>
          <span class="nx">touchTestId</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="s2">&quot;I_CENSUS_DATE&quot;</span> <span class="o">+</span> <span class="s2">&quot;_notesButton&quot;</span>
        <span class="p">},</span>
        <span class="nx">notes</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nx">alcrmNotes</span> <span class="o">:</span> <span class="s2">&quot;I_CENSUS_DATE Notes&quot;</span><span class="p">,</span>
        <span class="nx">help</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nx">selected</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">value</span> <span class="o">:</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="c1">// a list of all values set for this question</span>
        <span class="nx">renderValue</span> <span class="o">:</span> <span class="p">[],</span> <span class="c1">// a list of condtions if the question is visable</span>
        <span class="nx">selections</span> <span class="o">:</span> <span class="p">[],</span> <span class="c1">// a list of possible values for the question</span>
        <span class="nx">duration</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//used in the timerPickerQuestions template</span>
        <span class="nx">validation</span> <span class="o">:</span> <span class="p">{</span>
          <span class="nx">validationTest</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="nx">min</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="nx">max</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="nx">minLength</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="nx">maxLength</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="nx">format</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="nx">mandatory</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="nx">matchAllMandatoryRestrictions</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="nx">conditionalMandatory</span> <span class="o">:</span> <span class="p">[]</span>
        <span class="p">},</span>
        <span class="nx">mandatory</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">//can be changed at run time with conditionalMandatory</span>
        <span class="nx">subsectionTitle</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">title</span> <span class="o">:</span> <span class="p">{</span>
          <span class="nx">text</span> <span class="o">:</span> <span class="s2">&quot;Date of Census&quot;</span><span class="p">,</span>
          <span class="nx">font</span> <span class="o">:</span> <span class="p">{</span><span class="s2">&quot;fontSize&quot;</span><span class="o">:</span><span class="s2">&quot;20sp&quot;</span><span class="p">,</span><span class="s2">&quot;fontFamily&quot;</span><span class="o">:</span><span class="s2">&quot;Helvetica Neue&quot;</span><span class="p">,</span><span class="s2">&quot;fontWeight&quot;</span><span class="o">:</span><span class="s2">&quot;normal&quot;</span><span class="p">}</span>
        <span class="p">},</span> <span class="c1">// the title text for this question</span>
        <span class="nx">displayValue</span> <span class="o">:</span> <span class="p">{</span>
          <span class="nx">value</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="nx">touchTestId</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="s2">&quot;I_CENSUS_DATE&quot;</span> <span class="o">+</span> <span class="s2">&quot;displayValue1&quot;</span>
        <span class="p">},</span>
        <span class="nx">displayValue2</span> <span class="o">:</span> <span class="p">{</span>
          <span class="nx">value</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="nx">touchTestId</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="s2">&quot;I_CENSUS_DATE&quot;</span> <span class="o">+</span> <span class="s2">&quot;displayValue2&quot;</span>
        <span class="p">},</span>

        <span class="nx">questionResponse</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>

        <span class="nx">errorMessageVisable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">questionErrorMessageView</span> <span class="o">:</span> <span class="p">{},</span>
        <span class="nx">questionErrorMessage</span> <span class="o">:</span> <span class="p">{},</span>

        <span class="nx">renderDependencyList</span> <span class="o">:</span> <span class="p">[],</span>
        <span class="nx">mandatoryDependenciesList</span> <span class="o">:</span> <span class="p">[],</span>
        <span class="nx">headerView</span> <span class="o">:</span> <span class="p">{}</span>
      <span class="p">};</span>
      <span class="nx">questionObject</span> <span class="o">=</span> <span class="nx">questionSetPastVariables</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">,</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
      
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">logException</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="p">};</span></pre></div></td></tr><tr id="section-14"><td class="docs"><div class="pilwrap"><a href="#section-14" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>createQuestionObject</code> this function will build a question from the JSON from the server</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>question </span><span class="dox_type">JSON_obejct</span><span>- the server JSON object of a question</span></div><div class="dox_tag_detail"><span>passObject </span><span class="dox_type">JSON_obejct</span><span>- this is the settings object for this question set file.</span></div><div class="dox_tag_detail"><span>sectionGroupType </span><span class="dox_type">String</span></div><div class="dox_tag_detail"><span>assessmentId </span><span class="dox_type">String</span></div><div class="dox_tag_detail"><span>questionMap </span><span class="dox_type">MAP</span><span>- this is a map of question names and values for a saved pre populated question</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_obejct</span><span>(success) questionObject</span></div><div class="dox_tag_detail"><span class="dox_type">null</span><span>(fail) when the question fails to build</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">createQuestionObject</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">question</span><span class="p">,</span> <span class="nx">passObject</span><span class="p">,</span> <span class="nx">sectionGroupType</span><span class="p">,</span> <span class="nx">assessmentId</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">try</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">questionName</span> <span class="o">=</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionName</span><span class="p">(</span><span class="nx">question</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionType</span><span class="p">(</span><span class="nx">question</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">templateType</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">ui_types_map</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">templateType</span> <span class="o">=</span> <span class="nx">ui_types_map</span><span class="p">[</span><span class="nx">type</span><span class="p">];</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;questionNull type =&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="o">+</span><span class="s2">&quot;, question = &quot;</span><span class="o">+</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">question</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getRiskAnalysisOnly</span><span class="p">(</span><span class="nx">question</span><span class="p">)</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;getRiskAnalysisOnly == true, question name = &quot;</span> <span class="o">+</span> <span class="nx">questionName</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionName</span><span class="p">(</span><span class="nx">question</span><span class="p">)</span> <span class="k">in</span> <span class="nx">removedQuestionsMap</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">questionRenderValues</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="kd">var</span> <span class="nx">allRenderValues</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getRenderValue</span><span class="p">(</span><span class="nx">question</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">questionVisable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">allRenderValues</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">questionVisable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">allRenderValues</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">dependencieName</span> <span class="o">=</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getRenderValueParamName</span><span class="p">(</span><span class="nx">allRenderValues</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
        <span class="nx">dependencieValue</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getRenderValueParamValue</span><span class="p">(</span><span class="nx">allRenderValues</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">renderDependenciesMap</span><span class="p">[</span><span class="nx">dependencieName</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">renderDependenciesMap</span><span class="p">[</span><span class="nx">dependencieName</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="p">}</span>
        <span class="nx">renderDependenciesMap</span><span class="p">[</span><span class="nx">dependencieName</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">questionName</span><span class="p">);</span>

        <span class="nx">questionRenderValues</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
          <span class="nx">question</span> <span class="o">:</span> <span class="p">{</span>
            <span class="nx">name</span> <span class="o">:</span> <span class="nx">dependencieName</span><span class="p">,</span>
            <span class="nx">groupType</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span>
          <span class="p">},</span>
          <span class="nx">value</span> <span class="o">:</span> <span class="nx">dependencieValue</span>
        <span class="p">});</span>
      <span class="p">}</span>

      <span class="nx">questionSelections</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="kd">var</span> <span class="nx">allSelections</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getAllSelections</span><span class="p">(</span><span class="nx">question</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">allSelections</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">questionSelections</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
          <span class="nx">displayValue</span> <span class="o">:</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getSelectionDisplayValue</span><span class="p">(</span><span class="nx">allSelections</span><span class="p">[</span><span class="nx">i</span><span class="p">]),</span>
          <span class="nx">value</span> <span class="o">:</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getSelectionValue</span><span class="p">(</span><span class="nx">allSelections</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
        <span class="p">});</span>
      <span class="p">}</span>

      <span class="kd">var</span> <span class="nx">questionValidation</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">validationTest</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">min</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">max</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">minLength</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">maxLength</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">format</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">mandatory</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">matchAllMandatoryRestrictions</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">conditionalMandatory</span> <span class="o">:</span> <span class="p">[]</span>
      <span class="p">};</span>

      <span class="kd">var</span> <span class="nx">validation</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getValidation</span><span class="p">(</span><span class="nx">question</span><span class="p">);</span>

      <span class="kd">var</span> <span class="nx">isMandatory</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">validation</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">questionValidation</span><span class="p">.</span><span class="nx">validationTest</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">mandatory</span> <span class="o">=</span> <span class="nx">validation</span><span class="p">.</span><span class="nx">mandatory</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">mandatory</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">mandatory</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">questionValidation</span><span class="p">.</span><span class="nx">mandatory</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">isMandatory</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">conditionalMandatory</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getConditionalMandatory</span><span class="p">(</span><span class="nx">validation</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">conditionalMandatory</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

          <span class="kd">var</span> <span class="nx">dependencieName</span> <span class="o">=</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span><span class="p">;</span>
          <span class="nx">questionValidation</span><span class="p">.</span><span class="nx">conditionalMandatory</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
            <span class="nx">question</span> <span class="o">:</span> <span class="p">{</span>
              <span class="nx">name</span> <span class="o">:</span> <span class="nx">dependencieName</span><span class="p">,</span>
              <span class="nx">groupType</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span>
            <span class="p">},</span>
            <span class="nx">value</span> <span class="o">:</span> <span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">value</span>
          <span class="p">});</span>

          <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">mandatoryDependenciesMap</span><span class="p">[</span><span class="nx">dependencieName</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">mandatoryDependenciesMap</span><span class="p">[</span><span class="nx">dependencieName</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
          <span class="nx">mandatoryDependenciesMap</span><span class="p">[</span><span class="nx">dependencieName</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">questionName</span><span class="p">);</span>

        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">validation</span><span class="p">.</span><span class="nx">min</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">questionValidation</span><span class="p">.</span><span class="nx">min</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">validation</span><span class="p">.</span><span class="nx">min</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">validation</span><span class="p">.</span><span class="nx">max</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">questionValidation</span><span class="p">.</span><span class="nx">max</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">validation</span><span class="p">.</span><span class="nx">max</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">validation</span><span class="p">.</span><span class="nx">minLength</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">questionValidation</span><span class="p">.</span><span class="nx">minLength</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">validation</span><span class="p">.</span><span class="nx">minLength</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">validation</span><span class="p">.</span><span class="nx">maxLength</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">questionValidation</span><span class="p">.</span><span class="nx">maxLength</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">validation</span><span class="p">.</span><span class="nx">maxLength</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">validation</span><span class="p">.</span><span class="nx">format</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">questionValidation</span><span class="p">.</span><span class="nx">format</span> <span class="o">=</span> <span class="nx">validation</span><span class="p">.</span><span class="nx">format</span><span class="p">;</span>
        <span class="p">}</span>
        
        <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">validation</span><span class="p">.</span><span class="nx">matchAllMandatoryRestrictions</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">validation</span><span class="p">.</span><span class="nx">matchAllMandatoryRestrictions</span> <span class="o">==</span> <span class="kc">true</span> <span class="o">||</span> <span class="nx">validation</span><span class="p">.</span><span class="nx">matchAllMandatoryRestrictions</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">){</span>
            <span class="nx">questionValidation</span><span class="p">.</span><span class="nx">matchAllMandatoryRestrictions</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="kd">var</span> <span class="nx">questionObject</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">isAQuestion</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">template</span> <span class="o">:</span> <span class="nx">templateType</span><span class="p">,</span> <span class="c1">// this is the template used to show the question in the list view</span>
        <span class="nx">type</span> <span class="o">:</span> <span class="nx">type</span><span class="p">,</span>
        <span class="nx">groupType</span> <span class="o">:</span> <span class="nx">sectionGroupType</span><span class="p">,</span>
        <span class="nx">name</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionName</span><span class="p">(</span><span class="nx">question</span><span class="p">),</span>
        <span class="nx">alcrmQuestionID</span> <span class="o">:</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionName</span><span class="p">(</span><span class="nx">question</span><span class="p">),</span>
        <span class="nx">alcrmGroupType</span> <span class="o">:</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionGroup</span><span class="p">(</span><span class="nx">question</span><span class="p">),</span>
        <span class="nx">visable</span> <span class="o">:</span> <span class="nx">questionVisable</span><span class="p">,</span>
        <span class="nx">readOnly</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">backgroundView</span> <span class="o">:</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Styles</span><span class="p">[</span><span class="s2">&quot;normalQuestionBackground&quot;</span><span class="p">],</span>
        <span class="nx">order</span> <span class="o">:</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionOrder</span><span class="p">(</span><span class="nx">question</span><span class="p">),</span>
        <span class="nx">associatedFileName</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">associatedFileName</span><span class="p">,</span> <span class="c1">// file the question is in</span>
        <span class="nx">questionResponse</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        
        <span class="nx">btnSelect</span> <span class="o">:</span> <span class="p">{</span><span class="nx">touchTestId</span> <span class="o">:</span><span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionName</span><span class="p">(</span><span class="nx">question</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_button1&quot;</span><span class="p">},</span>

        <span class="nx">assessmentId</span> <span class="o">:</span> <span class="nx">assessmentId</span><span class="p">,</span>

        <span class="nx">notesBackground</span> <span class="o">:</span> <span class="p">{</span>
          <span class="nx">backgroundImage</span> <span class="o">:</span> <span class="s1">&#39;images/questionNote.png&#39;</span><span class="p">,</span>
          <span class="nx">touchTestId</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionName</span><span class="p">(</span><span class="nx">question</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_notesButton&quot;</span>
        <span class="p">},</span>
        <span class="nx">notes</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nx">alcrmNotes</span> <span class="o">:</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getNotesText</span><span class="p">(</span><span class="nx">question</span><span class="p">),</span>
        <span class="nx">help</span> <span class="o">:</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getHelpText</span><span class="p">(</span><span class="nx">question</span><span class="p">),</span>
        <span class="nx">selected</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

        <span class="nx">value</span> <span class="o">:</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="c1">// a list of all values set for this question</span>
        <span class="nx">renderValue</span> <span class="o">:</span> <span class="nx">questionRenderValues</span><span class="p">,</span> <span class="c1">// a list of condtions if the question is visable</span>
        <span class="nx">selections</span> <span class="o">:</span> <span class="nx">questionSelections</span><span class="p">,</span> <span class="c1">// a list of possible values for the question</span>
        <span class="nx">validation</span> <span class="o">:</span> <span class="nx">questionValidation</span><span class="p">,</span>
        <span class="nx">mandatory</span> <span class="o">:</span> <span class="nx">isMandatory</span><span class="p">,</span> <span class="c1">//can be changed at run time with conditionalMandatory</span>

        <span class="nx">duration</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//used in the timerPickerQuestions template</span>

        <span class="nx">subsectionTitle</span> <span class="o">:</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getTableRowText</span><span class="p">(</span><span class="nx">question</span><span class="p">),</span>

        <span class="nx">title</span> <span class="o">:</span> <span class="p">{</span>
          <span class="nx">text</span> <span class="o">:</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionText</span><span class="p">(</span><span class="nx">question</span><span class="p">),</span>
          <span class="nx">font</span> <span class="o">:</span> <span class="p">{</span><span class="s2">&quot;fontSize&quot;</span><span class="o">:</span><span class="s2">&quot;20sp&quot;</span><span class="p">,</span><span class="s2">&quot;fontFamily&quot;</span><span class="o">:</span><span class="s2">&quot;Helvetica Neue&quot;</span><span class="p">,</span><span class="s2">&quot;fontWeight&quot;</span><span class="o">:</span><span class="s2">&quot;normal&quot;</span><span class="p">}</span>
        <span class="p">},</span> <span class="c1">// the title text for this question</span>
        <span class="nx">displayValue</span> <span class="o">:</span> <span class="p">{</span>
          <span class="nx">value</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="nx">touchTestId</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionName</span><span class="p">(</span><span class="nx">question</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_displayValue1&quot;</span>
        <span class="p">},</span>
        <span class="nx">displayValue2</span> <span class="o">:</span> <span class="p">{</span>
          <span class="nx">value</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="nx">touchTestId</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionName</span><span class="p">(</span><span class="nx">question</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_displayValue2&quot;</span>
        <span class="p">},</span>

        <span class="nx">errorMessageVisable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">questionErrorMessageView</span> <span class="o">:</span> <span class="p">{},</span>
        <span class="nx">questionErrorMessage</span> <span class="o">:</span> <span class="p">{},</span>

        <span class="nx">renderDependencyList</span> <span class="o">:</span> <span class="p">[],</span>
        <span class="nx">mandatoryDependenciesList</span> <span class="o">:</span> <span class="p">[],</span>
        <span class="nx">headerView</span> <span class="o">:</span> <span class="p">{}</span>
      <span class="p">};</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">passObject</span><span class="p">.</span><span class="nx">readOnly</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">questionObject</span><span class="p">.</span><span class="nx">readOnly</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">questionObject</span><span class="p">.</span><span class="nx">headerView</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Styles</span><span class="p">[</span><span class="s2">&quot;headerViewReadOnly&quot;</span><span class="p">];</span>
      <span class="p">}</span>

      <span class="nx">questionObject</span> <span class="o">=</span> <span class="nx">questionSetPastVariables</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">,</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">);</span>

      <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">logException</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception in createQuestionObject &gt;&gt; &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-15"><td class="docs"><div class="pilwrap"><a href="#section-15" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>/<code>questionSetPastVariables</code> populates a question value with stored values from the sever</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionObject </span><span class="dox_type">JSON_obejct</span><span>- this is the genderated question object from createQuestionObject</span></div><div class="dox_tag_detail"><span>questionMap </span><span class="dox_type">Map</span><span>- this is a map of question names and values for a saved pre populated question</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_obejct</span><span>questionObject</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">questionSetPastVariables</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">,</span> <span class="nx">questionMap</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="k">in</span> <span class="nx">questionMap</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">template</span> <span class="o">===</span> <span class="s2">&quot;dateTemplate&quot;</span> <span class="o">||</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">template</span> <span class="o">===</span> <span class="s2">&quot;textFieldTemplate&quot;</span><span class="p">)</span> <span class="p">{</span>
          
          <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span><span class="p">){</span>
            <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">;</span>
          <span class="nx">questionObject</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">[</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">];</span>
          
           <span class="nx">questionObject</span><span class="p">.</span><span class="nx">questionResponse</span> <span class="o">=</span>
              <span class="s2">&quot;&lt;ques:parameterName&gt;&quot;</span><span class="o">+</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterName&gt;&quot;</span><span class="o">+</span>
              <span class="s2">&quot;&lt;ques:parameterValue&gt;&quot;</span><span class="o">+</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">value</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterValue&gt;&quot;</span><span class="p">;</span>

        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">template</span> <span class="o">===</span> <span class="s2">&quot;singleSelectTemplate&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span><span class="p">){</span>
            <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
          <span class="p">}</span>
          
          <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">;</span>
          <span class="nx">questionObject</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">[</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">];</span>
          
          <span class="nx">questionObject</span><span class="p">.</span><span class="nx">questionResponse</span> <span class="o">=</span>
              <span class="s2">&quot;&lt;ques:parameterName&gt;&quot;</span><span class="o">+</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterName&gt;&quot;</span><span class="o">+</span>
              <span class="s2">&quot;&lt;ques:parameterValue&gt;&quot;</span><span class="o">+</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterValue&gt;&quot;</span><span class="p">;</span>

          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">selections</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">selections</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">selections</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">displayValue</span><span class="p">;</span>
              
              
              <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">template</span> <span class="o">===</span> <span class="s2">&quot;multiSelectTemplate&quot;</span><span class="p">)</span> <span class="p">{</span>
          
          <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span>
             <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)){</span>
            <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
          <span class="p">}</span>
          
          <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">;</span>
          <span class="nx">questionObject</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">[</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">];</span>

          <span class="kd">var</span> <span class="nx">temp</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
                      
          <span class="kd">var</span> <span class="nx">valueResponse</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
          
            
          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">t</span> <span class="o">&lt;</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">t</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            
              <span class="nx">valueResponse</span><span class="o">+=</span><span class="s2">&quot;&lt;ques:parameterValue&gt;&quot;</span><span class="o">+</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">[</span><span class="nx">t</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterValue&gt;&quot;</span><span class="p">;</span>
          
            
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">selections</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">selections</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">[</span><span class="nx">t</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">temp</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">temp</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">selections</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">displayValue</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">temp</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">selections</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">displayValue</span><span class="p">;</span>
                <span class="p">}</span>

              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        

          <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">;</span>
          
          
          <span class="nx">questionObject</span><span class="p">.</span><span class="nx">questionResponse</span> <span class="o">=</span>
              <span class="s2">&quot;&lt;ques:parameterName&gt;&quot;</span><span class="o">+</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterName&gt;&quot;</span><span class="o">+</span><span class="nx">valueResponse</span><span class="p">;</span>
              
              
              
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">template</span> <span class="o">===</span> <span class="s2">&quot;rangeFieldTemplate&quot;</span> <span class="o">||</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">template</span> <span class="o">===</span> <span class="s2">&quot;dateRangeTemplate&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue2</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">].</span><span class="nx">value</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">logException</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception in questionSetPastVariables &gt;&gt; &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-16"><td class="docs"><div class="pilwrap"><a href="#section-16" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>addQuestionToSectionHeader</code> called by interpret, will add an object from <code>createQuestionObject()</code> to a <br />section</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>question </span><span class="dox_type">JSON_obejct</span></div><div class="dox_tag_detail"><span>passObject </span><span class="dox_type">JSON_obejct</span></div><div class="dox_tag_detail"><span>assessmentId </span><span class="dox_type">String</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">n</span><span class="dox_type">a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">addQuestionToSectionHeader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">question</span><span class="p">,</span> <span class="nx">passObject</span><span class="p">,</span> <span class="nx">assessmentId</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">alcrmGroupType</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">localParser</span><span class="p">.</span><span class="nx">getQuestionGroup</span><span class="p">(</span><span class="nx">question</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">groupType</span> <span class="o">=</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span> <span class="o">+</span> <span class="nx">alcrmGroupType</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">groupType</span> <span class="o">==</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">groupType</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">newQuestionObject</span> <span class="o">=</span> <span class="nx">createQuestionObject</span><span class="p">(</span><span class="nx">question</span><span class="p">,</span> <span class="nx">passObject</span><span class="p">,</span> <span class="nx">groupType</span><span class="p">,</span> <span class="nx">assessmentId</span><span class="p">,</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">newQuestionObject</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newQuestionObject</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="kd">var</span> <span class="nx">newSectionHeader</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">title</span> <span class="o">:</span> <span class="nx">getSectionDisplayName</span><span class="p">(</span><span class="nx">question</span><span class="p">,</span> <span class="nx">passObject</span><span class="p">),</span>
        <span class="nx">groupType</span> <span class="o">:</span> <span class="nx">groupType</span><span class="p">,</span>
        <span class="nx">alcrmGroupType</span> <span class="o">:</span> <span class="nx">alcrmGroupType</span><span class="p">,</span>
        <span class="nx">pageName</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageName</span><span class="p">,</span>
        <span class="nx">pageType</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageType</span><span class="p">,</span>
        <span class="nx">pageID</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span><span class="p">,</span>
        <span class="nx">associatedFileName</span> <span class="o">:</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">associatedFileName</span><span class="p">,</span>
        <span class="nx">questionList</span> <span class="o">:</span> <span class="p">[]</span>
      <span class="p">};</span>
      <span class="kd">var</span> <span class="nx">newQuestionObject</span> <span class="o">=</span> <span class="nx">createQuestionObject</span><span class="p">(</span><span class="nx">question</span><span class="p">,</span> <span class="nx">passObject</span><span class="p">,</span> <span class="nx">groupType</span><span class="p">,</span> <span class="nx">assessmentId</span><span class="p">,</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">newQuestionObject</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">newSectionHeader</span><span class="p">.</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newQuestionObject</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newSectionHeader</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">logException</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception in addQuestionToSectionHeader &gt;&gt; &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-17"><td class="docs"><div class="pilwrap"><a href="#section-17" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>testIfQuestionMandatory</code> called in <code>postInterpretSettings()</code> will test if a question <br />should be displayed as mandatory</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionObject </span><span class="dox_type">JSON_obejct</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_obejct</span><span>questionObject</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">testIfQuestionMandatory</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">conditionalMandatoryList</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">conditionalMandatory</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">conditionalMandatoryIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">conditionalMandatoryIndex</span> <span class="o">&lt;</span> <span class="nx">conditionalMandatoryList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">conditionalMandatoryIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">conditionalMandatoryList</span><span class="p">[</span><span class="nx">conditionalMandatoryIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">name</span> <span class="k">in</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">questionValues</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">conditionalMandatoryList</span><span class="p">[</span><span class="nx">conditionalMandatoryIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">name</span><span class="p">].</span><span class="nx">value</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionValuesIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionValuesIndex</span> <span class="o">&lt;</span> <span class="nx">questionValues</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionValuesIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">questionValues</span><span class="p">[</span><span class="nx">questionValuesIndex</span><span class="p">]</span> <span class="o">==</span> <span class="nx">conditionalMandatoryList</span><span class="p">[</span><span class="nx">conditionalMandatoryIndex</span><span class="p">].</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">mandatory</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span><span class="p">;</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Styles</span><span class="p">[</span><span class="s2">&quot;titleFontMandatory&quot;</span><span class="p">];</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-18"><td class="docs"><div class="pilwrap"><a href="#section-18" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>testIfQuestionVisable</code> called in <code>postInterpretSettings()</code> will test if a question <br />should be displayed or hidden</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionObject </span><span class="dox_type">JSON_obejct</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_obejct</span><span>questionObject</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">testIfQuestionVisable</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">renderValueIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">renderValueIndex</span> <span class="o">&lt;</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">renderValueIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">[</span><span class="nx">renderValueIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">name</span> <span class="k">in</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">questionValues</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">[</span><span class="nx">renderValueIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">name</span><span class="p">].</span><span class="nx">value</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionValuesIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionValuesIndex</span> <span class="o">&lt;</span> <span class="nx">questionValues</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionValuesIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">questionValues</span><span class="p">[</span><span class="nx">questionValuesIndex</span><span class="p">]</span> <span class="o">==</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">[</span><span class="nx">renderValueIndex</span><span class="p">].</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">visable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">questionObject</span><span class="p">;</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-19"><td class="docs"><div class="pilwrap"><a href="#section-19" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>lookQuestionDependencies</code> will build up a list for all qustions a renderDependencyList<br />and mandatoryDependenciesList. these are list of questions that are dependent on the value of the question</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">n</span><span class="dox_type">a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">lookQuestionDependencies</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

          <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">name</span><span class="p">;</span></pre></div></td></tr><tr id="section-20"><td class="docs"><div class="pilwrap"><a href="#section-20" class="pilcrow">&#182;</a></div><p>adds a list of all questions that have a Dependencies on if it is visable based on this question</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">renderDependenciesMap</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-21"><td class="docs"><div class="pilwrap"><a href="#section-21" class="pilcrow">&#182;</a></div><p>creates a list of Dependent question names with no repeated names</p>
</td><td class="code"><div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">questionNameArray</span> <span class="o">=</span> <span class="nx">renderDependenciesMap</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
            <span class="nx">questionNameArray</span> <span class="o">=</span> <span class="nx">questionNameArray</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">pos</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">questionNameArray</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="o">==</span> <span class="nx">pos</span><span class="p">;</span>
            <span class="p">});</span></pre></div></td></tr><tr id="section-22"><td class="docs"><div class="pilwrap"><a href="#section-22" class="pilcrow">&#182;</a></div><p>builds a list objects for all of the render Dependent question for this question</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">renderDependenciesQuestionList</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">questionNameArray</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">questionNameArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="k">in</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">renderDependenciesQuestionList</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                  <span class="nx">name</span> <span class="o">:</span> <span class="nx">questionNameArray</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
                  <span class="nx">groupType</span> <span class="o">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionNameArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]].</span><span class="nx">groupType</span>
                <span class="p">});</span>

              <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">renderDependencyList</span> <span class="o">=</span> <span class="nx">renderDependenciesQuestionList</span><span class="p">;</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-23"><td class="docs"><div class="pilwrap"><a href="#section-23" class="pilcrow">&#182;</a></div><p>adds a list of all questions that have a Dependencies on if it is mandatory based on this question</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">mandatoryDependenciesMap</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-24"><td class="docs"><div class="pilwrap"><a href="#section-24" class="pilcrow">&#182;</a></div><p>creates a list of Dependent question names with no repeated names</p>
</td><td class="code"><div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">questionNameArray</span> <span class="o">=</span> <span class="nx">mandatoryDependenciesMap</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
            <span class="nx">questionNameArray</span> <span class="o">=</span> <span class="nx">questionNameArray</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">pos</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">questionNameArray</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="o">==</span> <span class="nx">pos</span><span class="p">;</span>
            <span class="p">});</span></pre></div></td></tr><tr id="section-25"><td class="docs"><div class="pilwrap"><a href="#section-25" class="pilcrow">&#182;</a></div><p>builds a list objects for all of the render Dependent question for this question</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">mandatoryDependenciesQuestionList</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">questionNameArray</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">questionNameArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="k">in</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">mandatoryDependenciesQuestionList</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                  <span class="nx">name</span> <span class="o">:</span> <span class="nx">questionNameArray</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
                  <span class="nx">groupType</span> <span class="o">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionNameArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]].</span><span class="nx">groupType</span>
                <span class="p">});</span>
              <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">mandatoryDependenciesList</span> <span class="o">=</span> <span class="nx">mandatoryDependenciesQuestionList</span><span class="p">;</span>
          <span class="p">}</span>

        <span class="p">}</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">logException</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception in lookQuestionDependencies &gt;&gt; &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-26"><td class="docs"><div class="pilwrap"><a href="#section-26" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>addQuestionToSubsectionList</code> called buy <code>addSubsections</code>. adds a question to its respective subsection list.<br />is used to group questions of the same subGroup together.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>subSectionList </span><span class="dox_type">JSON_List</span></div><div class="dox_tag_detail"><span>question </span><span class="dox_type">JSON_obejct</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">List</span><span>of JSON_obejct} subSectionList</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">addQuestionToSubsectionList</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">subSectionList</span><span class="p">,</span> <span class="nx">question</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">subSectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">subSectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">title</span> <span class="o">==</span> <span class="nx">question</span><span class="p">.</span><span class="nx">subsectionTitle</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">subSectionList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">question</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">subSectionList</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">newSubsection</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">title</span> <span class="o">:</span> <span class="nx">question</span><span class="p">.</span><span class="nx">subsectionTitle</span><span class="p">,</span>
      <span class="nx">questionList</span> <span class="o">:</span> <span class="p">[],</span>
      <span class="nx">order</span> <span class="o">:</span> <span class="nx">question</span><span class="p">.</span><span class="nx">order</span>
    <span class="p">};</span>
    <span class="nx">newSubsection</span><span class="p">.</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">question</span><span class="p">);</span>
    <span class="nx">subSectionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newSubsection</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">subSectionList</span><span class="p">;</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-27"><td class="docs"><div class="pilwrap"><a href="#section-27" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>createSubsectionHeader</code> called buy <code>addSubsections</code>.  used to create a subsection header to add to the question list<br />using the template subsectionHeaderTemplate</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>title </span><span class="dox_type">String</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">JSON_obejct</span><span>subsectionHeader</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">createSubsectionHeader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">title</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">isAQuestion</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">readOnly</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">template</span> <span class="o">:</span> <span class="s2">&quot;subsectionHeaderTemplate&quot;</span><span class="p">,</span>
        <span class="nx">headerView</span> <span class="o">:</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Styles</span><span class="p">[</span><span class="s2">&quot;headerViewSubsection&quot;</span><span class="p">],</span>
        <span class="nx">title</span> <span class="o">:</span> <span class="p">{</span>
          <span class="nx">text</span> <span class="o">:</span> <span class="nx">title</span><span class="p">,</span>
          <span class="nx">font</span> <span class="o">:</span> <span class="p">{</span><span class="s2">&quot;fontSize&quot;</span><span class="o">:</span><span class="s2">&quot;20sp&quot;</span><span class="p">,</span><span class="s2">&quot;fontFamily&quot;</span><span class="o">:</span><span class="s2">&quot;Helvetica Neue&quot;</span><span class="p">,</span><span class="s2">&quot;fontWeight&quot;</span><span class="o">:</span><span class="s2">&quot;bold&quot;</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">visable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">name</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nx">questionToChangeTemplate</span> <span class="o">:</span> <span class="s2">&quot;singleSelectTemplate&quot;</span><span class="p">,</span>
        <span class="nx">selections</span> <span class="o">:</span> <span class="p">[{</span>
          <span class="nx">displayValue</span> <span class="o">:</span> <span class="s2">&quot;Yes&quot;</span><span class="p">,</span>
          <span class="nx">value</span> <span class="o">:</span> <span class="mi">1</span>
        <span class="p">},</span> <span class="p">{</span>
          <span class="nx">displayValue</span> <span class="o">:</span> <span class="s2">&quot;No&quot;</span><span class="p">,</span>
          <span class="nx">value</span> <span class="o">:</span> <span class="mi">0</span>
        <span class="p">}],</span>
        <span class="nx">renderValue</span> <span class="o">:</span> <span class="p">[]</span>
      <span class="p">};</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">logException</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception in createSubsectionHeader &gt;&gt; &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-28"><td class="docs"><div class="pilwrap"><a href="#section-28" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>addSubsectionsBackIntoQuestionList</code> called buy <code>addSubsections</code>. when all of the question in a secion have been added in to there<br />relevent subsections, this function is called to insert the questions back in to the main question list</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>questionList </span><span class="dox_type">JSON_List</span></div><div class="dox_tag_detail"><span>subSectionList </span><span class="dox_type">JSON_List</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">List</span><span>of JSON_obejct} questionList</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">addSubsectionsBackIntoQuestionList</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">questionList</span><span class="p">,</span> <span class="nx">subSectionList</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">subSectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">newQuestionList</span> <span class="o">=</span> <span class="p">[];</span>
      
      <span class="k">if</span><span class="p">(</span><span class="nx">subSectionList</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">questionList</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">subsectionTitle</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">order</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">newQuestionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">subSectionIndex</span> <span class="o">&gt;=</span> <span class="nx">subSectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span>
          <span class="nx">newQuestionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">subSectionList</span><span class="p">[</span><span class="nx">subSectionIndex</span><span class="p">].</span><span class="nx">order</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">order</span><span class="p">))</span> <span class="p">{</span>

          <span class="nx">newQuestionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">createSubsectionHeader</span><span class="p">(</span><span class="nx">subSectionList</span><span class="p">[</span><span class="nx">subSectionIndex</span><span class="p">].</span><span class="nx">title</span><span class="p">));</span></pre></div></td></tr><tr id="section-29"><td class="docs"><div class="pilwrap"><a href="#section-29" class="pilcrow">&#182;</a></div><p>subsectionHeaderTemplate</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">subSectionQuestionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">subSectionQuestionIndex</span> <span class="o">&lt;</span> <span class="nx">subSectionList</span><span class="p">[</span><span class="nx">subSectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">subSectionQuestionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">newQuestionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subSectionList</span><span class="p">[</span><span class="nx">subSectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">subSectionQuestionIndex</span><span class="p">]);</span>
          <span class="p">}</span>
          <span class="nx">subSectionIndex</span><span class="o">++</span><span class="p">;</span>
          <span class="nx">questionIndex</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span><span class="p">{</span>
          <span class="nx">newQuestionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">subSectionIndex</span><span class="p">;</span> <span class="nx">subSectionIndex</span> <span class="o">&lt;</span> <span class="nx">subSectionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">subSectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">newQuestionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">createSubsectionHeader</span><span class="p">(</span><span class="nx">subSectionList</span><span class="p">[</span><span class="nx">subSectionIndex</span><span class="p">].</span><span class="nx">title</span><span class="p">));</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">subSectionQuestionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">subSectionQuestionIndex</span> <span class="o">&lt;</span> <span class="nx">subSectionList</span><span class="p">[</span><span class="nx">subSectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">subSectionQuestionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">newQuestionList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subSectionList</span><span class="p">[</span><span class="nx">subSectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">subSectionQuestionIndex</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="nx">subSectionIndex</span><span class="o">++</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">newQuestionList</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">logException</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception in addSubsectionsBackIntoQuestionList &gt;&gt; &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">[];</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-30"><td class="docs"><div class="pilwrap"><a href="#section-30" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>addSubsections</code> loops through all sections and creates any subsections need. is the root function </p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">n</span><span class="dox_type">a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">addSubsections</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">alcrmGroupType</span> <span class="o">==</span> <span class="s2">&quot;Sighting&quot;</span><span class="p">)</span> <span class="p">{</span>

          <span class="kd">var</span> <span class="nx">subSectionList</span> <span class="o">=</span> <span class="p">[];</span>

          <span class="kd">var</span> <span class="nx">oldQuestionList</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">;</span>
          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">oldQuestionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">oldQuestionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">subsectionTitle</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">addQuestionToSubsectionList</span><span class="p">(</span><span class="nx">subSectionList</span><span class="p">,</span> <span class="nx">oldQuestionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]);</span>
            <span class="p">}</span>

          <span class="p">}</span>

          <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span> <span class="o">=</span> <span class="nx">addSubsectionsBackIntoQuestionList</span><span class="p">(</span><span class="nx">oldQuestionList</span><span class="p">,</span> <span class="nx">subSectionList</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">logException</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception in addSubsections &gt;&gt; &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-31"><td class="docs"><div class="pilwrap"><a href="#section-31" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>postInterpretSettings</code> this is called to add any hard coded effect to the question set</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>passObject </span><span class="dox_type">JSON_obejct</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">n</span><span class="dox_type">a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">postInterpretSettings</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">passObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">userPreferences</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">getPreferences</span><span class="p">();</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">alcrmGroupType</span> <span class="k">in</span> <span class="nx">removedSectionsMap</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">sectionIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
          <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="nx">sectionIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">alcrmGroupType</span> <span class="o">==</span> <span class="s2">&quot;Photograph&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">selections</span> <span class="o">=</span> <span class="p">[{</span>
              <span class="nx">displayValue</span> <span class="o">:</span> <span class="s2">&quot;YES 1&quot;</span><span class="p">,</span>
              <span class="nx">value</span> <span class="o">:</span> <span class="mi">1</span>
            <span class="p">},</span> <span class="p">{</span>
              <span class="nx">displayValue</span> <span class="o">:</span> <span class="s2">&quot;NO 1&quot;</span><span class="p">,</span>
              <span class="nx">value</span> <span class="o">:</span> <span class="mi">0</span>
            <span class="p">}];</span>
          
          <span class="k">if</span><span class="p">(</span><span class="s2">&quot;0I_UPSIDE_APPROACH&quot;</span> <span class="k">in</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">selections</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">[</span><span class="s2">&quot;0I_UPSIDE_APPROACH&quot;</span><span class="p">].</span><span class="nx">selections</span><span class="p">;</span>
          <span class="p">}</span>
          
          
          <span class="kd">var</span> <span class="nx">newRow</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">isAQuestion</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nx">readOnly</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nx">template</span> <span class="o">:</span> <span class="s2">&quot;setEntireSectionTemplate&quot;</span><span class="p">,</span>

            <span class="nx">title</span> <span class="o">:</span> <span class="p">{</span>
              <span class="nx">text</span> <span class="o">:</span> <span class="s2">&quot;Set all photograph questions to&quot;</span><span class="p">,</span>
              <span class="nx">font</span> <span class="o">:</span> <span class="p">{</span><span class="s2">&quot;fontSize&quot;</span><span class="o">:</span><span class="s2">&quot;20sp&quot;</span><span class="p">,</span><span class="s2">&quot;fontFamily&quot;</span><span class="o">:</span><span class="s2">&quot;Helvetica Neue&quot;</span><span class="p">,</span><span class="s2">&quot;fontWeight&quot;</span><span class="o">:</span><span class="s2">&quot;normal&quot;</span><span class="p">}</span>
            <span class="p">},</span>
            <span class="nx">visable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">name</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="nx">questionToChangeTemplate</span> <span class="o">:</span> <span class="s2">&quot;singleSelectTemplate&quot;</span><span class="p">,</span>
            <span class="nx">selections</span> <span class="o">:</span> <span class="nx">selections</span><span class="p">,</span>
            <span class="nx">renderValue</span> <span class="o">:</span> <span class="p">[]</span>
          <span class="p">};</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">newRow</span><span class="p">);</span></pre></div></td></tr><tr id="section-32"><td class="docs"><div class="pilwrap"><a href="#section-32" class="pilcrow">&#182;</a></div><p>adds row to front of the list</p>
</td><td class="code"><div class="highlight"><pre>        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">alcrmGroupType</span> <span class="o">==</span> <span class="s2">&quot;CensusGeneral&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">createCensusDateQuestion</span><span class="p">(</span><span class="nx">passObject</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">]));</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">questionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">questionIndex</span> <span class="o">&lt;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">questionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">splice</span><span class="p">(</span><span class="nx">questionIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nx">questionIndex</span><span class="o">--</span><span class="p">;</span>
            <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;question object is null!!!&quot;</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
          <span class="p">};</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">].</span><span class="nx">isAQuestion</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span>
            <span class="k">continue</span><span class="p">;</span>

          <span class="kd">var</span> <span class="nx">questionObject</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="k">in</span> <span class="nx">hiddenQuestionsMap</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">visable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderDependencyList</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="k">in</span> <span class="nx">censusCounterQuestionMap</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">;</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">;</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">questionResponse</span> <span class="o">=</span>
                <span class="s2">&quot;&lt;ques:parameterName&gt;&quot;</span> <span class="o">+</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">+</span> <span class="s2">&quot;&lt;/ques:parameterName&gt;&quot;</span> <span class="o">+</span>
                <span class="s2">&quot;&lt;ques:parameterValue&gt;&quot;</span> <span class="o">+</span> <span class="s2">&quot;0&quot;</span> <span class="o">+</span> <span class="s2">&quot;&lt;/ques:parameterValue&gt;&quot;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span> <span class="s2">&quot;censusCounterTemplate&quot;</span><span class="p">;</span>

          <span class="p">}</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="k">in</span> <span class="nx">timerPickerQuestionMap</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span> <span class="s2">&quot;minuteHourTimeTemplate&quot;</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;timerPicker&quot;</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="nx">timerPickerQuestionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="p">];</span>
          <span class="p">}</span>
          
          <span class="k">if</span><span class="p">(</span><span class="nx">Alloy</span><span class="p">.</span><span class="nx">CFG</span><span class="p">.</span><span class="nx">debug</span> <span class="o">==</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">==</span> <span class="s2">&quot;I_CENSUS_TYPE&quot;</span><span class="p">){</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span> <span class="s2">&quot;textFieldTemplate&quot;</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">notesBackground</span><span class="p">.</span><span class="nx">backgroundImage</span> <span class="o">=</span> <span class="s1">&#39;images/questionSelectedNote.png&#39;</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">notes</span> <span class="o">=</span> <span class="s2">&quot;full(24 hours) = 19, quick = 20, estimated(24) = 745, estimated = 21&quot;</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="nx">questionObject</span> <span class="o">=</span> <span class="nx">testIfQuestionVisable</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">);</span>
          <span class="nx">questionObject</span> <span class="o">=</span> <span class="nx">testIfQuestionMandatory</span><span class="p">(</span><span class="nx">questionObject</span><span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">mandatory</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span><span class="p">;</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">font</span><span class="p">.</span><span class="nx">fontWeight</span> <span class="o">=</span> <span class="s2">&quot;bold&quot;</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">passObject</span><span class="p">.</span><span class="nx">readOnly</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">readOnly</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">mandatory</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">clearButtonMode</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">touchEnabled</span>  <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span> <span class="s2">&quot;textFieldTemplate&quot;</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">headerView</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Styles</span><span class="p">[</span><span class="s2">&quot;headerViewReadOnly&quot;</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">font</span><span class="p">.</span><span class="nx">fontWeight</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          
          <span class="k">if</span> <span class="p">(</span><span class="nx">passObject</span><span class="p">.</span><span class="nx">pageType</span> <span class="o">==</span> <span class="s2">&quot;trainInfo&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">passObject</span><span class="p">.</span><span class="nx">pageID</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">mandatory</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">mandatory</span>  <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">conditionalMandatory</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">font</span><span class="p">.</span><span class="nx">fontWeight</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
            
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;numeric&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">keyboardType</span> <span class="o">=</span> <span class="nx">Ti</span><span class="p">.</span><span class="nx">UI</span><span class="p">.</span><span class="nx">KEYBOARD_NUMBER_PAD</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;decimal&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">isIOS7Plus</span><span class="p">()){</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">keyboardType</span> <span class="o">=</span> <span class="nx">Ti</span><span class="p">.</span><span class="nx">UI</span><span class="p">.</span><span class="nx">KEYBOARD_DECIMAL_PAD</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">keyboardType</span> <span class="o">=</span> <span class="nx">Ti</span><span class="p">.</span><span class="nx">UI</span><span class="p">.</span><span class="nx">KEYBOARD_NUMBER_PAD</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">Ti</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">deployType</span> <span class="o">===</span> <span class="s1">&#39;test&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">==</span> <span class="s2">&quot;I_CENSUS_TYPE&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span> <span class="s2">&quot;textFieldTemplate&quot;</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">==</span> <span class="s2">&quot;I_COLLECTOR_NAME&quot;</span><span class="p">)</span> <span class="p">{</span> 
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">[</span><span class="nx">userPreferences</span><span class="p">.</span><span class="nx">name</span><span class="p">];</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">mandatory</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">value</span> <span class="o">:</span> <span class="nx">userPreferences</span><span class="p">.</span><span class="nx">name</span>
            <span class="p">};</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">questionResponse</span> <span class="o">=</span>
                <span class="s2">&quot;&lt;ques:parameterName&gt;&quot;</span><span class="o">+</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterName&gt;&quot;</span><span class="o">+</span>
                <span class="s2">&quot;&lt;ques:parameterValue&gt;&quot;</span><span class="o">+</span><span class="nx">userPreferences</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterValue&gt;&quot;</span><span class="p">;</span>
                
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">==</span> <span class="s2">&quot;PHONE_NUMBER&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">[</span><span class="nx">userPreferences</span><span class="p">.</span><span class="nx">mobile</span><span class="p">];</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">mandatory</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">value</span> <span class="o">:</span> <span class="nx">userPreferences</span><span class="p">.</span><span class="nx">mobile</span>
            <span class="p">};</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">questionResponse</span> <span class="o">=</span>
                <span class="s2">&quot;&lt;ques:parameterName&gt;&quot;</span><span class="o">+</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterName&gt;&quot;</span><span class="o">+</span>
                <span class="s2">&quot;&lt;ques:parameterValue&gt;&quot;</span><span class="o">+</span><span class="nx">userPreferences</span><span class="p">.</span><span class="nx">mobile</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterValue&gt;&quot;</span><span class="p">;</span>
                
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">==</span> <span class="s2">&quot;EMAIL_ADDRESS&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">[</span><span class="nx">userPreferences</span><span class="p">.</span><span class="nx">email</span><span class="p">];</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">mandatory</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">value</span> <span class="o">:</span> <span class="nx">userPreferences</span><span class="p">.</span><span class="nx">email</span>
            <span class="p">};</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">questionResponse</span> <span class="o">=</span>
                <span class="s2">&quot;&lt;ques:parameterName&gt;&quot;</span><span class="o">+</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterName&gt;&quot;</span><span class="o">+</span>
                <span class="s2">&quot;&lt;ques:parameterValue&gt;&quot;</span><span class="o">+</span><span class="nx">userPreferences</span><span class="p">.</span><span class="nx">email</span><span class="o">+</span><span class="s2">&quot;&lt;/ques:parameterValue&gt;&quot;</span><span class="p">;</span>
                
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">alcrmQuestionID</span> <span class="o">==</span> <span class="s2">&quot;I_CENSUS_QUICK_START&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">questionObject</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span> <span class="s2">&quot;censusStartTimerTemplate&quot;</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">renderValueIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">renderValueIndex</span> <span class="o">&lt;</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">renderValueIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">[</span><span class="nx">renderValueIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">name</span> <span class="k">in</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">[</span><span class="nx">renderValueIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">groupType</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">[</span><span class="nx">renderValueIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">name</span><span class="p">].</span><span class="nx">groupType</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;interpreterModule2 :: NOT FOUND = &quot;</span> <span class="o">+</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">[</span><span class="nx">renderValueIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">conditionalMandatoryIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">conditionalMandatoryIndex</span> <span class="o">&lt;</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">conditionalMandatory</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">conditionalMandatoryIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">conditionalMandatoryIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">name</span> <span class="k">in</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">)</span> <span class="p">{</span>

              <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">conditionalMandatoryIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">groupType</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span><span class="p">[</span><span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">conditionalMandatoryIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">name</span><span class="p">].</span><span class="nx">groupType</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;interpreterModule2 :: NOT FOUND = &quot;</span> <span class="o">+</span> <span class="nx">questionObject</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">conditionalMandatory</span><span class="p">[</span><span class="nx">conditionalMandatoryIndex</span><span class="p">].</span><span class="nx">question</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>


          <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">[</span><span class="nx">questionIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">questionObject</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="nx">addSubsections</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">logException</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception in postInterpretSettings &gt;&gt; &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-33"><td class="docs"><div class="pilwrap"><a href="#section-33" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>sortQuestionsByOrder</code> sorts all questions based on the question order property</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">n</span><span class="dox_type">a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">sortQuestionsByOrder</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span></pre></div></td></tr><tr id="section-34"><td class="docs"><div class="pilwrap"><a href="#section-34" class="pilcrow">&#182;</a></div><p>sort the question by order within each section</p>
</td><td class="code"><div class="highlight"><pre>      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">sectionIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">sectionIndex</span> <span class="o">&lt;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">sectionIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">[</span><span class="nx">sectionIndex</span><span class="p">].</span><span class="nx">questionList</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">order</span><span class="p">)</span> <span class="o">-</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">order</span><span class="p">);</span>
        <span class="p">});</span>
      <span class="p">}</span></pre></div></td></tr><tr id="section-35"><td class="docs"><div class="pilwrap"><a href="#section-35" class="pilcrow">&#182;</a></div><p>sort the sections by order of the first question in the section</p>
</td><td class="code"><div class="highlight"><pre>      <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">questionList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">order</span><span class="p">)</span> <span class="o">-</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">questionList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">order</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">logException</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Exception in sortQuestionsByOrder &gt;&gt; &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-36"><td class="docs"><div class="pilwrap"><a href="#section-36" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><code>readAppconfig</code> using the cms settings from the server or the local settings in appcofig.json<br />add changes to map variables to be used latter.</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">n</span><span class="dox_type">a</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">readAppconfig</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">removedSections</span> <span class="o">=</span> <span class="nx">Ti</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="s2">&quot;removedSections&quot;</span><span class="p">,</span> <span class="p">[]);</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;removedSections = &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">removedSections</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
    <span class="nx">removedSectionsMap</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">removedSections</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">removedSectionsMap</span><span class="p">[</span><span class="nx">removedSections</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">removedQuestions</span> <span class="o">=</span> <span class="nx">Ti</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="s2">&quot;removedQuestions&quot;</span><span class="p">,</span> <span class="p">[]);</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;removedQuestions = &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">removedQuestions</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
    <span class="nx">removedQuestionsMap</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">removedQuestions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">removedQuestionsMap</span><span class="p">[</span><span class="nx">removedQuestions</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">hiddenQuestions</span> <span class="o">=</span> <span class="nx">Ti</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="s2">&quot;hiddenQuestions&quot;</span><span class="p">,</span> <span class="p">[]);</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;hiddenQuestions = &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">hiddenQuestions</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
    <span class="nx">hiddenQuestionsMap</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">hiddenQuestions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">hiddenQuestionsMap</span><span class="p">[</span><span class="nx">hiddenQuestions</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">censusCounterQuestions</span> <span class="o">=</span> <span class="nx">Ti</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="s2">&quot;censusCounterQuestions&quot;</span><span class="p">,</span> <span class="p">[]);</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;censusCounterQuestions = &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">censusCounterQuestions</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
    <span class="nx">censusCounterQuestionMap</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">censusCounterQuestions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">censusCounterQuestionMap</span><span class="p">[</span><span class="nx">censusCounterQuestions</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">timerPickerQuestions</span> <span class="o">=</span> <span class="nx">Ti</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="s2">&quot;timerPickerQuestions&quot;</span><span class="p">,</span> <span class="p">[]);</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;timerPickerQuestions = &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">timerPickerQuestions</span><span class="p">),</span> <span class="s2">&quot;info&quot;</span><span class="p">);</span>
    <span class="nx">timerPickerQuestionMap</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">timerPickerQuestions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">timerPickerQuestionMap</span><span class="p">[</span><span class="nx">timerPickerQuestions</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">timerPickerQuestions</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">duration</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="p">};</span></pre></div></td></tr><tr id="section-37"><td class="docs"><div class="pilwrap"><a href="#section-37" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>/<code>interpret</code> the rooot function to call to translate the question set from the server in to a workable<br />question set for questionRender</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>allQuestions </span><span class="dox_type">JSON_List</span><span>- this is the Json question data set from the server</span></div><div class="dox_tag_detail"><span>passObject </span><span class="dox_type">JSON_obejct</span><span>- this is the settings object for this question set file.</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">List</span><span>of JSON_obejct} questionList</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">self</span><span class="p">.</span><span class="nx">interpret</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">allQuestions</span><span class="p">,</span> <span class="nx">passObject</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="nx">readAppconfig</span><span class="p">();</span>

      <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">questionMap</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">renderDependenciesMap</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">mandatoryDependenciesMap</span> <span class="o">=</span> <span class="p">[];</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">allQuestions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">addQuestionToSectionHeader</span><span class="p">(</span><span class="nx">allQuestions</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">passObject</span><span class="p">,</span> <span class="nx">passObject</span><span class="p">.</span><span class="nx">assessmentId</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">lookQuestionDependencies</span><span class="p">();</span>
      <span class="nx">sortQuestionsByOrder</span><span class="p">();</span>
      <span class="nx">postInterpretSettings</span><span class="p">(</span><span class="nx">passObject</span><span class="p">);</span>

      <span class="nx">renderDependenciesMap</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">questionMap</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">questionMap</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">mandatoryDependenciesMap</span> <span class="o">=</span> <span class="p">[];</span>

      <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">sectionHeaderList</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">logException</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">aIndicator</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Interpreter.interpret has an exception: &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span> <span class="s2">&quot;error&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">[];</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">interpreterModule2</span><span class="p">;</span> 

</pre></div></td></tr></tbody></table><div id="generated">generated Mon Mar 24 2014 19:50:05 GMT+0000 (GMT)  </div></div></body></html>