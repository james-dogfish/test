<!DOCTYPE html><html><head><title>jasmine.js</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../../index.html" class="source"><span class="file_name">README</span></a><a href="../../../app/alloy.js.html" class="source "><span class="base_path">app / </span><span class="file_name">alloy.js</span></a><a href="../../../app/assets/specs/interpreterModule/interpreterModule.js.html" class="source "><span class="base_path">app / assets / specs / interpreterModule / </span><span class="file_name">interpreterModule.js</span></a><a href="../../../app/assets/specs/LocalDataHandler/localDataHandler.js.html" class="source "><span class="base_path">app / assets / specs / LocalDataHandler / </span><span class="file_name">localDataHandler.js</span></a><a href="../../../app/assets/specs/Parser/parserSpec.js.html" class="source "><span class="base_path">app / assets / specs / Parser / </span><span class="file_name">parserSpec.js</span></a><a href="../../../app/assets/specs/ResponseGenerator/responseGenerator.js.html" class="source "><span class="base_path">app / assets / specs / ResponseGenerator / </span><span class="file_name">responseGenerator.js</span></a><a href="../../../app/assets/specs/Soap/soapSpec.js.html" class="source "><span class="base_path">app / assets / specs / Soap / </span><span class="file_name">soapSpec.js</span></a><a href="../../../app/assets/specs/User/userSpec.js.html" class="source "><span class="base_path">app / assets / specs / User / </span><span class="file_name">userSpec.js</span></a><a href="../../../app/assets/specs/Validator/validatorSpec.js.html" class="source "><span class="base_path">app / assets / specs / Validator / </span><span class="file_name">validatorSpec.js</span></a><a href="../../../app/controllers/appHelp.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">appHelp.js</span></a><a href="../../../app/controllers/censusFooterView.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">censusFooterView.js</span></a><a href="../../../app/controllers/customRiskAssessmentRows/setEntireSectionTemplate.js.html" class="source "><span class="base_path">app / controllers / customRiskAssessmentRows / </span><span class="file_name">setEntireSectionTemplate.js</span></a><a href="../../../app/controllers/customRiskAssessmentRows/subsectionHeaderTemplate.js.html" class="source "><span class="base_path">app / controllers / customRiskAssessmentRows / </span><span class="file_name">subsectionHeaderTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/censusSelect/addCensusView.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / censusSelect / </span><span class="file_name">addCensusView.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/censusSelect/selectCensusView.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / censusSelect / </span><span class="file_name">selectCensusView.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/detailRowHeaderTemplate.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">detailRowHeaderTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/detailRowQuestionTemplate.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">detailRowQuestionTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/detailRowSection.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">detailRowSection.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/goToQuestionDetailView.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">goToQuestionDetailView.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/goToQuestionMasterView.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">goToQuestionMasterView.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/goToQuestionRow.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">goToQuestionRow.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/gotoQuestionSectionWindow.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">gotoQuestionSectionWindow.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/goToSectionHeader.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">goToSectionHeader.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/masterCensusDesktopCompleteTemplate.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">masterCensusDesktopCompleteTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/masterCensusRowTemplate.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">masterCensusRowTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/masterRowTemplate.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">masterRowTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/riskAssessmentPageRowTemplate.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">riskAssessmentPageRowTemplate.js</span></a><a href="../../../app/controllers/gotoQuestionSectionWindow/sectionRow.js.html" class="source "><span class="base_path">app / controllers / gotoQuestionSectionWindow / </span><span class="file_name">sectionRow.js</span></a><a href="../../../app/controllers/index.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">index.js</span></a><a href="../../../app/controllers/main.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">main.js</span></a><a href="../../../app/controllers/questionDialogs/minuteHourTimePicker.js.html" class="source "><span class="base_path">app / controllers / questionDialogs / </span><span class="file_name">minuteHourTimePicker.js</span></a><a href="../../../app/controllers/questionDialogs/modalDatePicker.js.html" class="source "><span class="base_path">app / controllers / questionDialogs / </span><span class="file_name">modalDatePicker.js</span></a><a href="../../../app/controllers/questionDialogs/modalMultiPicker.js.html" class="source "><span class="base_path">app / controllers / questionDialogs / </span><span class="file_name">modalMultiPicker.js</span></a><a href="../../../app/controllers/questionDialogs/modalPicker.js.html" class="source "><span class="base_path">app / controllers / questionDialogs / </span><span class="file_name">modalPicker.js</span></a><a href="../../../app/controllers/questionDialogs/userNotesDialog.js.html" class="source "><span class="base_path">app / controllers / questionDialogs / </span><span class="file_name">userNotesDialog.js</span></a><a href="../../../app/controllers/questionRenderer.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">questionRenderer.js</span></a><a href="../../../app/controllers/questionRendererTab.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">questionRendererTab.js</span></a><a href="../../../app/controllers/questionSectionHeader.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">questionSectionHeader.js</span></a><a href="../../../app/controllers/questionSectionNavigation.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">questionSectionNavigation.js</span></a><a href="../../../app/controllers/questionTemplates/censusCounterTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">censusCounterTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/censusStartTimerTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">censusStartTimerTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/dateRangeTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">dateRangeTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/dateSelectTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">dateSelectTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/minuteHourTimeTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">minuteHourTimeTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/multiSelectTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">multiSelectTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/rangeFieldTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">rangeFieldTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/singleSelectTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">singleSelectTemplate.js</span></a><a href="../../../app/controllers/questionTemplates/textFieldTemplate.js.html" class="source "><span class="base_path">app / controllers / questionTemplates / </span><span class="file_name">textFieldTemplate.js</span></a><a href="../../../app/controllers/riskAssessments/commitMessageView.js.html" class="source "><span class="base_path">app / controllers / riskAssessments / </span><span class="file_name">commitMessageView.js</span></a><a href="../../../app/controllers/riskAssessments/riskAssessmentsWindow.js.html" class="source "><span class="base_path">app / controllers / riskAssessments / </span><span class="file_name">riskAssessmentsWindow.js</span></a><a href="../../../app/controllers/riskAssessments/riskAssessmentTableRow.js.html" class="source "><span class="base_path">app / controllers / riskAssessments / </span><span class="file_name">riskAssessmentTableRow.js</span></a><a href="../../../app/controllers/searchWindow/masterSearchTab.js.html" class="source "><span class="base_path">app / controllers / searchWindow / </span><span class="file_name">masterSearchTab.js</span></a><a href="../../../app/controllers/searchWindow/masterSearchTableRow.js.html" class="source "><span class="base_path">app / controllers / searchWindow / </span><span class="file_name">masterSearchTableRow.js</span></a><a href="../../../app/controllers/selectRouteWindow.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">selectRouteWindow.js</span></a><a href="../../../app/controllers/startup.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">startup.js</span></a><a href="../../../app/controllers/userNotificationWindows/activityIndicatorDialog.js.html" class="source "><span class="base_path">app / controllers / userNotificationWindows / </span><span class="file_name">activityIndicatorDialog.js</span></a><a href="../../../app/controllers/userSettings.js.html" class="source "><span class="base_path">app / controllers / </span><span class="file_name">userSettings.js</span></a><a href="../../../app/lib/core/Analytics.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">Analytics.js</span></a><a href="../../../app/lib/core/Logger.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">Logger.js</span></a><a href="../../../app/lib/core/Soap.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">Soap.js</span></a><a href="../../../app/lib/core/Soap_FAT.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">Soap_FAT.js</span></a><a href="../../../app/lib/core/Ui.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">Ui.js</span></a><a href="../../../app/lib/core/User.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">User.js</span></a><a href="../../../app/lib/core/Util.js.html" class="source "><span class="base_path">app / lib / core / </span><span class="file_name">Util.js</span></a><a href="../../../app/lib/interpreter/interpreterModule2.js.html" class="source "><span class="base_path">app / lib / interpreter / </span><span class="file_name">interpreterModule2.js</span></a><a href="../../../app/lib/localDataHandler/localDataHandler.js.html" class="source "><span class="base_path">app / lib / localDataHandler / </span><span class="file_name">localDataHandler.js</span></a><a href="../../../app/lib/parser/localParser.js.html" class="source "><span class="base_path">app / lib / parser / </span><span class="file_name">localParser.js</span></a><a href="../../../app/lib/responseGenerator/responseGenerator.js.html" class="source "><span class="base_path">app / lib / responseGenerator / </span><span class="file_name">responseGenerator.js</span></a><a href="../../../app/lib/styles/styles.js.html" class="source "><span class="base_path">app / lib / styles / </span><span class="file_name">styles.js</span></a><a href="../../../app/lib/test-framework/jasmine.js.html" class="source selected"><span class="base_path">app / lib / test-framework / </span><span class="file_name">jasmine.js</span></a><a href="../../../app/lib/test-framework/tijasmine-console.js.html" class="source "><span class="base_path">app / lib / test-framework / </span><span class="file_name">tijasmine-console.js</span></a><a href="../../../app/lib/test-framework/tijasmine.js.html" class="source "><span class="base_path">app / lib / test-framework / </span><span class="file_name">tijasmine.js</span></a><a href="../../../app/lib/tests_runner.js.html" class="source "><span class="base_path">app / lib / </span><span class="file_name">tests_runner.js</span></a><a href="../../../app/lib/tools/fonts/FontAwesome.js.html" class="source "><span class="base_path">app / lib / tools / fonts / </span><span class="file_name">FontAwesome.js</span></a><a href="../../../app/lib/tools/fonts/IconicFont.js.html" class="source "><span class="base_path">app / lib / tools / fonts / </span><span class="file_name">IconicFont.js</span></a><a href="../../../app/lib/tools/randexp.js.html" class="source "><span class="base_path">app / lib / tools / </span><span class="file_name">randexp.js</span></a><a href="../../../app/lib/tools/ret/index.js.html" class="source "><span class="base_path">app / lib / tools / ret / </span><span class="file_name">index.js</span></a><a href="../../../app/lib/tools/ret/positions.js.html" class="source "><span class="base_path">app / lib / tools / ret / </span><span class="file_name">positions.js</span></a><a href="../../../app/lib/tools/ret/sets.js.html" class="source "><span class="base_path">app / lib / tools / ret / </span><span class="file_name">sets.js</span></a><a href="../../../app/lib/tools/ret/types.js.html" class="source "><span class="base_path">app / lib / tools / ret / </span><span class="file_name">types.js</span></a><a href="../../../app/lib/tools/ret/util.js.html" class="source "><span class="base_path">app / lib / tools / ret / </span><span class="file_name">util.js</span></a><a href="../../../app/lib/tools/Suds2_fat.js.html" class="source "><span class="base_path">app / lib / tools / </span><span class="file_name">Suds2_fat.js</span></a><a href="../../../app/lib/validator/Validator.js.html" class="source "><span class="base_path">app / lib / validator / </span><span class="file_name">Validator.js</span></a><a href="../../../app/widgets/sh.dogfi.login/controllers/widget.js.html" class="source "><span class="base_path">app / widgets / sh.dogfi.login / controllers / </span><span class="file_name">widget.js</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>jasmine.js</h1><div class="filepath">app/lib/test-framework/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">isCommonJS</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nb">window</span> <span class="o">==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">exports</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span><span class="p">;</span></pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Top level namespace for Jasmine, a lightweight JavaScript BDD/spec/testing framework.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">jasmine</span> <span class="o">=</span> <span class="p">{};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isCommonJS</span><span class="p">)</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">jasmine</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">;</span></pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@private</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">unimplementedMethod_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;unimplemented method&quot;</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Use <code>jasmine.undefined</code> instead of <code>undefined</code>, since <code>undefined</code> is just<br />a plain old variable and may be redefined by somebody else.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">___undefined___</span><span class="p">;</span></pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Show diagnostic messages in the console if set to true</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">VERBOSE</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Default interval in milliseconds for event loop yields (e.g. to allow network activity or to refresh the screen with the HTML-based runner). Small values here may result in slow test running. Zero means no updates until all tests have completed.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">DEFAULT_UPDATE_INTERVAL</span> <span class="o">=</span> <span class="mi">250</span><span class="p">;</span></pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Maximum levels of nesting that will be included when an object is pretty-printed</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">MAX_PRETTY_PRINT_DEPTH</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span></pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Default timeout interval in milliseconds for waitsFor() blocks.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">DEFAULT_TIMEOUT_INTERVAL</span> <span class="o">=</span> <span class="mi">5000</span><span class="p">;</span></pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>By default exceptions thrown in the context of a test are caught by jasmine so that it can run the remaining tests in the suite.<br />Set to false to let the exception bubble up in the browser.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">CATCH_EXCEPTIONS</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nx">getGlobal</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">getGlobal</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Allows for bound functions to be compared.  Internal use only.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">base</span><span>- bound 'this' for the function
</span></div><div class="dox_tag_detail"><span>{Function} </span><span class="dox_type">name</span><span>- function to find</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">bindOriginal_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">base</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">original</span> <span class="o">=</span> <span class="nx">base</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">original</span><span class="p">.</span><span class="nx">apply</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">original</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">base</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><p>IE support</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">()[</span><span class="nx">name</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">setTimeout</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">bindOriginal_</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">(),</span> <span class="s1">&#39;setTimeout&#39;</span><span class="p">);</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">clearTimeout</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">bindOriginal_</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">(),</span> <span class="s1">&#39;clearTimeout&#39;</span><span class="p">);</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">setInterval</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">bindOriginal_</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">(),</span> <span class="s1">&#39;setInterval&#39;</span><span class="p">);</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">clearInterval</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">bindOriginal_</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">(),</span> <span class="s1">&#39;clearInterval&#39;</span><span class="p">);</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">MessageResult</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;log&#39;</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">values</span> <span class="o">=</span> <span class="nx">values</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">trace</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span> <span class="c1">// todo: test better</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">MessageResult</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">text</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isString_</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="p">{</span>
      <span class="nx">text</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">text</span> <span class="o">+=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">text</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">ExpectationResult</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;expect&#39;</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">matcherName</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">matcherName</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">passed_</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">passed</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">expected</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">expected</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">actual</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">actual</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">passed_</span> <span class="o">?</span> <span class="s1">&#39;Passed.&#39;</span> <span class="o">:</span> <span class="nx">params</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">trace</span> <span class="o">=</span> <span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">trace</span> <span class="o">||</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">));</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">trace</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">passed_</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span> <span class="o">:</span> <span class="nx">trace</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">ExpectationResult</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">ExpectationResult</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">passed</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">passed_</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-12"><td class="docs"><div class="pilwrap"><a href="#section-12" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Getter for the Jasmine environment. Ensures one gets created</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">env</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">currentEnv_</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">currentEnv_</span> <span class="o">||</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">();</span>
  <span class="k">return</span> <span class="nx">env</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-13"><td class="docs"><div class="pilwrap"><a href="#section-13" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@ignore</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">value
</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isArray_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">isA_</span><span class="p">(</span><span class="s2">&quot;Array&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-14"><td class="docs"><div class="pilwrap"><a href="#section-14" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@ignore</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">value
</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isString_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">isA_</span><span class="p">(</span><span class="s2">&quot;String&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-15"><td class="docs"><div class="pilwrap"><a href="#section-15" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@ignore</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">value
</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isNumber_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">isA_</span><span class="p">(</span><span class="s2">&quot;Number&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-16"><td class="docs"><div class="pilwrap"><a href="#section-16" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@ignore</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>typeName
 </span><span class="dox_type">String</span></div><div class="dox_tag_detail"><span> </span><span class="dox_type">value
</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isA_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">typeName</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;[object &#39;</span> <span class="o">+</span> <span class="nx">typeName</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-17"><td class="docs"><div class="pilwrap"><a href="#section-17" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Pretty printer for expecations.  Takes any object and turns it into a human-readable string.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">value</span><span>- an object to be outputted
</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">stringPrettyPrinter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">StringPrettyPrinter</span><span class="p">();</span>
  <span class="nx">stringPrettyPrinter</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">stringPrettyPrinter</span><span class="p">.</span><span class="nx">string</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-18"><td class="docs"><div class="pilwrap"><a href="#section-18" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Returns true if the object is a DOM Node.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>obj </span><span class="dox_type">Object</span><span>- object to check
</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isDomNode</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-19"><td class="docs"><div class="pilwrap"><a href="#section-19" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Returns a matchable 'generic' object of the class type.  For use in expecations of type when values don't matter.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>clazz
 </span><span class="dox_type">Class</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">any</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">clazz</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">Any</span><span class="p">(</span><span class="nx">clazz</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-20"><td class="docs"><div class="pilwrap"><a href="#section-20" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Returns a matchable subset of a JSON object. For use in expectations when you don't care about all of the<br />attributes on the object.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">sample</span><span>- sample
</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">objectContaining</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">sample</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">ObjectContaining</span><span class="p">(</span><span class="nx">sample</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-21"><td class="docs"><div class="pilwrap"><a href="#section-21" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Jasmine Spies are test doubles that can act as stubs, spies, fakes or when used in an expecation, mocks.</p>

<p>Spies should be created in test setup, before expectations.  They can then be checked, using the standard Jasmine<br />expectation syntax. Spies can be checked if they were called or not and what the calling params were.</p>

<p>A Spy has the following fields: wasCalled, callCount, mostRecentCall, and argsForCall (see docs).</p>

<p>Spies are torn down at the end of every spec.</p>

<p>Note: Do <b>not</b> call new jasmine.Spy() directly - a spy must be created using spyOn, jasmine.createSpy or jasmine.createSpyObj.</p></div><div class="details"><div class="dox_tag_title">See</div><div class="dox_tag_detail"><span class="dox_type">spyOn, jasmine.createSpy, jasmine.createSpyObj
</span></div><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>name </span><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-22"><td class="docs"><div class="pilwrap"><a href="#section-22" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The name of the spy, if provided.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">||</span> <span class="s1">&#39;unknown&#39;</span><span class="p">;</span></pre></div></td></tr><tr id="section-23"><td class="docs"><div class="pilwrap"><a href="#section-23" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Is this Object a spy?</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">isSpy</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-24"><td class="docs"><div class="pilwrap"><a href="#section-24" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The actual function this spy stubs.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">plan</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">};</span></pre></div></td></tr><tr id="section-25"><td class="docs"><div class="pilwrap"><a href="#section-25" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Tracking of the most recent call to the spy.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">mostRecentCall</span> <span class="o">=</span> <span class="p">{};</span></pre></div></td></tr><tr id="section-26"><td class="docs"><div class="pilwrap"><a href="#section-26" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Holds arguments for each call to the spy, indexed by call count</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">argsForCall</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">calls</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-27"><td class="docs"><div class="pilwrap"><a href="#section-27" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Tells a spy to call through to the actual implemenatation.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">andCallThrough</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">plan</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">originalValue</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-28"><td class="docs"><div class="pilwrap"><a href="#section-28" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>For setting the return value of a spy.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>value </span><span class="dox_type">Object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">andReturn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">plan</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-29"><td class="docs"><div class="pilwrap"><a href="#section-29" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>For throwing an exception when a spy is called.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>exceptionMsg </span><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">andThrow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">exceptionMsg</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">plan</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="nx">exceptionMsg</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-30"><td class="docs"><div class="pilwrap"><a href="#section-30" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Calls an alternate implementation when a spy is called.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>fakeFunc </span><span class="dox_type">Function</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">andCallFake</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fakeFunc</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">plan</span> <span class="o">=</span> <span class="nx">fakeFunc</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-31"><td class="docs"><div class="pilwrap"><a href="#section-31" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Resets all of a spy's the tracking variables so that it can be used again.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reset</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">wasCalled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">callCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">argsForCall</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">calls</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">mostRecentCall</span> <span class="o">=</span> <span class="p">{};</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">spyObj</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">spyObj</span><span class="p">.</span><span class="nx">wasCalled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">spyObj</span><span class="p">.</span><span class="nx">callCount</span><span class="o">++</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">argsToArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
    <span class="nx">spyObj</span><span class="p">.</span><span class="nx">mostRecentCall</span><span class="p">.</span><span class="nx">object</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nx">spyObj</span><span class="p">.</span><span class="nx">mostRecentCall</span><span class="p">.</span><span class="nx">args</span> <span class="o">=</span> <span class="nx">args</span><span class="p">;</span>
    <span class="nx">spyObj</span><span class="p">.</span><span class="nx">argsForCall</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span>
    <span class="nx">spyObj</span><span class="p">.</span><span class="nx">calls</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">object</span><span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="o">:</span> <span class="nx">args</span><span class="p">});</span>
    <span class="k">return</span> <span class="nx">spyObj</span><span class="p">.</span><span class="nx">plan</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">spy</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spy</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">prop</span> <span class="k">in</span> <span class="nx">spy</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">spyObj</span><span class="p">[</span><span class="nx">prop</span><span class="p">]</span> <span class="o">=</span> <span class="nx">spy</span><span class="p">[</span><span class="nx">prop</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="nx">spyObj</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

  <span class="k">return</span> <span class="nx">spyObj</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-32"><td class="docs"><div class="pilwrap"><a href="#section-32" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Determines whether an object is a spy.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>putativeSpy
 </span><span class="dox_type">jasmine.Spy</span><span class="dox_type">Object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isSpy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">putativeSpy</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">putativeSpy</span> <span class="o">&amp;&amp;</span> <span class="nx">putativeSpy</span><span class="p">.</span><span class="nx">isSpy</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-33"><td class="docs"><div class="pilwrap"><a href="#section-33" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Creates a more complicated spy: an Object that has every property a function that is a spy.  Used for stubbing something<br />large in one call.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>baseName </span><span class="dox_type">String</span><span>- name of spy class
</span></div><div class="dox_tag_detail"><span>methodNames </span><span class="dox_type">Array</span><span>- array of names of methods to make spies</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpyObj</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">baseName</span><span class="p">,</span> <span class="nx">methodNames</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isArray_</span><span class="p">(</span><span class="nx">methodNames</span><span class="p">)</span> <span class="o">||</span> <span class="nx">methodNames</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;createSpyObj requires a non-empty array of method names to create spies for&#39;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">methodNames</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">obj</span><span class="p">[</span><span class="nx">methodNames</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">(</span><span class="nx">baseName</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">methodNames</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-34"><td class="docs"><div class="pilwrap"><a href="#section-34" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>All parameters are pretty-printed and concatenated together, then written to the current spec's output.</p>

<p>Be careful not to leave calls to <code>jasmine.log</code> in production code.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">spec</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">currentSpec</span><span class="p">;</span>
  <span class="nx">spec</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">spec</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-35"><td class="docs"><div class="pilwrap"><a href="#section-35" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Function that installs a spy on an existing object's method name.  Used within a Spec to create a spy.</p></div><div class="details"><div class="dox_tag_title">See</div><div class="dox_tag_detail"><span class="dox_type">jasmine.createSpy
</span></div><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">obj
</span></div><div class="dox_tag_detail"><span> </span><span class="dox_type">methodName
</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">jasmine.Spy</span><span>a Jasmine spy that can be chained with all spy methods</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">spyOn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">methodName</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">currentSpec</span><span class="p">.</span><span class="nx">spyOn</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">methodName</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isCommonJS</span><span class="p">)</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">spyOn</span> <span class="o">=</span> <span class="nx">spyOn</span><span class="p">;</span></pre></div></td></tr><tr id="section-36"><td class="docs"><div class="pilwrap"><a href="#section-36" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Creates a Jasmine spec that will be added to the current suite.</p>

<p>// TODO: pending tests</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>desc </span><span class="dox_type">String</span><span>- description of this specification
</span></div><div class="dox_tag_detail"><span>func </span><span class="dox_type">Function</span><span>- defines the preconditions and expectations of the spec</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">it</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">desc</span><span class="p">,</span> <span class="nx">func</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">it</span><span class="p">(</span><span class="nx">desc</span><span class="p">,</span> <span class="nx">func</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isCommonJS</span><span class="p">)</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">it</span> <span class="o">=</span> <span class="nx">it</span><span class="p">;</span></pre></div></td></tr><tr id="section-37"><td class="docs"><div class="pilwrap"><a href="#section-37" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Creates a <em>disabled</em> Jasmine spec.</p>

<p>A convenience method that allows existing specs to be disabled temporarily during development.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>desc </span><span class="dox_type">String</span><span>- description of this specification
</span></div><div class="dox_tag_detail"><span>func </span><span class="dox_type">Function</span><span>- defines the preconditions and expectations of the spec</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">xit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">desc</span><span class="p">,</span> <span class="nx">func</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">xit</span><span class="p">(</span><span class="nx">desc</span><span class="p">,</span> <span class="nx">func</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isCommonJS</span><span class="p">)</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">xit</span> <span class="o">=</span> <span class="nx">xit</span><span class="p">;</span></pre></div></td></tr><tr id="section-38"><td class="docs"><div class="pilwrap"><a href="#section-38" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Starts a chain for a Jasmine expectation.</p>

<p>It is passed an Object that is the actual value and should chain to one of the many<br />jasmine.Matchers functions.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>actual </span><span class="dox_type">Object</span><span>- Actual value to test against and expected value
</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">jasmine.Matchers</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">expect</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">actual</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">currentSpec</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="nx">actual</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isCommonJS</span><span class="p">)</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">expect</span> <span class="o">=</span> <span class="nx">expect</span><span class="p">;</span></pre></div></td></tr><tr id="section-39"><td class="docs"><div class="pilwrap"><a href="#section-39" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Defines part of a jasmine spec.  Used in cominbination with waits or waitsFor in asynchrnous specs.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>func </span><span class="dox_type">Function</span><span>- Function that defines part of a jasmine spec.</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">runs</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">func</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">currentSpec</span><span class="p">.</span><span class="nx">runs</span><span class="p">(</span><span class="nx">func</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isCommonJS</span><span class="p">)</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">runs</span> <span class="o">=</span> <span class="nx">runs</span><span class="p">;</span></pre></div></td></tr><tr id="section-40"><td class="docs"><div class="pilwrap"><a href="#section-40" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Waits a fixed time period before moving to the next block.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>timeout </span><span class="dox_type">Number</span><span>- milliseconds to wait</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">waits</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">timeout</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">currentSpec</span><span class="p">.</span><span class="nx">waits</span><span class="p">(</span><span class="nx">timeout</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isCommonJS</span><span class="p">)</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">waits</span> <span class="o">=</span> <span class="nx">waits</span><span class="p">;</span></pre></div></td></tr><tr id="section-41"><td class="docs"><div class="pilwrap"><a href="#section-41" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Waits for the latchFunction to return true before proceeding to the next block.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>latchFunction
 </span><span class="dox_type">Function</span></div><div class="dox_tag_detail"><span>optional_timeoutMessage
 </span><span class="dox_type">String</span></div><div class="dox_tag_detail"><span>optional_timeout </span><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">waitsFor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">latchFunction</span><span class="p">,</span> <span class="nx">optional_timeoutMessage</span><span class="p">,</span> <span class="nx">optional_timeout</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">currentSpec</span><span class="p">.</span><span class="nx">waitsFor</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">currentSpec</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isCommonJS</span><span class="p">)</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">waitsFor</span> <span class="o">=</span> <span class="nx">waitsFor</span><span class="p">;</span></pre></div></td></tr><tr id="section-42"><td class="docs"><div class="pilwrap"><a href="#section-42" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A function that is called before each spec in a suite.</p>

<p>Used for spec setup, including validating assumptions.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>beforeEachFunction </span><span class="dox_type">Function</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">beforeEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">beforeEachFunction</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">beforeEach</span><span class="p">(</span><span class="nx">beforeEachFunction</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isCommonJS</span><span class="p">)</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">beforeEach</span> <span class="o">=</span> <span class="nx">beforeEach</span><span class="p">;</span></pre></div></td></tr><tr id="section-43"><td class="docs"><div class="pilwrap"><a href="#section-43" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A function that is called after each spec in a suite.</p>

<p>Used for restoring any state that is hijacked during spec execution.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>afterEachFunction </span><span class="dox_type">Function</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">afterEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">afterEachFunction</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">afterEach</span><span class="p">(</span><span class="nx">afterEachFunction</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isCommonJS</span><span class="p">)</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">afterEach</span> <span class="o">=</span> <span class="nx">afterEach</span><span class="p">;</span></pre></div></td></tr><tr id="section-44"><td class="docs"><div class="pilwrap"><a href="#section-44" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Defines a suite of specifications.</p>

<p>Stores the description and all defined specs in the Jasmine environment as one suite of specs. Variables declared<br />are accessible by calls to beforeEach, it, and afterEach. Describe blocks can be nested, allowing for specialization<br />of setup in some tests.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>description </span><span class="dox_type">String</span><span>- A string, usually the class under test.
</span></div><div class="dox_tag_detail"><span>specDefinitions </span><span class="dox_type">Function</span><span>- function that defines several specs.</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">describe</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">description</span><span class="p">,</span> <span class="nx">specDefinitions</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">describe</span><span class="p">(</span><span class="nx">description</span><span class="p">,</span> <span class="nx">specDefinitions</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isCommonJS</span><span class="p">)</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">describe</span> <span class="o">=</span> <span class="nx">describe</span><span class="p">;</span></pre></div></td></tr><tr id="section-45"><td class="docs"><div class="pilwrap"><a href="#section-45" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Disables a suite of specifications.  Used to disable some suites in a file, or files, temporarily during development.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>description </span><span class="dox_type">String</span><span>- A string, usually the class under test.
</span></div><div class="dox_tag_detail"><span>specDefinitions </span><span class="dox_type">Function</span><span>- function that defines several specs.</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">xdescribe</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">description</span><span class="p">,</span> <span class="nx">specDefinitions</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">xdescribe</span><span class="p">(</span><span class="nx">description</span><span class="p">,</span> <span class="nx">specDefinitions</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isCommonJS</span><span class="p">)</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">xdescribe</span> <span class="o">=</span> <span class="nx">xdescribe</span><span class="p">;</span></pre></div></td></tr><tr id="section-46"><td class="docs"><div class="pilwrap"><a href="#section-46" class="pilcrow">&#182;</a></div><p>Provide the XMLHttpRequest class for IE 5.x-6.x:</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">XmlHttpRequest</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">XMLHttpRequest</span> <span class="o">==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nx">tryIt</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">f</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="nx">tryIt</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s2">&quot;Msxml2.XMLHTTP.6.0&quot;</span><span class="p">);</span>
  <span class="p">})</span> <span class="o">||</span>
    <span class="nx">tryIt</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s2">&quot;Msxml2.XMLHTTP.3.0&quot;</span><span class="p">);</span>
    <span class="p">})</span> <span class="o">||</span>
    <span class="nx">tryIt</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s2">&quot;Msxml2.XMLHTTP&quot;</span><span class="p">);</span>
    <span class="p">})</span> <span class="o">||</span>
    <span class="nx">tryIt</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s2">&quot;Microsoft.XMLHTTP&quot;</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">xhr</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This browser does not support XMLHttpRequest.&quot;</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">xhr</span><span class="p">;</span>
<span class="p">}</span> <span class="o">:</span> <span class="nx">XMLHttpRequest</span><span class="p">;</span></pre></div></td></tr><tr id="section-47"><td class="docs"><div class="pilwrap"><a href="#section-47" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@namespace</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span> <span class="o">=</span> <span class="p">{};</span></pre></div></td></tr><tr id="section-48"><td class="docs"><div class="pilwrap"><a href="#section-48" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Declare that a child class inherit it's prototype from the parent class.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>childClass
 </span><span class="dox_type">Function</span></div><div class="dox_tag_detail"><span>parentClass </span><span class="dox_type">Function</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">inherit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">childClass</span><span class="p">,</span> <span class="nx">parentClass</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-49"><td class="docs"><div class="pilwrap"><a href="#section-49" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@private</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">subclass</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">};</span>
  <span class="nx">subclass</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">parentClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>
  <span class="nx">childClass</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">subclass</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">formatException</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">lineNumber</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">line</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">lineNumber</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">line</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">lineNumber</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">lineNumber</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">lineNumber</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">file</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">sourceURL</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">file</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">sourceURL</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">fileName</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">file</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">fileName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">message</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">name</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span> <span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">file</span> <span class="o">&amp;&amp;</span> <span class="nx">lineNumber</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">message</span> <span class="o">+=</span> <span class="s1">&#39; in &#39;</span> <span class="o">+</span> <span class="nx">file</span> <span class="o">+</span> <span class="s1">&#39; (line &#39;</span> <span class="o">+</span> <span class="nx">lineNumber</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">message</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">htmlEscape</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">str</span><span class="p">)</span> <span class="k">return</span> <span class="nx">str</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">str</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;amp;&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;lt;&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&gt;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;gt;&#39;</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">argsToArray</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">arrayOfArgs</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">arrayOfArgs</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
  <span class="k">return</span> <span class="nx">arrayOfArgs</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">extend</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">destination</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">property</span> <span class="k">in</span> <span class="nx">source</span><span class="p">)</span> <span class="nx">destination</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="nx">source</span><span class="p">[</span><span class="nx">property</span><span class="p">];</span>
  <span class="k">return</span> <span class="nx">destination</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-50"><td class="docs"><div class="pilwrap"><a href="#section-50" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Environment for Jasmine</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">currentSpec</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">currentSuite</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">currentRunner_</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Runner</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">reporter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">MultiReporter</span><span class="p">();</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">updateInterval</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">DEFAULT_UPDATE_INTERVAL</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">defaultTimeoutInterval</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">DEFAULT_TIMEOUT_INTERVAL</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">lastUpdate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">specFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">nextSpecId_</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">nextSuiteId_</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">equalityTesters_</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-51"><td class="docs"><div class="pilwrap"><a href="#section-51" class="pilcrow">&#182;</a></div><p>wrap matchers</p>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">matchersClass</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">inherit</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">matchersClass</span><span class="p">,</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">);</span>

  <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">wrapInto_</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">matchersClass</span><span class="p">);</span>
<span class="p">};</span>


<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setTimeout</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">;</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clearTimeout</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">clearTimeout</span><span class="p">;</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setInterval</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">;</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clearInterval</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">;</span></pre></div></td></tr><tr id="section-52"><td class="docs"><div class="pilwrap"><a href="#section-52" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@returns an object containing jasmine version build info, if set.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">version_</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">version_</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Version not set&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-53"><td class="docs"><div class="pilwrap"><a href="#section-53" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@returns string containing jasmine version build info, if set.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">versionString</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">version_</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;version unknown&quot;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">version</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">version</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">versionString</span> <span class="o">=</span> <span class="nx">version</span><span class="p">.</span><span class="nx">major</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">version</span><span class="p">.</span><span class="nx">minor</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">version</span><span class="p">.</span><span class="nx">build</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">version</span><span class="p">.</span><span class="nx">release_candidate</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">versionString</span> <span class="o">+=</span> <span class="s2">&quot;.rc&quot;</span> <span class="o">+</span> <span class="nx">version</span><span class="p">.</span><span class="nx">release_candidate</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">versionString</span> <span class="o">+=</span> <span class="s2">&quot; revision &quot;</span> <span class="o">+</span> <span class="nx">version</span><span class="p">.</span><span class="nx">revision</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">versionString</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-54"><td class="docs"><div class="pilwrap"><a href="#section-54" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@returns a sequential integer starting at 0</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">nextSpecId</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextSpecId_</span><span class="o">++</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-55"><td class="docs"><div class="pilwrap"><a href="#section-55" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@returns a sequential integer starting at 0</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">nextSuiteId</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextSuiteId_</span><span class="o">++</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-56"><td class="docs"><div class="pilwrap"><a href="#section-56" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Register a reporter to receive status updates from Jasmine.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>reporter </span><span class="dox_type">jasmine.Reporter</span><span>- An object which will receive status updates.</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addReporter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reporter</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">reporter</span><span class="p">.</span><span class="nx">addReporter</span><span class="p">(</span><span class="nx">reporter</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">execute</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">currentRunner_</span><span class="p">.</span><span class="nx">execute</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">describe</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">description</span><span class="p">,</span> <span class="nx">specDefinitions</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">specDefinitions</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentSuite</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">parentSuite</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentSuite</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">parentSuite</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">parentSuite</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentRunner_</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">currentSuite</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">declarationError</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">specDefinitions</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">declarationError</span> <span class="o">=</span> <span class="nx">e</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">declarationError</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;encountered a declaration exception&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="nx">declarationError</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">currentSuite</span> <span class="o">=</span> <span class="nx">parentSuite</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">suite</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">beforeEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">beforeEachFunction</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentSuite</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentSuite</span><span class="p">.</span><span class="nx">beforeEach</span><span class="p">(</span><span class="nx">beforeEachFunction</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentRunner_</span><span class="p">.</span><span class="nx">beforeEach</span><span class="p">(</span><span class="nx">beforeEachFunction</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">currentRunner</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentRunner_</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">afterEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">afterEachFunction</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentSuite</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentSuite</span><span class="p">.</span><span class="nx">afterEach</span><span class="p">(</span><span class="nx">afterEachFunction</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentRunner_</span><span class="p">.</span><span class="nx">afterEach</span><span class="p">(</span><span class="nx">afterEachFunction</span><span class="p">);</span>
  <span class="p">}</span>

<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">xdescribe</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">desc</span><span class="p">,</span> <span class="nx">specDefinitions</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">execute</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">it</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">description</span><span class="p">,</span> <span class="nx">func</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">spec</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentSuite</span><span class="p">,</span> <span class="nx">description</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">currentSuite</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">spec</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">currentSpec</span> <span class="o">=</span> <span class="nx">spec</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">func</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">spec</span><span class="p">.</span><span class="nx">runs</span><span class="p">(</span><span class="nx">func</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">spec</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">xit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">desc</span><span class="p">,</span> <span class="nx">func</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextSpecId</span><span class="p">(),</span>
    <span class="nx">runs</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">compareRegExps_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">mismatchKeys</span><span class="p">,</span> <span class="nx">mismatchValues</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">source</span> <span class="o">!=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">source</span><span class="p">)</span>
    <span class="nx">mismatchValues</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;expected pattern /&quot;</span> <span class="o">+</span> <span class="nx">b</span><span class="p">.</span><span class="nx">source</span> <span class="o">+</span> <span class="s2">&quot;/ is not equal to the pattern /&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">source</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">ignoreCase</span> <span class="o">!=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">ignoreCase</span><span class="p">)</span>
    <span class="nx">mismatchValues</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;expected modifier i was&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">ignoreCase</span> <span class="o">?</span> <span class="s2">&quot; &quot;</span> <span class="o">:</span> <span class="s2">&quot; not &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;set and does not equal the origin modifier&quot;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">global</span> <span class="o">!=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">global</span><span class="p">)</span>
    <span class="nx">mismatchValues</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;expected modifier g was&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">global</span> <span class="o">?</span> <span class="s2">&quot; &quot;</span> <span class="o">:</span> <span class="s2">&quot; not &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;set and does not equal the origin modifier&quot;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">multiline</span> <span class="o">!=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">multiline</span><span class="p">)</span>
    <span class="nx">mismatchValues</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;expected modifier m was&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">multiline</span> <span class="o">?</span> <span class="s2">&quot; &quot;</span> <span class="o">:</span> <span class="s2">&quot; not &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;set and does not equal the origin modifier&quot;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">sticky</span> <span class="o">!=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">sticky</span><span class="p">)</span>
    <span class="nx">mismatchValues</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;expected modifier y was&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">sticky</span> <span class="o">?</span> <span class="s2">&quot; &quot;</span> <span class="o">:</span> <span class="s2">&quot; not &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;set and does not equal the origin modifier&quot;</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">mismatchValues</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">compareObjects_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">mismatchKeys</span><span class="p">,</span> <span class="nx">mismatchValues</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">__Jasmine_been_here_before__</span> <span class="o">===</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">__Jasmine_been_here_before__</span> <span class="o">===</span> <span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">a</span><span class="p">.</span><span class="nx">__Jasmine_been_here_before__</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
  <span class="nx">b</span><span class="p">.</span><span class="nx">__Jasmine_been_here_before__</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">hasKey</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">keyName</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">obj</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">keyName</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">property</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hasKey</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">property</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">hasKey</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">property</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">mismatchKeys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;expected has key &#39;&quot;</span> <span class="o">+</span> <span class="nx">property</span> <span class="o">+</span> <span class="s2">&quot;&#39;, but missing from actual.&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">property</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hasKey</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">property</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">hasKey</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">property</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">mismatchKeys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;expected missing key &#39;&quot;</span> <span class="o">+</span> <span class="nx">property</span> <span class="o">+</span> <span class="s2">&quot;&#39;, but present in actual.&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">property</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">property</span> <span class="o">==</span> <span class="s1">&#39;__Jasmine_been_here_before__&#39;</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">equals_</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">property</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">property</span><span class="p">],</span> <span class="nx">mismatchKeys</span><span class="p">,</span> <span class="nx">mismatchValues</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">mismatchValues</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span> <span class="o">+</span> <span class="nx">property</span> <span class="o">+</span> <span class="s2">&quot;&#39; was &#39;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">?</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">htmlEscape</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">property</span><span class="p">].</span><span class="nx">toString</span><span class="p">())</span> <span class="o">:</span> <span class="nx">b</span><span class="p">[</span><span class="nx">property</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;&#39; in expected, but was &#39;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">?</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">htmlEscape</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">property</span><span class="p">].</span><span class="nx">toString</span><span class="p">())</span> <span class="o">:</span> <span class="nx">a</span><span class="p">[</span><span class="nx">property</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;&#39; in actual.&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isArray_</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">isArray_</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">mismatchValues</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;arrays were not the same length&quot;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">delete</span> <span class="nx">a</span><span class="p">.</span><span class="nx">__Jasmine_been_here_before__</span><span class="p">;</span>
  <span class="k">delete</span> <span class="nx">b</span><span class="p">.</span><span class="nx">__Jasmine_been_here_before__</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">mismatchKeys</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">mismatchValues</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">equals_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">mismatchKeys</span><span class="p">,</span> <span class="nx">mismatchValues</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">mismatchKeys</span> <span class="o">=</span> <span class="nx">mismatchKeys</span> <span class="o">||</span> <span class="p">[];</span>
  <span class="nx">mismatchValues</span> <span class="o">=</span> <span class="nx">mismatchValues</span> <span class="o">||</span> <span class="p">[];</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">equalityTesters_</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">equalityTester</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">equalityTesters_</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">equalityTester</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">mismatchKeys</span><span class="p">,</span> <span class="nx">mismatchValues</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span> <span class="o">!==</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">===</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span> <span class="o">||</span> <span class="nx">a</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">b</span> <span class="o">===</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span> <span class="o">||</span> <span class="nx">b</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span> <span class="o">==</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isDomNode</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">isDomNode</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="k">instanceof</span> <span class="nb">Date</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span> <span class="k">instanceof</span> <span class="nb">Date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">jasmineMatches</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">jasmineMatches</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">jasmineMatches</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">jasmineMatches</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="k">instanceof</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">ObjectContaining</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">b</span> <span class="k">instanceof</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">ObjectContaining</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isString_</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">isString_</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isNumber_</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">isNumber_</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="k">instanceof</span> <span class="nb">RegExp</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span> <span class="k">instanceof</span> <span class="nb">RegExp</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">compareRegExps_</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">mismatchKeys</span><span class="p">,</span> <span class="nx">mismatchValues</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">compareObjects_</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">mismatchKeys</span><span class="p">,</span> <span class="nx">mismatchValues</span><span class="p">);</span>
  <span class="p">}</span></pre></div></td></tr><tr id="section-57"><td class="docs"><div class="pilwrap"><a href="#section-57" class="pilcrow">&#182;</a></div><p>Straight check</p>
</td><td class="code"><div class="highlight"><pre>  <span class="k">return</span> <span class="p">(</span><span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">contains_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">haystack</span><span class="p">,</span> <span class="nx">needle</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isArray_</span><span class="p">(</span><span class="nx">haystack</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">haystack</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">equals_</span><span class="p">(</span><span class="nx">haystack</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">needle</span><span class="p">))</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">haystack</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">needle</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Env</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addEqualityTester</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">equalityTester</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">equalityTesters_</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">equalityTester</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-58"><td class="docs"><div class="pilwrap"><a href="#section-58" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>No-op base class for Jasmine reporters.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Reporter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-59"><td class="docs"><div class="pilwrap"><a href="#section-59" class="pilcrow">&#182;</a></div><p>noinspection JSUnusedLocalSymbols</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Reporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reportRunnerStarting</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-60"><td class="docs"><div class="pilwrap"><a href="#section-60" class="pilcrow">&#182;</a></div><p>noinspection JSUnusedLocalSymbols</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Reporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reportRunnerResults</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-61"><td class="docs"><div class="pilwrap"><a href="#section-61" class="pilcrow">&#182;</a></div><p>noinspection JSUnusedLocalSymbols</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Reporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reportSuiteResults</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">)</span> <span class="p">{</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-62"><td class="docs"><div class="pilwrap"><a href="#section-62" class="pilcrow">&#182;</a></div><p>noinspection JSUnusedLocalSymbols</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Reporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reportSpecStarting</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">spec</span><span class="p">)</span> <span class="p">{</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-63"><td class="docs"><div class="pilwrap"><a href="#section-63" class="pilcrow">&#182;</a></div><p>noinspection JSUnusedLocalSymbols</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Reporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reportSpecResults</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">spec</span><span class="p">)</span> <span class="p">{</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-64"><td class="docs"><div class="pilwrap"><a href="#section-64" class="pilcrow">&#182;</a></div><p>noinspection JSUnusedLocalSymbols</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Reporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-65"><td class="docs"><div class="pilwrap"><a href="#section-65" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Blocks are functions with executable code that make up a spec.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>env
 </span><span class="dox_type">jasmine.Env</span></div><div class="dox_tag_detail"><span>func
 </span><span class="dox_type">Function</span></div><div class="dox_tag_detail"><span>spec </span><span class="dox_type">jasmine.Spec</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">env</span><span class="p">,</span> <span class="nx">func</span><span class="p">,</span> <span class="nx">spec</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">env</span> <span class="o">=</span> <span class="nx">env</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">func</span> <span class="o">=</span> <span class="nx">func</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">spec</span> <span class="o">=</span> <span class="nx">spec</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">execute</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">CATCH_EXCEPTIONS</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">func</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">spec</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">func</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">spec</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">onComplete</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-66"><td class="docs"><div class="pilwrap"><a href="#section-66" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>JavaScript API reporter.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">JsApiReporter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">started</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">finished</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">suites_</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">results_</span> <span class="o">=</span> <span class="p">{};</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">JsApiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reportRunnerStarting</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">started</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">suites</span> <span class="o">=</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">topLevelSuites</span><span class="p">();</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">suites</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="nx">suites</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">suites_</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">summarize_</span><span class="p">(</span><span class="nx">suite</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">JsApiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">suites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">suites_</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">JsApiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">summarize_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suiteOrSpec</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">isSuite</span> <span class="o">=</span> <span class="nx">suiteOrSpec</span> <span class="k">instanceof</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">summary</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="nx">suiteOrSpec</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="nx">suiteOrSpec</span><span class="p">.</span><span class="nx">description</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span> <span class="nx">isSuite</span> <span class="o">?</span> <span class="s1">&#39;suite&#39;</span> <span class="o">:</span> <span class="s1">&#39;spec&#39;</span><span class="p">,</span>
    <span class="nx">children</span><span class="o">:</span> <span class="p">[]</span>
  <span class="p">};</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="nx">isSuite</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">suiteOrSpec</span><span class="p">.</span><span class="nx">children</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">summary</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">summarize_</span><span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">]));</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">summary</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">JsApiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">results</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">results_</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">JsApiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">resultsForSpec</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">specId</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">results_</span><span class="p">[</span><span class="nx">specId</span><span class="p">];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-67"><td class="docs"><div class="pilwrap"><a href="#section-67" class="pilcrow">&#182;</a></div><p>noinspection JSUnusedLocalSymbols</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">JsApiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reportRunnerResults</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">finished</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-68"><td class="docs"><div class="pilwrap"><a href="#section-68" class="pilcrow">&#182;</a></div><p>noinspection JSUnusedLocalSymbols</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">JsApiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reportSuiteResults</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">)</span> <span class="p">{</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-69"><td class="docs"><div class="pilwrap"><a href="#section-69" class="pilcrow">&#182;</a></div><p>noinspection JSUnusedLocalSymbols</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">JsApiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reportSpecResults</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">spec</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">results_</span><span class="p">[</span><span class="nx">spec</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">messages</span><span class="o">:</span> <span class="nx">spec</span><span class="p">.</span><span class="nx">results</span><span class="p">().</span><span class="nx">getItems</span><span class="p">(),</span>
    <span class="nx">result</span><span class="o">:</span> <span class="nx">spec</span><span class="p">.</span><span class="nx">results</span><span class="p">().</span><span class="nx">failedCount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="s2">&quot;failed&quot;</span> <span class="o">:</span> <span class="s2">&quot;passed&quot;</span>
  <span class="p">};</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-70"><td class="docs"><div class="pilwrap"><a href="#section-70" class="pilcrow">&#182;</a></div><p>noinspection JSUnusedLocalSymbols</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">JsApiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">JsApiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">resultsForSpecs</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">specIds</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">specIds</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">specId</span> <span class="o">=</span> <span class="nx">specIds</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="nx">results</span><span class="p">[</span><span class="nx">specId</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">summarizeResult_</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">results_</span><span class="p">[</span><span class="nx">specId</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">JsApiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">summarizeResult_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">summaryMessages</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">var</span> <span class="nx">messagesLength</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">messageIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">messageIndex</span> <span class="o">&lt;</span> <span class="nx">messagesLength</span><span class="p">;</span> <span class="nx">messageIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">resultMessage</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="nx">messageIndex</span><span class="p">];</span>
    <span class="nx">summaryMessages</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
      <span class="nx">text</span><span class="o">:</span> <span class="nx">resultMessage</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span> <span class="o">?</span> <span class="nx">resultMessage</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">:</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">,</span>
      <span class="nx">passed</span><span class="o">:</span> <span class="nx">resultMessage</span><span class="p">.</span><span class="nx">passed</span> <span class="o">?</span> <span class="nx">resultMessage</span><span class="p">.</span><span class="nx">passed</span><span class="p">()</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">resultMessage</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
      <span class="nx">message</span><span class="o">:</span> <span class="nx">resultMessage</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
      <span class="nx">trace</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">stack</span><span class="o">:</span> <span class="nx">resultMessage</span><span class="p">.</span><span class="nx">passed</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">resultMessage</span><span class="p">.</span><span class="nx">passed</span><span class="p">()</span> <span class="o">?</span> <span class="nx">resultMessage</span><span class="p">.</span><span class="nx">trace</span><span class="p">.</span><span class="nx">stack</span> <span class="o">:</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">result</span> <span class="o">:</span> <span class="nx">result</span><span class="p">.</span><span class="nx">result</span><span class="p">,</span>
    <span class="nx">messages</span> <span class="o">:</span> <span class="nx">summaryMessages</span>
  <span class="p">};</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-71"><td class="docs"><div class="pilwrap"><a href="#section-71" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@constructor</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>env
 </span><span class="dox_type">jasmine.Env</span></div><div class="dox_tag_detail"><span> </span><span class="dox_type">actual
</span></div><div class="dox_tag_detail"><span>spec </span><span class="dox_type">jasmine.Spec</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">env</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">spec</span><span class="p">,</span> <span class="nx">opt_isNot</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">env</span> <span class="o">=</span> <span class="nx">env</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">actual</span> <span class="o">=</span> <span class="nx">actual</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">spec</span> <span class="o">=</span> <span class="nx">spec</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">isNot</span> <span class="o">=</span> <span class="nx">opt_isNot</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">reportWasCalled_</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-72"><td class="docs"><div class="pilwrap"><a href="#section-72" class="pilcrow">&#182;</a></div><p>todo: @deprecated as of Jasmine 0.11, remove soon [xw]</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">pp</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;jasmine.Matchers.pp() is no longer supported, please use jasmine.pp() instead!&quot;</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-73"><td class="docs"><div class="pilwrap"><a href="#section-73" class="pilcrow">&#182;</a></div><p>todo: @deprecated Deprecated as of Jasmine 0.10. Rewrite your custom matchers to return true or false. [xw]</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">report</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="nx">failing_message</span><span class="p">,</span> <span class="nx">details</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;As of jasmine 0.11, custom matchers must be implemented differently -- please see jasmine docs&quot;</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">wrapInto_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">matchersClass</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">methodName</span> <span class="k">in</span> <span class="nx">prototype</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">methodName</span> <span class="o">==</span> <span class="s1">&#39;report&#39;</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">orig</span> <span class="o">=</span> <span class="nx">prototype</span><span class="p">[</span><span class="nx">methodName</span><span class="p">];</span>
    <span class="nx">matchersClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">methodName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">matcherFn_</span><span class="p">(</span><span class="nx">methodName</span><span class="p">,</span> <span class="nx">orig</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">matcherFn_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">matcherName</span><span class="p">,</span> <span class="nx">matcherFunction</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">matcherArgs</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">argsToArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">matcherFunction</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isNot</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="o">!</span><span class="nx">result</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">reportWasCalled_</span><span class="p">)</span> <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">message</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">message</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isArray_</span><span class="p">(</span><span class="nx">message</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">message</span> <span class="o">=</span> <span class="nx">message</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">isNot</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">];</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">englishyPredicate</span> <span class="o">=</span> <span class="nx">matcherName</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[A-Z]/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">s</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span> <span class="p">});</span>
        <span class="nx">message</span> <span class="o">=</span> <span class="s2">&quot;Expected &quot;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isNot</span> <span class="o">?</span> <span class="s2">&quot; not &quot;</span> <span class="o">:</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">englishyPredicate</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">matcherArgs</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">matcherArgs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">message</span> <span class="o">+=</span> <span class="s2">&quot;,&quot;</span><span class="p">;</span>
            <span class="nx">message</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="nx">matcherArgs</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">message</span> <span class="o">+=</span> <span class="s2">&quot;.&quot;</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">expectationResult</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">ExpectationResult</span><span class="p">({</span>
      <span class="nx">matcherName</span><span class="o">:</span> <span class="nx">matcherName</span><span class="p">,</span>
      <span class="nx">passed</span><span class="o">:</span> <span class="nx">result</span><span class="p">,</span>
      <span class="nx">expected</span><span class="o">:</span> <span class="nx">matcherArgs</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">matcherArgs</span> <span class="o">:</span> <span class="nx">matcherArgs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
      <span class="nx">actual</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">,</span>
      <span class="nx">message</span><span class="o">:</span> <span class="nx">message</span>
    <span class="p">});</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">addMatcherResult</span><span class="p">(</span><span class="nx">expectationResult</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-74"><td class="docs"><div class="pilwrap"><a href="#section-74" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>toBe: compares the actual to the expected using ===</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">expected</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toBe</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expected</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span> <span class="o">===</span> <span class="nx">expected</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-75"><td class="docs"><div class="pilwrap"><a href="#section-75" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>toNotBe: compares the actual to the expected using !==</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">expected
</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toNotBe</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expected</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span> <span class="o">!==</span> <span class="nx">expected</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-76"><td class="docs"><div class="pilwrap"><a href="#section-76" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>toEqual: compares the actual to the expected using common sense equality. Handles Objects, Arrays, etc.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">expected</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toEqual</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expected</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">equals_</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-77"><td class="docs"><div class="pilwrap"><a href="#section-77" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>toNotEqual: compares the actual to the expected using the ! of jasmine.Matchers.toEqual</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">expected
</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toNotEqual</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expected</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">equals_</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-78"><td class="docs"><div class="pilwrap"><a href="#section-78" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that compares the actual to the expected using a regular expression.  Constructs a RegExp, so takes<br />a pattern or a String.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">expected</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toMatch</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expected</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">expected</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-79"><td class="docs"><div class="pilwrap"><a href="#section-79" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that compares the actual to the expected using the boolean inverse of jasmine.Matchers.toMatch</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">expected
</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toNotMatch</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expected</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">expected</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">));</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-80"><td class="docs"><div class="pilwrap"><a href="#section-80" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that compares the actual to jasmine.undefined.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toBeDefined</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span> <span class="o">!==</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-81"><td class="docs"><div class="pilwrap"><a href="#section-81" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that compares the actual to jasmine.undefined.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toBeUndefined</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span> <span class="o">===</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-82"><td class="docs"><div class="pilwrap"><a href="#section-82" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that compares the actual to null.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toBeNull</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span> <span class="o">===</span> <span class="kc">null</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-83"><td class="docs"><div class="pilwrap"><a href="#section-83" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that compares the actual to NaN.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toBeNaN</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="s2">&quot;Expected &quot;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; to be NaN.&quot;</span> <span class="p">];</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span> <span class="o">!==</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-84"><td class="docs"><div class="pilwrap"><a href="#section-84" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that boolean not-nots the actual.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toBeTruthy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!!</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-85"><td class="docs"><div class="pilwrap"><a href="#section-85" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that boolean nots the actual.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toBeFalsy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-86"><td class="docs"><div class="pilwrap"><a href="#section-86" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that checks to see if the actual, a Jasmine spy, was called.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toHaveBeenCalled</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;toHaveBeenCalled does not take arguments, use toHaveBeenCalledWith&#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isSpy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Expected a spy, but got &#39;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
      <span class="s2">&quot;Expected spy &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">identity</span> <span class="o">+</span> <span class="s2">&quot; to have been called.&quot;</span><span class="p">,</span>
      <span class="s2">&quot;Expected spy &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">identity</span> <span class="o">+</span> <span class="s2">&quot; not to have been called.&quot;</span>
    <span class="p">];</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">wasCalled</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-87"><td class="docs"><div class="pilwrap"><a href="#section-87" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@deprecated Use expect(xxx).toHaveBeenCalled() instead</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">wasCalled</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toHaveBeenCalled</span><span class="p">;</span></pre></div></td></tr><tr id="section-88"><td class="docs"><div class="pilwrap"><a href="#section-88" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that checks to see if the actual, a Jasmine spy, was not called.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">wasNotCalled</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;wasNotCalled does not take arguments&#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isSpy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Expected a spy, but got &#39;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
      <span class="s2">&quot;Expected spy &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">identity</span> <span class="o">+</span> <span class="s2">&quot; to not have been called.&quot;</span><span class="p">,</span>
      <span class="s2">&quot;Expected spy &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">identity</span> <span class="o">+</span> <span class="s2">&quot; to have been called.&quot;</span>
    <span class="p">];</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">wasCalled</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-89"><td class="docs"><div class="pilwrap"><a href="#section-89" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that checks to see if the actual, a Jasmine spy, was called with a set of parameters.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toHaveBeenCalledWith</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">expectedArgs</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">argsToArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isSpy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Expected a spy, but got &#39;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">invertedMessage</span> <span class="o">=</span> <span class="s2">&quot;Expected spy &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">identity</span> <span class="o">+</span> <span class="s2">&quot; not to have been called with &quot;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="nx">expectedArgs</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; but it was.&quot;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">positiveMessage</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">callCount</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">positiveMessage</span> <span class="o">=</span> <span class="s2">&quot;Expected spy &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">identity</span> <span class="o">+</span> <span class="s2">&quot; to have been called with &quot;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="nx">expectedArgs</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; but it was never called.&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">positiveMessage</span> <span class="o">=</span> <span class="s2">&quot;Expected spy &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">identity</span> <span class="o">+</span> <span class="s2">&quot; to have been called with &quot;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="nx">expectedArgs</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; but actual calls were &quot;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">argsForCall</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\[ | \]$/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">[</span><span class="nx">positiveMessage</span><span class="p">,</span> <span class="nx">invertedMessage</span><span class="p">];</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">contains_</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">argsForCall</span><span class="p">,</span> <span class="nx">expectedArgs</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-90"><td class="docs"><div class="pilwrap"><a href="#section-90" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@deprecated Use expect(xxx).toHaveBeenCalledWith() instead</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">wasCalledWith</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toHaveBeenCalledWith</span><span class="p">;</span></pre></div></td></tr><tr id="section-91"><td class="docs"><div class="pilwrap"><a href="#section-91" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@deprecated Use expect(xxx).not.toHaveBeenCalledWith() instead</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">wasNotCalledWith</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">expectedArgs</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">argsToArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isSpy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Expected a spy, but got &#39;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
      <span class="s2">&quot;Expected spy not to have been called with &quot;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="nx">expectedArgs</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; but it was&quot;</span><span class="p">,</span>
      <span class="s2">&quot;Expected spy to have been called with &quot;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="nx">expectedArgs</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; but it was&quot;</span>
    <span class="p">];</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">contains_</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">.</span><span class="nx">argsForCall</span><span class="p">,</span> <span class="nx">expectedArgs</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-92"><td class="docs"><div class="pilwrap"><a href="#section-92" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that checks that the expected item is an element in the actual Array.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>expected </span><span class="dox_type">Object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toContain</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expected</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">contains_</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-93"><td class="docs"><div class="pilwrap"><a href="#section-93" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that checks that the expected item is NOT an element in the actual Array.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>expected
 </span><span class="dox_type">Object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toNotContain</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expected</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">contains_</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toBeLessThan</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expected</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span> <span class="o">&lt;</span> <span class="nx">expected</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toBeGreaterThan</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expected</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span> <span class="o">&gt;</span> <span class="nx">expected</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-94"><td class="docs"><div class="pilwrap"><a href="#section-94" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that checks that the expected item is equal to the actual item<br />up to a given level of decimal precision (default 2).</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>expected
 </span><span class="dox_type">Number</span></div><div class="dox_tag_detail"><span>precision, </span><span class="dox_type">Number</span><span>- as number of decimal places</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toBeCloseTo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expected</span><span class="p">,</span> <span class="nx">precision</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">precision</span> <span class="o">===</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">precision</span> <span class="o">=</span> <span class="nx">precision</span> <span class="o">||</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">expected</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="nx">precision</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-95"><td class="docs"><div class="pilwrap"><a href="#section-95" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Matcher that checks that the expected exception was thrown by the actual.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>[expected] </span><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toThrow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expected</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">exception</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="k">this</span><span class="p">.</span><span class="nx">actual</span> <span class="o">!=</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Actual is not a function&#39;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">actual</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">exception</span> <span class="o">=</span> <span class="nx">e</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">exception</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span> <span class="o">=</span> <span class="p">(</span><span class="nx">expected</span> <span class="o">===</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">equals_</span><span class="p">(</span><span class="nx">exception</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="nx">exception</span><span class="p">,</span> <span class="nx">expected</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="nx">expected</span><span class="p">));</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">not</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">isNot</span> <span class="o">?</span> <span class="s2">&quot;not &quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">exception</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">expected</span> <span class="o">===</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">equals_</span><span class="p">(</span><span class="nx">exception</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="nx">exception</span><span class="p">,</span> <span class="nx">expected</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="nx">expected</span><span class="p">)))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;Expected function &quot;</span> <span class="o">+</span> <span class="nx">not</span> <span class="o">+</span> <span class="s2">&quot;to throw&quot;</span><span class="p">,</span> <span class="nx">expected</span> <span class="o">?</span> <span class="nx">expected</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="nx">expected</span> <span class="o">:</span> <span class="s2">&quot;an exception&quot;</span><span class="p">,</span> <span class="s2">&quot;, but it threw&quot;</span><span class="p">,</span> <span class="nx">exception</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="nx">exception</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;Expected function to throw an exception.&quot;</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">Any</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expectedClass</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">expectedClass</span> <span class="o">=</span> <span class="nx">expectedClass</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">Any</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">jasmineMatches</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">other</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">expectedClass</span> <span class="o">==</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">other</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">||</span> <span class="nx">other</span> <span class="k">instanceof</span> <span class="nb">String</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">expectedClass</span> <span class="o">==</span> <span class="nb">Number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">other</span> <span class="o">==</span> <span class="s1">&#39;number&#39;</span> <span class="o">||</span> <span class="nx">other</span> <span class="k">instanceof</span> <span class="nb">Number</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">expectedClass</span> <span class="o">==</span> <span class="nb">Function</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">other</span> <span class="o">==</span> <span class="s1">&#39;function&#39;</span> <span class="o">||</span> <span class="nx">other</span> <span class="k">instanceof</span> <span class="nb">Function</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">expectedClass</span> <span class="o">==</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">other</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">other</span> <span class="k">instanceof</span> <span class="k">this</span><span class="p">.</span><span class="nx">expectedClass</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">Any</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">jasmineToString</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s1">&#39;&lt;jasmine.any(&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">expectedClass</span> <span class="o">+</span> <span class="s1">&#39;)&gt;&#39;</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">ObjectContaining</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">sample</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">sample</span> <span class="o">=</span> <span class="nx">sample</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">ObjectContaining</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">jasmineMatches</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">other</span><span class="p">,</span> <span class="nx">mismatchKeys</span><span class="p">,</span> <span class="nx">mismatchValues</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">mismatchKeys</span> <span class="o">=</span> <span class="nx">mismatchKeys</span> <span class="o">||</span> <span class="p">[];</span>
  <span class="nx">mismatchValues</span> <span class="o">=</span> <span class="nx">mismatchValues</span> <span class="o">||</span> <span class="p">[];</span>

  <span class="kd">var</span> <span class="nx">env</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">();</span>

  <span class="kd">var</span> <span class="nx">hasKey</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">keyName</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">obj</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">keyName</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">property</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">sample</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hasKey</span><span class="p">(</span><span class="nx">other</span><span class="p">,</span> <span class="nx">property</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">hasKey</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sample</span><span class="p">,</span> <span class="nx">property</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">mismatchKeys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;expected has key &#39;&quot;</span> <span class="o">+</span> <span class="nx">property</span> <span class="o">+</span> <span class="s2">&quot;&#39;, but missing from actual.&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">env</span><span class="p">.</span><span class="nx">equals_</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sample</span><span class="p">[</span><span class="nx">property</span><span class="p">],</span> <span class="nx">other</span><span class="p">[</span><span class="nx">property</span><span class="p">],</span> <span class="nx">mismatchKeys</span><span class="p">,</span> <span class="nx">mismatchValues</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">mismatchValues</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span> <span class="o">+</span> <span class="nx">property</span> <span class="o">+</span> <span class="s2">&quot;&#39; was &#39;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">other</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">?</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">htmlEscape</span><span class="p">(</span><span class="nx">other</span><span class="p">[</span><span class="nx">property</span><span class="p">].</span><span class="nx">toString</span><span class="p">())</span> <span class="o">:</span> <span class="nx">other</span><span class="p">[</span><span class="nx">property</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;&#39; in expected, but was &#39;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sample</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">?</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">htmlEscape</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sample</span><span class="p">[</span><span class="nx">property</span><span class="p">].</span><span class="nx">toString</span><span class="p">())</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">sample</span><span class="p">[</span><span class="nx">property</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;&#39; in actual.&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">mismatchKeys</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">mismatchValues</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">ObjectContaining</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">jasmineToString</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">&quot;&lt;jasmine.objectContaining(&quot;</span> <span class="o">+</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">pp</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sample</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&gt;&quot;</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-96"><td class="docs"><div class="pilwrap"><a href="#section-96" class="pilcrow">&#182;</a></div><p>Mock setTimeout, clearTimeout
Contributed by Pivotal Computer Systems, www.pivotalsf.com</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">FakeTimer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">setTimeout</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">funcToCall</span><span class="p">,</span> <span class="nx">millis</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">timeoutsMade</span><span class="o">++</span><span class="p">;</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">scheduleFunction</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">timeoutsMade</span><span class="p">,</span> <span class="nx">funcToCall</span><span class="p">,</span> <span class="nx">millis</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">timeoutsMade</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">self</span><span class="p">.</span><span class="nx">setInterval</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">funcToCall</span><span class="p">,</span> <span class="nx">millis</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">timeoutsMade</span><span class="o">++</span><span class="p">;</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">scheduleFunction</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">timeoutsMade</span><span class="p">,</span> <span class="nx">funcToCall</span><span class="p">,</span> <span class="nx">millis</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">timeoutsMade</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">self</span><span class="p">.</span><span class="nx">clearTimeout</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">timeoutKey</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">scheduledFunctions</span><span class="p">[</span><span class="nx">timeoutKey</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">self</span><span class="p">.</span><span class="nx">clearInterval</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">timeoutKey</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">scheduledFunctions</span><span class="p">[</span><span class="nx">timeoutKey</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">;</span>
  <span class="p">};</span>

<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">FakeTimer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reset</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">timeoutsMade</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">scheduledFunctions</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">nowMillis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">FakeTimer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">tick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">millis</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">oldMillis</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">nowMillis</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">newMillis</span> <span class="o">=</span> <span class="nx">oldMillis</span> <span class="o">+</span> <span class="nx">millis</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">runFunctionsWithinRange</span><span class="p">(</span><span class="nx">oldMillis</span><span class="p">,</span> <span class="nx">newMillis</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">nowMillis</span> <span class="o">=</span> <span class="nx">newMillis</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">FakeTimer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">runFunctionsWithinRange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">oldMillis</span><span class="p">,</span> <span class="nx">nowMillis</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">scheduledFunc</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">funcsToRun</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">timeoutKey</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">scheduledFunctions</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">scheduledFunc</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">scheduledFunctions</span><span class="p">[</span><span class="nx">timeoutKey</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">scheduledFunc</span> <span class="o">!=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span> <span class="o">&amp;&amp;</span>
        <span class="nx">scheduledFunc</span><span class="p">.</span><span class="nx">runAtMillis</span> <span class="o">&gt;=</span> <span class="nx">oldMillis</span> <span class="o">&amp;&amp;</span>
        <span class="nx">scheduledFunc</span><span class="p">.</span><span class="nx">runAtMillis</span> <span class="o">&lt;=</span> <span class="nx">nowMillis</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">funcsToRun</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">scheduledFunc</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">scheduledFunctions</span><span class="p">[</span><span class="nx">timeoutKey</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">funcsToRun</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">funcsToRun</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">runAtMillis</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">runAtMillis</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">funcsToRun</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">funcToRun</span> <span class="o">=</span> <span class="nx">funcsToRun</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">nowMillis</span> <span class="o">=</span> <span class="nx">funcToRun</span><span class="p">.</span><span class="nx">runAtMillis</span><span class="p">;</span>
        <span class="nx">funcToRun</span><span class="p">.</span><span class="nx">funcToCall</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">funcToRun</span><span class="p">.</span><span class="nx">recurring</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">scheduleFunction</span><span class="p">(</span><span class="nx">funcToRun</span><span class="p">.</span><span class="nx">timeoutKey</span><span class="p">,</span>
              <span class="nx">funcToRun</span><span class="p">.</span><span class="nx">funcToCall</span><span class="p">,</span>
              <span class="nx">funcToRun</span><span class="p">.</span><span class="nx">millis</span><span class="p">,</span>
              <span class="kc">true</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">runFunctionsWithinRange</span><span class="p">(</span><span class="nx">oldMillis</span><span class="p">,</span> <span class="nx">nowMillis</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">FakeTimer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">scheduleFunction</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">timeoutKey</span><span class="p">,</span> <span class="nx">funcToCall</span><span class="p">,</span> <span class="nx">millis</span><span class="p">,</span> <span class="nx">recurring</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">scheduledFunctions</span><span class="p">[</span><span class="nx">timeoutKey</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">runAtMillis</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">nowMillis</span> <span class="o">+</span> <span class="nx">millis</span><span class="p">,</span>
    <span class="nx">funcToCall</span><span class="o">:</span> <span class="nx">funcToCall</span><span class="p">,</span>
    <span class="nx">recurring</span><span class="o">:</span> <span class="nx">recurring</span><span class="p">,</span>
    <span class="nx">timeoutKey</span><span class="o">:</span> <span class="nx">timeoutKey</span><span class="p">,</span>
    <span class="nx">millis</span><span class="o">:</span> <span class="nx">millis</span>
  <span class="p">};</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-97"><td class="docs"><div class="pilwrap"><a href="#section-97" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@namespace</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">defaultFakeTimer</span><span class="o">:</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">FakeTimer</span><span class="p">(),</span>

  <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">assertInstalled</span><span class="p">();</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">defaultFakeTimer</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="nx">tick</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">millis</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">assertInstalled</span><span class="p">();</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">defaultFakeTimer</span><span class="p">.</span><span class="nx">tick</span><span class="p">(</span><span class="nx">millis</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">runFunctionsWithinRange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">oldMillis</span><span class="p">,</span> <span class="nx">nowMillis</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">defaultFakeTimer</span><span class="p">.</span><span class="nx">runFunctionsWithinRange</span><span class="p">(</span><span class="nx">oldMillis</span><span class="p">,</span> <span class="nx">nowMillis</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">scheduleFunction</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">timeoutKey</span><span class="p">,</span> <span class="nx">funcToCall</span><span class="p">,</span> <span class="nx">millis</span><span class="p">,</span> <span class="nx">recurring</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">defaultFakeTimer</span><span class="p">.</span><span class="nx">scheduleFunction</span><span class="p">(</span><span class="nx">timeoutKey</span><span class="p">,</span> <span class="nx">funcToCall</span><span class="p">,</span> <span class="nx">millis</span><span class="p">,</span> <span class="nx">recurring</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">useMock</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">isInstalled</span><span class="p">())</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">spec</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getEnv</span><span class="p">().</span><span class="nx">currentSpec</span><span class="p">;</span>
      <span class="nx">spec</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">uninstallMock</span><span class="p">);</span>

      <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installMock</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">installMock</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">defaultFakeTimer</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">uninstallMock</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">assertInstalled</span><span class="p">();</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">real</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">real</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="o">:</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">().</span><span class="nx">setTimeout</span><span class="p">,</span>
    <span class="nx">clearTimeout</span><span class="o">:</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">().</span><span class="nx">clearTimeout</span><span class="p">,</span>
    <span class="nx">setInterval</span><span class="o">:</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">().</span><span class="nx">setInterval</span><span class="p">,</span>
    <span class="nx">clearInterval</span><span class="o">:</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">().</span><span class="nx">clearInterval</span>
  <span class="p">},</span>

  <span class="nx">assertInstalled</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">isInstalled</span><span class="p">())</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Mock clock is not installed, use jasmine.Clock.useMock()&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">isInstalled</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span> <span class="o">==</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">defaultFakeTimer</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">installed</span><span class="o">:</span> <span class="kc">null</span>
<span class="p">};</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">real</span><span class="p">;</span></pre></div></td></tr><tr id="section-98"><td class="docs"><div class="pilwrap"><a href="#section-98" class="pilcrow">&#182;</a></div><p>else for IE support</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">().</span><span class="nx">setTimeout</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">funcToCall</span><span class="p">,</span> <span class="nx">millis</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">.</span><span class="nx">apply</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">funcToCall</span><span class="p">,</span> <span class="nx">millis</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">().</span><span class="nx">setInterval</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">funcToCall</span><span class="p">,</span> <span class="nx">millis</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">.</span><span class="nx">apply</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">funcToCall</span><span class="p">,</span> <span class="nx">millis</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">().</span><span class="nx">clearTimeout</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">timeoutKey</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span><span class="p">.</span><span class="nx">clearTimeout</span><span class="p">.</span><span class="nx">apply</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span><span class="p">.</span><span class="nx">clearTimeout</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span><span class="p">.</span><span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeoutKey</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">().</span><span class="nx">clearInterval</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">timeoutKey</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span><span class="p">.</span><span class="nx">clearTimeout</span><span class="p">.</span><span class="nx">apply</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Clock</span><span class="p">.</span><span class="nx">installed</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">timeoutKey</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-99"><td class="docs"><div class="pilwrap"><a href="#section-99" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@constructor</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">MultiReporter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">subReporters_</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">inherit</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">MultiReporter</span><span class="p">,</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Reporter</span><span class="p">);</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">MultiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addReporter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reporter</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">subReporters_</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">reporter</span><span class="p">);</span>
<span class="p">};</span>

<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">functionNames</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;reportRunnerStarting&quot;</span><span class="p">,</span>
    <span class="s2">&quot;reportRunnerResults&quot;</span><span class="p">,</span>
    <span class="s2">&quot;reportSuiteResults&quot;</span><span class="p">,</span>
    <span class="s2">&quot;reportSpecStarting&quot;</span><span class="p">,</span>
    <span class="s2">&quot;reportSpecResults&quot;</span><span class="p">,</span>
    <span class="s2">&quot;log&quot;</span>
  <span class="p">];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">functionNames</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">functionName</span> <span class="o">=</span> <span class="nx">functionNames</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="nx">jasmine</span><span class="p">.</span><span class="nx">MultiReporter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">functionName</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">functionName</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">subReporters_</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">subReporter</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">subReporters_</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">subReporter</span><span class="p">[</span><span class="nx">functionName</span><span class="p">])</span> <span class="p">{</span>
            <span class="nx">subReporter</span><span class="p">[</span><span class="nx">functionName</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">subReporter</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">})(</span><span class="nx">functionName</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})();</span></pre></div></td></tr><tr id="section-100"><td class="docs"><div class="pilwrap"><a href="#section-100" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Holds results for a set of Jasmine spec. Allows for the results array to hold another jasmine.NestedResults</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">NestedResults</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div></td></tr><tr id="section-101"><td class="docs"><div class="pilwrap"><a href="#section-101" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The total count of results</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">totalCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-102"><td class="docs"><div class="pilwrap"><a href="#section-102" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Number of passed results</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">passedCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-103"><td class="docs"><div class="pilwrap"><a href="#section-103" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Number of failed results</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">failedCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-104"><td class="docs"><div class="pilwrap"><a href="#section-104" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Was this suite/spec skipped?</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">skipped</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-105"><td class="docs"><div class="pilwrap"><a href="#section-105" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@ignore</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">items_</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-106"><td class="docs"><div class="pilwrap"><a href="#section-106" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Roll up the result counts.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">result</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">NestedResults</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">rollupCounts</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">totalCount</span> <span class="o">+=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">totalCount</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">passedCount</span> <span class="o">+=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">passedCount</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">failedCount</span> <span class="o">+=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">failedCount</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-107"><td class="docs"><div class="pilwrap"><a href="#section-107" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Adds a log message.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>Array </span><span class="dox_type">values</span><span>- of message parts which will be concatenated later.</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">NestedResults</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">items_</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">MessageResult</span><span class="p">(</span><span class="nx">values</span><span class="p">));</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-108"><td class="docs"><div class="pilwrap"><a href="#section-108" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Getter for the results: message &amp; results.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">NestedResults</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getItems</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">items_</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-109"><td class="docs"><div class="pilwrap"><a href="#section-109" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Adds a result, tracking counts (total, passed, &amp; failed)</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>result </span><span class="dox_type">jasmine.ExpectationResult</span><span class="dox_type">jasmine.NestedResults</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">NestedResults</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addResult</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">type</span> <span class="o">!=</span> <span class="s1">&#39;log&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">items_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">rollupCounts</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">totalCount</span><span class="o">++</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">passed</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">passedCount</span><span class="o">++</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">failedCount</span><span class="o">++</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">items_</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-110"><td class="docs"><div class="pilwrap"><a href="#section-110" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@returns {Boolean} True if <b>everything</b> below passed</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">NestedResults</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">passed</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">passedCount</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">totalCount</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-111"><td class="docs"><div class="pilwrap"><a href="#section-111" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Base class for pretty printing for expectation results.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">PrettyPrinter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">ppNestLevel_</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-112"><td class="docs"><div class="pilwrap"><a href="#section-112" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Formats a value in a nice, human-readable string.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">value</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">PrettyPrinter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">format</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">ppNestLevel_</span><span class="o">++</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitScalar</span><span class="p">(</span><span class="s1">&#39;undefined&#39;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitScalar</span><span class="p">(</span><span class="s1">&#39;null&#39;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">())</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitScalar</span><span class="p">(</span><span class="s1">&#39;&lt;global&gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">jasmineToString</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitScalar</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">jasmineToString</span><span class="p">());</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitString</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isSpy</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitScalar</span><span class="p">(</span><span class="s2">&quot;spy on &quot;</span> <span class="o">+</span> <span class="nx">value</span><span class="p">.</span><span class="nx">identity</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="k">instanceof</span> <span class="nb">RegExp</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitScalar</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitScalar</span><span class="p">(</span><span class="s1">&#39;Function&#39;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitScalar</span><span class="p">(</span><span class="s1">&#39;HTMLNode&#39;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="k">instanceof</span> <span class="nb">Date</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitScalar</span><span class="p">(</span><span class="s1">&#39;Date(&#39;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">__Jasmine_been_here_before__</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitScalar</span><span class="p">(</span><span class="s1">&#39;&lt;circular reference: &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isArray_</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;Array&#39;</span> <span class="o">:</span> <span class="s1">&#39;Object&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isArray_</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">value</span><span class="p">.</span><span class="nx">__Jasmine_been_here_before__</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">isArray_</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">emitArray</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">emitObject</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">delete</span> <span class="nx">value</span><span class="p">.</span><span class="nx">__Jasmine_been_here_before__</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitScalar</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ppNestLevel_</span><span class="o">--</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">PrettyPrinter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">iterateObject</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">property</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">obj</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">property</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">property</span> <span class="o">==</span> <span class="s1">&#39;__Jasmine_been_here_before__&#39;</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
    <span class="nx">fn</span><span class="p">(</span><span class="nx">property</span><span class="p">,</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">__lookupGetter__</span> <span class="o">?</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">__lookupGetter__</span><span class="p">(</span><span class="nx">property</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span> <span class="o">&amp;&amp;</span> 
                                         <span class="nx">obj</span><span class="p">.</span><span class="nx">__lookupGetter__</span><span class="p">(</span><span class="nx">property</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="o">:</span> <span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">PrettyPrinter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emitArray</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">unimplementedMethod_</span><span class="p">;</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">PrettyPrinter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emitObject</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">unimplementedMethod_</span><span class="p">;</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">PrettyPrinter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emitScalar</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">unimplementedMethod_</span><span class="p">;</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">PrettyPrinter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emitString</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">unimplementedMethod_</span><span class="p">;</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">StringPrettyPrinter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">jasmine</span><span class="p">.</span><span class="nx">PrettyPrinter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">inherit</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">StringPrettyPrinter</span><span class="p">,</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">PrettyPrinter</span><span class="p">);</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">StringPrettyPrinter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emitScalar</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">StringPrettyPrinter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emitString</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">StringPrettyPrinter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emitArray</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ppNestLevel_</span> <span class="o">&gt;</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">MAX_PRETTY_PRINT_DEPTH</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;Array&quot;</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;[ &#39;</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39; ]&#39;</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">StringPrettyPrinter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emitObject</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ppNestLevel_</span> <span class="o">&gt;</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">MAX_PRETTY_PRINT_DEPTH</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;Object&quot;</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;{ &#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">first</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">iterateObject</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">,</span> <span class="nx">isGetter</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">first</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">first</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">self</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">property</span><span class="p">);</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39; : &#39;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">isGetter</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;&lt;getter&gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">property</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39; }&#39;</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">StringPrettyPrinter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">append</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">string</span> <span class="o">+=</span> <span class="nx">value</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">env</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">env</span> <span class="o">=</span> <span class="nx">env</span><span class="p">;</span></pre></div></td></tr><tr id="section-113"><td class="docs"><div class="pilwrap"><a href="#section-113" class="pilcrow">&#182;</a></div><p>parallel to blocks. each true value in this array means the block will
get executed even if we abort</p>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">ensured</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">blocks</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">running</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">abort</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addBefore</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">block</span><span class="p">,</span> <span class="nx">ensure</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">ensure</span> <span class="o">===</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ensure</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">block</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">ensured</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">ensure</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">block</span><span class="p">,</span> <span class="nx">ensure</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">ensure</span> <span class="o">===</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ensure</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">block</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">ensured</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">ensure</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">insertNext</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">block</span><span class="p">,</span> <span class="nx">ensure</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">ensure</span> <span class="o">===</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ensure</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">ensured</span><span class="p">.</span><span class="nx">splice</span><span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">index</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">ensure</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">splice</span><span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">index</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">block</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="o">++</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">running</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">onComplete</span> <span class="o">=</span> <span class="nx">onComplete</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">next_</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isRunning</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">running</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">.</span><span class="nx">LOOP_DONT_RECURSE</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">next_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">goAgain</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

  <span class="k">while</span> <span class="p">(</span><span class="nx">goAgain</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">goAgain</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">abort</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">ensured</span><span class="p">[</span><span class="nx">self</span><span class="p">.</span><span class="nx">index</span><span class="p">]))</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">calledSynchronously</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">completedSynchronously</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">onComplete</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">.</span><span class="nx">LOOP_DONT_RECURSE</span> <span class="o">&amp;&amp;</span> <span class="nx">calledSynchronously</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">completedSynchronously</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">blocks</span><span class="p">[</span><span class="nx">self</span><span class="p">.</span><span class="nx">index</span><span class="p">].</span><span class="nx">abort</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">abort</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">index</span><span class="o">++</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">updateInterval</span> <span class="o">&amp;&amp;</span> <span class="nx">now</span> <span class="o">-</span> <span class="nx">self</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">lastUpdate</span> <span class="o">&gt;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">updateInterval</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">lastUpdate</span> <span class="o">=</span> <span class="nx">now</span><span class="p">;</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">next_</span><span class="p">();</span>
          <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">.</span><span class="nx">LOOP_DONT_RECURSE</span> <span class="o">&amp;&amp;</span> <span class="nx">completedSynchronously</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">goAgain</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">next_</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">blocks</span><span class="p">[</span><span class="nx">self</span><span class="p">.</span><span class="nx">index</span><span class="p">].</span><span class="nx">execute</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">);</span>

      <span class="nx">calledSynchronously</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">completedSynchronously</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">onComplete</span><span class="p">();</span>
      <span class="p">}</span>
      
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">running</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">onComplete</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">onComplete</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">results</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">NestedResults</span><span class="p">();</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">blocks</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">results</span><span class="p">.</span><span class="nx">addResult</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">blocks</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">results</span><span class="p">());</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-114"><td class="docs"><div class="pilwrap"><a href="#section-114" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Runner</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>env </span><span class="dox_type">jasmine.Env</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Runner</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">env</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">env</span> <span class="o">=</span> <span class="nx">env</span><span class="p">;</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">(</span><span class="nx">env</span><span class="p">);</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">before_</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">after_</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">suites_</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">execute</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">reporter</span><span class="p">.</span><span class="nx">reportRunnerStarting</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">reporter</span><span class="p">.</span><span class="nx">reportRunnerStarting</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">finishCallback</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">beforeEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">beforeEachFunction</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">beforeEachFunction</span><span class="p">.</span><span class="nx">typeName</span> <span class="o">=</span> <span class="s1">&#39;beforeEach&#39;</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">before_</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">beforeEachFunction</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">afterEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">afterEachFunction</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">afterEachFunction</span><span class="p">.</span><span class="nx">typeName</span> <span class="o">=</span> <span class="s1">&#39;afterEach&#39;</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">after_</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">afterEachFunction</span><span class="p">);</span>
<span class="p">};</span>


<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">finishCallback</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">reporter</span><span class="p">.</span><span class="nx">reportRunnerResults</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addSuite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">suites_</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">block</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">block</span> <span class="k">instanceof</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">addSuite</span><span class="p">(</span><span class="nx">block</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">block</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">specs</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">suites</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">suites</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">specs</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">suites</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">specs</span> <span class="o">=</span> <span class="nx">specs</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">suites</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">specs</span><span class="p">());</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">specs</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">suites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">suites_</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">topLevelSuites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">topLevelSuites</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">suites_</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">suites_</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">parentSuite</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">topLevelSuites</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">suites_</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">topLevelSuites</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">results</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">results</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-115"><td class="docs"><div class="pilwrap"><a href="#section-115" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Internal representation of a Jasmine specification, or test.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>env
 </span><span class="dox_type">jasmine.Env</span></div><div class="dox_tag_detail"><span>suite
 </span><span class="dox_type">jasmine.Suite</span></div><div class="dox_tag_detail"><span>description </span><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">env</span><span class="p">,</span> <span class="nx">suite</span><span class="p">,</span> <span class="nx">description</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">env</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;jasmine.Env() required&#39;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">suite</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;jasmine.Suite() required&#39;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">spec</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">spec</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">env</span><span class="p">.</span><span class="nx">nextSpecId</span> <span class="o">?</span> <span class="nx">env</span><span class="p">.</span><span class="nx">nextSpecId</span><span class="p">()</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
  <span class="nx">spec</span><span class="p">.</span><span class="nx">env</span> <span class="o">=</span> <span class="nx">env</span><span class="p">;</span>
  <span class="nx">spec</span><span class="p">.</span><span class="nx">suite</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">;</span>
  <span class="nx">spec</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="nx">description</span><span class="p">;</span>
  <span class="nx">spec</span><span class="p">.</span><span class="nx">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">(</span><span class="nx">env</span><span class="p">);</span>

  <span class="nx">spec</span><span class="p">.</span><span class="nx">afterCallbacks</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">spec</span><span class="p">.</span><span class="nx">spies_</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">spec</span><span class="p">.</span><span class="nx">results_</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">NestedResults</span><span class="p">();</span>
  <span class="nx">spec</span><span class="p">.</span><span class="nx">results_</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="nx">description</span><span class="p">;</span>
  <span class="nx">spec</span><span class="p">.</span><span class="nx">matchersClass</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getFullName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">suite</span><span class="p">.</span><span class="nx">getFullName</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">description</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span><span class="p">;</span>
<span class="p">};</span>


<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">results</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">results_</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-116"><td class="docs"><div class="pilwrap"><a href="#section-116" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>All parameters are pretty-printed and concatenated together, then written to the spec's output.</p>

<p>Be careful not to leave calls to <code>jasmine.log</code> in production code.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">results_</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">runs</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">func</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">block</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">,</span> <span class="nx">func</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">addToQueue</span><span class="p">(</span><span class="nx">block</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addToQueue</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">block</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">isRunning</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">insertNext</span><span class="p">(</span><span class="nx">block</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">block</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-117"><td class="docs"><div class="pilwrap"><a href="#section-117" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@param {jasmine.ExpectationResult} result</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addMatcherResult</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">results_</span><span class="p">.</span><span class="nx">addResult</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">expect</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">actual</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">positive</span> <span class="o">=</span> <span class="k">new</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getMatchersClass_</span><span class="p">())(</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
  <span class="nx">positive</span><span class="p">.</span><span class="nx">not</span> <span class="o">=</span> <span class="k">new</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getMatchersClass_</span><span class="p">())(</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">positive</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-118"><td class="docs"><div class="pilwrap"><a href="#section-118" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Waits a fixed time period before moving to the next block.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>timeout </span><span class="dox_type">Number</span><span>- milliseconds to wait</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">waits</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">timeout</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">waitsFunc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">WaitsBlock</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">,</span> <span class="nx">timeout</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">addToQueue</span><span class="p">(</span><span class="nx">waitsFunc</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-119"><td class="docs"><div class="pilwrap"><a href="#section-119" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Waits for the latchFunction to return true before proceeding to the next block.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>latchFunction
 </span><span class="dox_type">Function</span></div><div class="dox_tag_detail"><span>optional_timeoutMessage
 </span><span class="dox_type">String</span></div><div class="dox_tag_detail"><span>optional_timeout </span><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">waitsFor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">latchFunction</span><span class="p">,</span> <span class="nx">optional_timeoutMessage</span><span class="p">,</span> <span class="nx">optional_timeout</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">latchFunction_</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">optional_timeoutMessage_</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">optional_timeout_</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">arg</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="k">switch</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">arg</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="s1">&#39;function&#39;</span><span class="o">:</span>
        <span class="nx">latchFunction_</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="s1">&#39;string&#39;</span><span class="o">:</span>
        <span class="nx">optional_timeoutMessage_</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="s1">&#39;number&#39;</span><span class="o">:</span>
        <span class="nx">optional_timeout_</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">waitsForFunc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">WaitsForBlock</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">,</span> <span class="nx">optional_timeout_</span><span class="p">,</span> <span class="nx">latchFunction_</span><span class="p">,</span> <span class="nx">optional_timeoutMessage_</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">addToQueue</span><span class="p">(</span><span class="nx">waitsForFunc</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fail</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">expectationResult</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">ExpectationResult</span><span class="p">({</span>
    <span class="nx">passed</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">message</span><span class="o">:</span> <span class="nx">e</span> <span class="o">?</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">formatException</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">:</span> <span class="s1">&#39;Exception&#39;</span><span class="p">,</span>
    <span class="nx">trace</span><span class="o">:</span> <span class="p">{</span> <span class="nx">stack</span><span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stack</span> <span class="p">}</span>
  <span class="p">});</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">results_</span><span class="p">.</span><span class="nx">addResult</span><span class="p">(</span><span class="nx">expectationResult</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getMatchersClass_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">matchersClass</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">matchersClass</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addMatchers</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">matchersPrototype</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getMatchersClass_</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">newMatchersClass</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">parent</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">inherit</span><span class="p">(</span><span class="nx">newMatchersClass</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
  <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Matchers</span><span class="p">.</span><span class="nx">wrapInto_</span><span class="p">(</span><span class="nx">matchersPrototype</span><span class="p">,</span> <span class="nx">newMatchersClass</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">matchersClass</span> <span class="o">=</span> <span class="nx">newMatchersClass</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">finishCallback</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">reporter</span><span class="p">.</span><span class="nx">reportSpecResults</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">finish</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">removeAllSpies</span><span class="p">();</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">finishCallback</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">onComplete</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">onComplete</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">after</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">doAfter</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">isRunning</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">,</span> <span class="nx">doAfter</span><span class="p">,</span> <span class="k">this</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">afterCallbacks</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">doAfter</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">execute</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">spec</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">spec</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">specFilter</span><span class="p">(</span><span class="nx">spec</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">spec</span><span class="p">.</span><span class="nx">results_</span><span class="p">.</span><span class="nx">skipped</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">spec</span><span class="p">.</span><span class="nx">finish</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">reporter</span><span class="p">.</span><span class="nx">reportSpecStarting</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

  <span class="nx">spec</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">currentSpec</span> <span class="o">=</span> <span class="nx">spec</span><span class="p">;</span>

  <span class="nx">spec</span><span class="p">.</span><span class="nx">addBeforesAndAftersToQueue</span><span class="p">();</span>

  <span class="nx">spec</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">spec</span><span class="p">.</span><span class="nx">finish</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addBeforesAndAftersToQueue</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">runner</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">currentRunner</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">suite</span><span class="p">;</span> <span class="nx">suite</span><span class="p">;</span> <span class="nx">suite</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">parentSuite</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">before_</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">addBefore</span><span class="p">(</span><span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">,</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">before_</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="k">this</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">before_</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">addBefore</span><span class="p">(</span><span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">,</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">before_</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="k">this</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">afterCallbacks</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">afterCallbacks</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="k">this</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">suite</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">suite</span><span class="p">;</span> <span class="nx">suite</span><span class="p">;</span> <span class="nx">suite</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">parentSuite</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">after_</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">,</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">after_</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="k">this</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">after_</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">,</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">after_</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="k">this</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">explodes</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="s1">&#39;explodes function should not have been called&#39;</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">spyOn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">methodName</span><span class="p">,</span> <span class="nx">ignoreMethodDoesntExist</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">obj</span> <span class="o">==</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="s2">&quot;spyOn could not find an object to spy upon for &quot;</span> <span class="o">+</span> <span class="nx">methodName</span> <span class="o">+</span> <span class="s2">&quot;()&quot;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ignoreMethodDoesntExist</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">methodName</span><span class="p">]</span> <span class="o">===</span> <span class="nx">jasmine</span><span class="p">.</span><span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="nx">methodName</span> <span class="o">+</span> <span class="s1">&#39;() method does not exist&#39;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ignoreMethodDoesntExist</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">methodName</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">methodName</span><span class="p">].</span><span class="nx">isSpy</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">methodName</span> <span class="o">+</span> <span class="s1">&#39; has already been spied upon&#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">spyObj</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">(</span><span class="nx">methodName</span><span class="p">);</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">spies_</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">spyObj</span><span class="p">);</span>
  <span class="nx">spyObj</span><span class="p">.</span><span class="nx">baseObj</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">;</span>
  <span class="nx">spyObj</span><span class="p">.</span><span class="nx">methodName</span> <span class="o">=</span> <span class="nx">methodName</span><span class="p">;</span>
  <span class="nx">spyObj</span><span class="p">.</span><span class="nx">originalValue</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">methodName</span><span class="p">];</span>

  <span class="nx">obj</span><span class="p">[</span><span class="nx">methodName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">spyObj</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">spyObj</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeAllSpies</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">spies_</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">spy</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">spies_</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="nx">spy</span><span class="p">.</span><span class="nx">baseObj</span><span class="p">[</span><span class="nx">spy</span><span class="p">.</span><span class="nx">methodName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">spy</span><span class="p">.</span><span class="nx">originalValue</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">spies_</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-120"><td class="docs"><div class="pilwrap"><a href="#section-120" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Internal representation of a Jasmine suite.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>env
 </span><span class="dox_type">jasmine.Env</span></div><div class="dox_tag_detail"><span>description
 </span><span class="dox_type">String</span></div><div class="dox_tag_detail"><span>specDefinitions
 </span><span class="dox_type">Function</span></div><div class="dox_tag_detail"><span>parentSuite </span><span class="dox_type">jasmine.Suite</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">env</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">specDefinitions</span><span class="p">,</span> <span class="nx">parentSuite</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">env</span><span class="p">.</span><span class="nx">nextSuiteId</span> <span class="o">?</span> <span class="nx">env</span><span class="p">.</span><span class="nx">nextSuiteId</span><span class="p">()</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="nx">description</span><span class="p">;</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Queue</span><span class="p">(</span><span class="nx">env</span><span class="p">);</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">parentSuite</span> <span class="o">=</span> <span class="nx">parentSuite</span><span class="p">;</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">env</span> <span class="o">=</span> <span class="nx">env</span><span class="p">;</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">before_</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">after_</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">children_</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">suites_</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">self</span><span class="p">.</span><span class="nx">specs_</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getFullName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">fullName</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">description</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">parentSuite</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentSuite</span><span class="p">;</span> <span class="nx">parentSuite</span><span class="p">;</span> <span class="nx">parentSuite</span> <span class="o">=</span> <span class="nx">parentSuite</span><span class="p">.</span><span class="nx">parentSuite</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fullName</span> <span class="o">=</span> <span class="nx">parentSuite</span><span class="p">.</span><span class="nx">description</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">fullName</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">fullName</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">finish</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">reporter</span><span class="p">.</span><span class="nx">reportSuiteResults</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">finished</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">onComplete</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">beforeEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">beforeEachFunction</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">beforeEachFunction</span><span class="p">.</span><span class="nx">typeName</span> <span class="o">=</span> <span class="s1">&#39;beforeEach&#39;</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">before_</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">beforeEachFunction</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">afterEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">afterEachFunction</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">afterEachFunction</span><span class="p">.</span><span class="nx">typeName</span> <span class="o">=</span> <span class="s1">&#39;afterEach&#39;</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">after_</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">afterEachFunction</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">results</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">results</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suiteOrSpec</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">children_</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">suiteOrSpec</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">suiteOrSpec</span> <span class="k">instanceof</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">suites_</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">suiteOrSpec</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">currentRunner</span><span class="p">().</span><span class="nx">addSuite</span><span class="p">(</span><span class="nx">suiteOrSpec</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">specs_</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">suiteOrSpec</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">suiteOrSpec</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">specs</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">specs_</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">suites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">suites_</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">children</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">children_</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">execute</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">finish</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">WaitsBlock</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">env</span><span class="p">,</span> <span class="nx">timeout</span><span class="p">,</span> <span class="nx">spec</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">=</span> <span class="nx">timeout</span><span class="p">;</span>
  <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">env</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">spec</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">inherit</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">WaitsBlock</span><span class="p">,</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span><span class="p">);</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">WaitsBlock</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">execute</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">onComplete</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">VERBOSE</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">reporter</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;&gt;&gt; Jasmine waiting for &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">+</span> <span class="s1">&#39; ms...&#39;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">onComplete</span><span class="p">();</span>
  <span class="p">},</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-121"><td class="docs"><div class="pilwrap"><a href="#section-121" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A block which waits for some condition to become true, with timeout.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>env </span><span class="dox_type">jasmine.Env</span><span>- The Jasmine environment.
</span></div><div class="dox_tag_detail"><span>timeout </span><span class="dox_type">Number</span><span>- The maximum time in milliseconds to wait for the condition to become true.
</span></div><div class="dox_tag_detail"><span>latchFunction </span><span class="dox_type">Function</span><span>- A function which returns true when the desired condition has been met.
</span></div><div class="dox_tag_detail"><span>message </span><span class="dox_type">String</span><span>- The message to display if the desired condition hasn't been met within the given time period.
</span></div><div class="dox_tag_detail"><span>spec </span><span class="dox_type">jasmine.Spec</span><span>- The Jasmine spec.</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">jasmine</span><span class="p">.</span><span class="nx">WaitsForBlock</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">env</span><span class="p">,</span> <span class="nx">timeout</span><span class="p">,</span> <span class="nx">latchFunction</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">spec</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">=</span> <span class="nx">timeout</span> <span class="o">||</span> <span class="nx">env</span><span class="p">.</span><span class="nx">defaultTimeoutInterval</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">latchFunction</span> <span class="o">=</span> <span class="nx">latchFunction</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">message</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">totalTimeSpentWaitingForLatch</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">env</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">spec</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">jasmine</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">inherit</span><span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">WaitsForBlock</span><span class="p">,</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">Block</span><span class="p">);</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">WaitsForBlock</span><span class="p">.</span><span class="nx">TIMEOUT_INCREMENT</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">WaitsForBlock</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">execute</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">jasmine</span><span class="p">.</span><span class="nx">VERBOSE</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">reporter</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;&gt;&gt; Jasmine waiting for &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="s1">&#39;something to happen&#39;</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">latchFunctionResult</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">latchFunctionResult</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">latchFunction</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">spec</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
    <span class="nx">onComplete</span><span class="p">();</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">latchFunctionResult</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">onComplete</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">totalTimeSpentWaitingForLatch</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">message</span> <span class="o">=</span> <span class="s1">&#39;timed out after &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">+</span> <span class="s1">&#39; msec waiting for &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="s1">&#39;something to happen&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">fail</span><span class="p">({</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;timeout&#39;</span><span class="p">,</span>
      <span class="nx">message</span><span class="o">:</span> <span class="nx">message</span>
    <span class="p">});</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">abort</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">onComplete</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">totalTimeSpentWaitingForLatch</span> <span class="o">+=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">WaitsForBlock</span><span class="p">.</span><span class="nx">TIMEOUT_INCREMENT</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">WaitsForBlock</span><span class="p">.</span><span class="nx">TIMEOUT_INCREMENT</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jasmine</span><span class="p">.</span><span class="nx">version_</span><span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;major&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">&quot;minor&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">&quot;build&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">&quot;revision&quot;</span><span class="o">:</span> <span class="mi">1354556913</span>
<span class="p">};</span>

</pre></div></td></tr></tbody></table><div id="generated">generated Mon Mar 24 2014 19:50:06 GMT+0000 (GMT)  </div></div></body></html>